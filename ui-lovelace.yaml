decluttering_templates:
  side-nav:
    card:
      type: custom:stack-in-card
      cards:
        - type: custom:mushroom-chips-card
          chips:
            - type: template
              icon: |
                {% if '[[active-view]]' == 'home' %}
                  mdi:home
                {% else %}
                  mdi:home-outline
                {% endif %}
              icon_color: |
                {% if '[[active-view]]' == 'home' %}
                  var(--cstm-rgb-bottom-nav)
                {% else %}
                  disabled
                {% endif %}
              content: ""
              tap_action:
                action: navigate
                navigation_path: /[[dashboard-name]]/home
              card_mod:
                style: |
                  ha-card {
                    {% if '[[active-view]]' == 'home' %}
                    --chip-background: rgba(var(--cstm-rgb-on), 0.8);
                    {% endif %}
                  }
                  ha-card:active {
                    transform: scale(0.95);
                    transition: 0s;
                  }
            - type: template
              icon: mdi:devices
              icon_color: |
                {% if '[[active-view]]' == 'device' %}
                  var(--cstm-rgb-bottom-nav)
                {% else %}
                  disabled
                {% endif %}
              content: ""
              tap_action:
                action: navigate
                navigation_path: /[[dashboard-name]]/device
              card_mod:
                style: |
                  ha-card {
                    {% if '[[active-view]]' == 'device' %}
                    --chip-background: rgba(var(--cstm-rgb-on), 0.8);
                    {% endif %}
                  }
                  ha-card:active {
                    transform: scale(0.95);
                    transition: 0s;
                  }
            - type: template
              icon: |
                {% if '[[active-view]]' == 'news' %}
                  mdi:bell
                {% else %}
                  mdi:bell-outline
                {% endif %}
              icon_color: |
                {% if '[[active-view]]' == 'news' %}
                  var(--cstm-rgb-bottom-nav)
                {% else %}
                  disabled
                {% endif %}
              content: ""
              tap_action:
                action: navigate
                navigation_path: /[[dashboard-name]]/news
              card_mod:
                style: |
                  ha-card {
                    {% if '[[active-view]]' == 'news' %}
                    --chip-background: rgba(var(--cstm-rgb-on), 0.8);
                    {% endif %}
                  }
                  ha-card:active {
                    transform: scale(0.95);
                    transition: 0s;
                  }
            - type: template
              icon: |
                {% if '[[active-view]]' == 'automation' %}
                  mdi:creation
                {% else %}
                  mdi:creation-outline
                {% endif %}
              icon_color: |
                {% if '[[active-view]]' == 'automation' %}
                  var(--cstm-rgb-bottom-nav)
                {% else %}
                  disabled
                {% endif %}
              content: ""
              tap_action:
                action: navigate
                navigation_path: /[[dashboard-name]]/automation
              card_mod:
                style: |
                  ha-card {
                    {% if '[[active-view]]' == 'automation' %}
                    --chip-background: rgba(var(--cstm-rgb-on), 0.8);
                    {% endif %}
                  }
                  ha-card:active {
                    transform: scale(0.95);
                    transition: 0s;
                  }
            - type: template
              icon: |
                {% if '[[active-view]]' == 'system' %}
                  mdi:cog
                {% else %}
                  mdi:cog-outline
                {% endif %}
              icon_color: |
                {% if '[[active-view]]' == 'system' %}
                  var(--cstm-rgb-bottom-nav)
                {% else %}
                  disabled
                {% endif %}
              content: ""
              tap_action:
                action: navigate
                navigation_path: /[[dashboard-name]]/system
              card_mod:
                style: |
                  ha-card {
                    {% if '[[active-view]]' == 'system' %}
                    --chip-background: rgba(var(--cstm-rgb-on), 0.8);
                    {% endif %}
                  }
                  ha-card:active {
                    transform: scale(0.95);
                    transition: 0s;
                  }
          alignment: start
          card_mod:
            style: |
              .chip-container {
                flex-flow: column !important;
              }
              ha-card {
                --chip-background: rgba(var(--cstm-rgb-on-secondary), 0.05);
                --chip-box-shadow: none;
                --ha-card-box-shadow: none;
                --chip-border-radius: var(--mush-control-border-radius);
                --chip-height: 50px;
              }
      card_mod:
        style: |
          ha-card {
            border-radius: 20px;
            padding: 8px;
            width: auto;
          }
  bottom-nav:
    card:
      type: custom:stack-in-card
      mode: horizontal
      cards:
        - type: custom:mushroom-template-card
          icon: |
            {% if '[[active-view]]' == 'home' %}
              mdi:home
            {% else %}
              mdi:home-outline
            {% endif %}
          icon_color: |
            {% if '[[active-view]]' == 'home' %}
              var(--cstm-rgb-on)
            {% else %}
              grey
            {% endif %}
          layout: vertical
          tap_action:
            action: navigate
            navigation_path: /[[dashboard-name]]/home
          card_mod:
            style: |
              ha-card {
                {% if '[[active-view]]' == 'home' %}
                --chip-background: rgba(var(--cstm-rgb-on), 0.8);
                {% endif %}
              }
        - type: custom:mushroom-template-card
          icon: mdi:devices
          icon_color: |
            {% if '[[active-view]]' == 'device' %}
              var(--cstm-rgb-on)
            {% else %}
              grey
            {% endif %}
          layout: vertical
          tap_action:
            action: navigate
            navigation_path: /[[dashboard-name]]/device
          card_mod:
            style: |
              ha-card {
                {% if '[[active-view]]' == 'device' %}
                --chip-background: rgba(var(--cstm-rgb-on), 0.8);
                {% endif %}
              }
        - type: custom:mushroom-template-card
          icon: |
            {% if '[[active-view]]' == 'news' %}
              mdi:bell
            {% else %}
              mdi:bell-outline
            {% endif %}
          icon_color: |
            {% if '[[active-view]]' == 'news' %}
              var(--cstm-rgb-on)
            {% else %}
              grey
            {% endif %}
          layout: vertical
          tap_action:
            action: navigate
            navigation_path: /[[dashboard-name]]/news
          card_mod:
            style: |
              ha-card {
                {% if '[[active-view]]' == 'news' %}
                --chip-background: rgba(var(--cstm-rgb-on), 0.8);
                {% endif %}
              }
        - type: custom:mushroom-template-card
          icon: |
            {% if '[[active-view]]' == 'automationv' %}
              mdi:creation
            {% else %}
              mdi:creation-outline
            {% endif %}
          icon_color: |
            {% if '[[active-view]]' == 'automation' %}
              var(--cstm-rgb-on)
            {% else %}
              grey
            {% endif %}
          layout: vertical
          tap_action:
            action: navigate
            navigation_path: /[[dashboard-name]]/automation
          card_mod:
            style: |
              ha-card {
                {% if '[[active-view]]' == 'automation' %}
                --chip-background: rgba(var(--cstm-rgb-on), 0.8);
                {% endif %}
              }
        - type: custom:mushroom-template-card
          icon: |
            {% if '[[active-view]]' == 'system' %}
              mdi:cog
            {% else %}
              mdi:cog-outline
            {% endif %}
          icon_color: |
            {% if '[[active-view]]' == 'system' %}
              var(--cstm-rgb-on)
            {% else %}
              grey
            {% endif %}
          layout: vertical
          tap_action:
            action: navigate
            navigation_path: /[[dashboard-name]]/system
          card_mod:
            style: |
              ha-card {
                {% if '[[active-view]]' == 'system' %}
                --chip-background: rgba(var(--cstm-rgb-on), 0.8);
                {% endif %}
              }
      card_mod:
        style: |
          ha-card {
            border-radius: 12px;
            #padding: 8px;
            width: auto;
            backdrop-filter: blur(250px);
            background: rgba(115, 115, 115, 0.20);
          }
          :host {
            --mush-icon-symbol-size: 0.75em;
          }
  weather_now_template:
    card:
      type: custom:mushroom-template-card
      primary: >-
        {% set state = states('weather.meteo_france') %}
        {% set meteo = {
          "clear-night": "Nuit dégagée",
          "cloudy": "Nuageux",
          "fog": "Brouillard",
          "hail": "Grêle",
          "lightning": "Orages",
          "lightning-rainy": "Pluies orageuses",
          "partlycloudy": "Partiellement nuageux",
          "pouring": "Pluies torrentielles",
          "rainy": "Pluvieux",
          "snowy": "Neige",
          "snowy-rainy": "Neige et pluie",
          "sunny": "Ensoleillé",
          "windy": "Venteux",
          "windy-variant": "Venteux avec nuages",
          "exceptional": "Conditions exceptionnelles"
        } %}

        Actuellement : {{ meteo[state] if state in meteo else state }}
      secondary: "[[secondary]]"
      icon: mdi:weather-partly-cloudy
      entity: sensor.openweathermap_condition
      picture: >-
        {% set raw_state = states("weather.meteo_france") %}

        {% set condition_map = {
          "Nuit Claire": "clear-night",
          "Nuit claire": "clear-night",
          "Très nuageux": "cloudy",
          "Couvert": "cloudy",
          "Brume ou bancs de brouillard": "fog",
          "Brume": "fog",
          "Brouillard": "fog",
          "Brouillard givrant": "fog",
          "Bancs de Brouillard": "fog",
          "Risque de grêle": "hail",
          "Risque de grèle": "hail",
          "Risque d'orages": "lightning",
          "Orages": "lightning",
          "Pluie orageuses": "lightning-rainy",
          "Pluies orageuses": "lightning-rainy",
          "Averses orageuses": "lightning-rainy",
          "Ciel voilé": "partlycloudy",
          "Ciel voilé nuit": "partlycloudy",
          "Éclaircies": "partlycloudy",
          "Eclaircies": "partlycloudy",
          "Peu nuageux": "partlycloudy",
          "Pluie forte": "pouring",
          "Bruine / Pluie faible": "rainy",
          "Bruine": "rainy",
          "Pluie faible": "rainy",
          "Pluies éparses / Rares averses": "rainy",
          "Pluies éparses": "rainy",
          "Rares averses": "rainy",
          "Pluie modérée": "rainy",
          "Pluie / Averses": "rainy",
          "Averses": "rainy",
          "Averses faibles": "rainy",
          "Pluie": "rainy",
          "Neige / Averses de neige": "snowy",
          "Neige": "snowy",
          "Averses de neige": "snowy",
          "Neige forte": "snowy",
          "Neige faible": "snowy",
          "Quelques flocons": "snowy",
          "Pluie et neige": "snowy-rainy",
          "Pluie verglaçante": "snowy-rainy",
          "Ensoleillé": "sunny",
          "Ciel clair": "sunny"
        } %}

        {% set entity = condition_map.get(raw_state, raw_state) %}

        {% if entity == "clear-night" %}
          {% set slug = "clear-night" %}
        {% elif entity == "cloudy" %}
          {% set slug = "cloudy" %}
        {% elif entity == "fog" %}
          {% set slug = "fog" %}
        {% elif entity == "hail" %}
          {% set slug = "hail" %}
        {% elif entity == "lightning" %}
          {% set slug = "thunderstorms" %}
        {% elif entity == "lightning-rainy" %}
          {% set slug = "thunderstorms" %}
        {% elif entity == "partlycloudy" %}
          {% if states("sun.sun") == "below_horizon" %}
            {% set slug = "partly-cloudy-night" %}
          {% else %}
            {% set slug = "partly-cloudy-day" %}
          {% endif %}
        {% elif entity == "pouring" %}
          {% set slug = "extreme-rain" %}
        {% elif entity == "rainy" %}
          {% set slug = "rain" %}
        {% elif entity == "snowy" %}
          {% set slug = "snowflake" %}
        {% elif entity == "snowy-rainy" %}
          {% set slug = "sleet" %}
        {% elif entity == "sunny" %}
          {% set slug = "clear-day" %}
        {% elif entity == "windy" %}
          {% set slug = "wind" %}
        {% elif entity == "windy-variant" %}
          {% set slug = "wind-cloudy" %}
        {% elif entity == "exceptional" %}
          {% set slug = "extreme" %}
        {% else %}
          {% set slug = "unknown" %}
        {% endif %}

        local/weather/{{ slug }}.svg
      multiline_secondary: false
      icon_color: grey
      tap_action:
        action: navigate
        navigation_path: /lovelace/news
      badge_icon: ""
      badge_color: ""
      card_mod:
        style:
          .: |
            ha-card {
              background: none;
              box-shadow: none;
              --card-secondary-color: white;
              --card-primary-color: rgb(240,240,240);  # In previous HA OS versions, this was '--primary-text-color'
              --card-secondary-color: rgb(240,240,240);  # In previous HA OS versions, this was '--secondary-text-color'
            }
          mushroom-shape-avatar$: |
            .picture {
              width: 60px !important;
              height: 60px !important;
            }
  weather_day_template:
    card:
      type: vertical-stack
      cards:
        - type: custom:mushroom-template-card
          layout: vertical
          card_mod:
            style: |
              ha-card {
                box-shadow: none;
                background: none;
                margin-bottom: -18px;
              }
          primary: ""
          secondary: >-
            {% set dict = {'Mon': 'Lun', 'Tue': 'Mar', 'Wed': 'Mer', 'Thu': 'Jeu',
            'Fri': 'Ven', 'Sat': 'Sam', 'Sun': 'Dim'} %}

            {% set str = as_timestamp(state_attr('sensor.weather_forecast_daily', 'forecast')['weather.openweathermap'].forecast[[[index]]].datetime) | timestamp_custom("%a") %}

            {{ dict[str] }}
        - type: custom:mushroom-template-card
          layout: vertical
          entity: weather.openweathermap
          tap_action:
            action: more-info
          icon: mdi:weather-partly-cloudy
          multiline_secondary: true
          primary: >-
            {{ state_attr('sensor.weather_forecast_daily', 'forecast')['weather.openweathermap'].forecast[[[index]]].temperature | round(1)}} °C
          secondary: >-
            {{ state_attr('sensor.weather_forecast_daily', 'forecast')['weather.openweathermap'].forecast[[[index]]].wind_speed | round(1)}} km/h
          card_mod:
            style:
              .: |
                ha-card {
                  box-shadow: none;
                  background: none;
                }
              mushroom-shape-avatar$: |
                .picture {
                  width: 60px !important;
                  height: 60px !important;
                }
              mushroom-state-info$: |
                @media (min-width: 1200px) and (max-width: 1300px) {
                  .primary {
                    width: 116% !important;
                  }
                }
          picture: >-
            {% set cloud = state_attr('sensor.weather_forecast_daily', 'forecast')['weather.openweathermap'].forecast[[[index]]].cloud_coverage | int %}
            {% set rain = state_attr('sensor.weather_forecast_daily', 'forecast')['weather.openweathermap'].forecast[[[index]]].precipitation | float %}
            {% set entity = state_attr('sensor.weather_forecast_daily', 'forecast')['weather.openweathermap'].forecast[[[index]]].condition %}

            {% if entity == "exceptional" %}
              {% set slug = "extreme" %}
            {% elif entity == "sunny" %}
              {% set slug = "clear-day" %}
            {% elif entity == "windy" %}
              {% set slug = "wind" %}
            {% elif entity == "fog" %}
              {% set slug = "fog" %}
            {% elif entity == "hail" %}
              {% set slug = "hail" %}
            {% elif entity == "lightning_rainy" or entity == "lightning" %}
              {% set slug = "thunderstorms" %}
            {% elif entity == "snowy" %}
              {% if rain <= 1 %}
                {% set slug = "snowflake" %}
              {% elif rain <= 2.5 %}
                {% set slug = "snow" %}
              {% else %}
                {% set slug = "extreme-snow" %}
              {% endif %}
            {% elif entity == "snowy_rainy" %}
              {% set slug = "sleet" %}
            {% elif entity == "partly_cloudy" %}
              {% set slug = "partly-cloudy-day" %}
            {% elif entity == "pouring" %}
              {% set slug = "extreme-rain" %}
            {% elif rain > 0.5 %}
              {% if rain <= 1.5 %}
                {% set slug = "drizzle" %}
              {% elif rain <= 5 %}
                {% set slug = "rain" %}
              {% else %}
                {% set slug = "extreme-rain" %}
              {% endif %}
            {% elif cloud < 20 %}
              {% set slug = "clear-day" %}
            {% elif cloud < 40 %}
              {% set slug = "partly-cloudy-day" %}
            {% elif cloud < 60 %}
              {% set slug = "cloudy" %}
            {% elif cloud < 80 %}
              {% set slug = "overcast-day" %}
            {% elif cloud <= 100 %}
              {% set slug = "overcast" %}
            {% endif %}

            local/weather/{{slug}}.svg
  plug_template:
    default:
      - color: blue
      - icon_on: mdi:power-plug
      - icon_off: mdi:power-plug-off
      - action: more-info
    card:
      type: custom:mushroom-template-card
      entity: "[[entity]]"
      primary: >
        {% if "[[name]]" is defined %}
          [[name]]
        {% else %}
          '{{state_attr("[[entity]]", "friendly_name")}}'
        {% endif %}
      secondary: |-
        {% if is_state(entity, 'on') %}
          On
        {% elif is_state(entity, 'off') %}
          Off
        {% else %}
          Non disponible
        {% endif %}
      icon: |-
        {% if is_state(entity, 'on') %}
          [[icon_on]]
        {% else %}
          [[icon_off]]
        {% endif %}
      icon_color: |-
        {% if is_state(entity, 'on') %}
          var(--cstm-rgb-plug-on-icon)
        {% else %}
          disabled
        {% endif %}
      tap_action:
        action: more-info
      hold_action:
        action: more-info
      double_tap_action:
        action: toggle
      badge_icon: |-
        {% if not is_state(entity, ['on', 'off']) %}
          mdi:help
        {% endif %}
      badge_color: orange
      card_mod:
        style:
          mushroom-state-info$: |
            .primary {
              white-space: normal !important;
              overflow: hidden;
            }
          .: |
            ha-card {
              {% if is_state(config.entity, 'on') %}
                background: rgba(var(--mush-rgb-[[color]]), 0.8);
                --card-primary-color: rgb(var(--mush-rgb-white));
                --card-secondary-color: rgb(230,230,230);
              {% endif %}
            }
            ha-card:active {
              transform: scale(0.95);
              transition: 0s;
            }
  automation_template:
    card:
      type: custom:mushroom-template-card
      entity: "[[entity]]"
      primary: "[[primary]]"
      secondary: |-
        {% if is_state(entity, 'on') %}
          On
        {% elif is_state(entity, 'off') %}
          Off
        {% else %}
          Non disponible
        {% endif %}
      icon: |-
        {% if is_state(entity, 'on') %}
          mdi:creation
        {% else %}
          mdi:creation-outline
        {% endif %}
      icon_color: |-
        {% if is_state(entity, 'on') %}
          var(--cstm-rgb-automation-on-icon)
        {% else %}
          disabled
        {% endif %}
      tap_action:
        action: call-service
        service: automation.toggle
        data: {}
        target:
          entity_id: "[[entity]]"
      double_tap_action:
        action: more-info
      badge_icon: |-
        {% if not is_state(entity, ['on', 'off']) %}
          mdi:help
        {% endif %}
      badge_color: orange
      card_mod:
        style:
          mushroom-state-info$: |
            .primary {
              white-space: normal !important;
              overflow: hidden;
            }
          .: |
            ha-card {
              {% if is_state(config.entity, 'on') %}
                 background: var(--cstm-rgb-automation-on-background);
                 --card-primary-color: rgb(var(--cstm-rgb-on-primary-text));
                 --card-secondary-color: rgb(var(--cstm-rgb-on-secondary-text));
              {% endif %}
            }
            ha-card:active {
              transform: scale(0.95);
              transition: 0.0;
            }
            ha-state-icon {
              {% if is_state(config.entity, 'on') %}
              animation: stars 5s linear infinite;
              {% endif %}
            }
            @keyframes stars {
              0%, 1.55%, 7.05%, 10.05%, 18.55%, 27.55%, 30.05%, 37.05% {
                clip-path: inset(0 0 0 0);
              }
              1.5%, 30% {
                clip-path: polygon(100% 100%, 56.67% 100%, 56.67% 60.95%, 100% 60.95%);
              }
              7%, 18.5%, 37% {
                clip-path: polygon(100% 39.05%, 60.95% 38.81%, 56.67% 0%, 100% 0%);
              }
              10%, 27.5% {
                clip-path: polygon(36.48% 0%, 75.31% 50%, 37.66% 98.26%, 0% 50%);
              }
            }
  script_template:
    card:
      type: custom:mushroom-template-card
      entity: "[[entity]]"
      primary: "[[primary]]"
      icon: >
        {% if "[[icon]]" is defined %}
           [[icon]]
        {% else %}
          mdi:creation
        {% endif %}
      icon_color: |-
        {% if is_state(entity, 'on') %}
          var(--cstm-rgb-automation-on-icon)
        {% else %}
          disabled
        {% endif %}
      tap_action:
        action: call-service
        service: script.toggle
        data: {}
        target:
          entity_id: "[[entity]]"
      double_tap_action:
        action: more-info
      badge_icon: |-
        {% if not is_state(entity, ['on', 'off']) %}
          mdi:help
        {% endif %}
      badge_color: orange
      card_mod:
        style:
          mushroom-state-info$: |
            .primary {
              white-space: normal !important;
              overflow: hidden;
            }
          .: |
            ha-card {
              {% if is_state(config.entity, 'on') %}
                 background: var(--cstm-rgb-automation-on-background);
                 --card-primary-color: rgb(var(--cstm-rgb-on-primary-text));
                 --card-secondary-color: rgb(var(--cstm-rgb-on-secondary-text));
              {% endif %}
            }
            ha-card:active {
              transform: scale(0.95);
              transition: 0s;
            }
  thermometer_template:
    card:
      type: custom:stack-in-card
      card_mod:
        style: |
          ha-card:active {
            transform: scale(0.95);
            transition: 0s;
          }
      cards:
        - type: custom:mushroom-template-card
          entity: "[[temperature]]"
          primary: "[[primary]]"
          secondary: >
            {{states('[[temperature]]') | round(1)}}°C/{{ states('[[humidity]]') | round(1) }}%
          icon: "[[icon]]"
          icon_color: "[[color]]"
          tap_action: !include popup/temperature.yaml
          card_mod:
            style: |
              ha-card {
                background-color: transparent;
                box-shadow: none;
                margin-bottom: -30px;
                z-index: 3;
              }
        - type: custom:layout-card
          cards:
            - type: custom:mini-graph-card
              entities:
                - entity: "[[temperature]]"
                  name: Température
                  color: rgb(var(--mush-rgb-white))
                - entity: "[[humidity]]"
                  name: Humidité
                  color: rgb([[color]])
                  y_axis: secondary
              tap_action: !include popup/temperature.yaml
              hours_to_show: 24
              line_width: 8
              animate: true
              show:
                name: false
                icon: false
                state: false
                legend: false
                extrema: false
                fill: fade
                points: false
                labels: false
                labels_secondary: false
              card_mod:
                style: |
                  ha-card {
                    background-color: transparent;
                    box-shadow: none;
                  }
  batterie_template:
    card:
      type: custom:mushroom-template-card
      primary: "[[primary]]"
      secondary: "{{ states(entity) | round() }}%"
      icon: >
        {% set battery_level = (states(entity) | int / 10) | round(0)
        | int * 10 %}

        {% if battery_level > 60 %}
          mdi:battery
        {% elif battery_level > 0 %}
          mdi:battery-{{ battery_level }}
        {% else %}
          mdi:battery-alert-variant-outline
        {% endif %}
      icon_color: >
        {% set battery_level = (states(entity) | int / 10) | round(0)
        | int * 10 %}
        {% if battery_level > 60 %}
          green
        {% elif battery_level > 20 %}
          orange
        {% elif battery_level > 0 %}
          red
        {% else %}
          grey
        {% endif %}
      layout: horizontal
      tap_action:
        action: more-info
      badge_color: blue
      entity: "[[entity]]"
      card_mod:
        style: |
          ha-card:active {
            transform: scale(0.95);
            transition: 0s;
          }
          mushroom-shape-icon {
            --shape-color: rgba(var(--cstm-rgb-on-secondary), 0.05) !important;
          }
views:
  - theme: Adaptive Mushroom
    title: Home
    icon: mdi:home-assistant
    path: home
    visible:
      - user: 0caf2086ed5748ad815a274c7789bae7 #kaoru
      - user: bba8c8327681437a8c1f2d9e7aa20320 #papa
      - user: 024754dd3daf43be88dd4f24177c4d2c #tablet
    type: custom:grid-layout
    layout:
      grid-template-columns: 0em 74px 30% 30% 30% auto
      grid-template-rows: grid-title-row-height auto auto auto
      grid-gap: 0.5em
      grid-template-areas: |
        ". . title badge badge ."
        ". nav favorites lights weather ."
        ". nav favorites plugs weather ."
      mediaquery:
        "(max-width: 600px)":
          grid-template-columns: 3% 94% 3%
          grid-template-rows: auto
          grid-gap: 0em
          grid-template-areas: |
            ". title ."
            ". badge ."
            ". favorites ."
            ". lights ."
            ". plugs ."
            ". weather ."
            "footer footer footer"
    style: |
      @media (max-width: 600px) {
        ::-webkit-scrollbar {
          display: none;
        }
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: " "
          - type: custom:decluttering-card
            template: side-nav
            variables:
              - dashboard-name: lovelace
              - active-view: home
        view_layout:
          grid-area: nav
          show:
            mediaquery: "(min-width: 600px)"
      - type: custom:stack-in-card
        mode: horizontal
        cards:
          - type: custom:decluttering-card
            template: bottom-nav
            variables:
              - dashboard-name: lovelace
              - active-view: home
        card_mod:
          style: |
            ha-card {
              z-index:4;
              position: fixed;
              bottom: 10px;
              left: 18px;
              width: calc(100% - 36px);
            }
            :host {
              border-radius: var(--ha-card-border-radius, -2px) !important;
            }
        view_layout:
          grid-area: footer
          show:
            mediaquery: "(max-width: 600px)"
      - type: custom:mod-card
        view_layout:
          grid-area: title
        card:
          type: custom:mushroom-title-card
          title: |-
            {% set hours = now().strftime('%H') %}
            {% set minutes = now().strftime('%M') %}
            {{ hours }}:{{ minutes }}
          subtitle: >-
            {% if states('sensor.meteo_france_next_rain') != 'unknown' %}

            Précipitations à
            {{as_timestamp(states('sensor.meteo_france_next_rain')) | timestamp_custom("%H:%M") }}

            {% else %}

            {%- set time = now().hour %}
            {%- if time <= 1 -%} Bonne nuit {%if not user == 'tablet'%}{%if not user == 'tablet'%}{{user}}{% endif%}{% endif%} {{'\U0001F611'}}
            {%- elif time <= 3 -%} Bonne nuit {%if not user == 'tablet'%}{{user}}{% endif%} {{'\U0001F62A'}}
            {%- elif time <= 5 -%} Bonne nuit {%if not user == 'tablet'%}{{user}}{% endif%} {{'\U0001F634'}}
            {%- elif time <= 7 -%} Bonjour {%if not user == 'tablet'%}{{user}}{% endif%} {{'\U0001F4A9'}}
            {%- elif time <= 9 -%} Bonjour {%if not user == 'tablet'%}{{user}}{% endif%} {{'\u2615\uFE0F'}}
            {%- elif time <= 10 -%} Bonjour {%if not user == 'tablet'%}{{user}}{% endif%} {{'\U0001F642'}}
            {%- elif time <= 13 -%} Bonne journée {%if not user == 'tablet'%}{{user}}{% endif%} {{'\U0001F60A'}}
            {%- elif time <= 15 -%} Bonne journée {%if not user == 'tablet'%}{{user}}{% endif%} {{'\U0001F60E'}}
            {%- elif time <= 17 -%} Bonne journée {%if not user == 'tablet'%}{{user}}{% endif%} {{'\U0001F44B\U0001F3FB'}}
            {%- elif time <= 19 -%} Bonne soirée {%if not user == 'tablet'%}{{user}}{% endif%} {{'\U0001F44B\U0001F3FB'}}
            {%- elif time <= 22 -%} Bonne soirée {%if not user == 'tablet'%}{{user}}{% endif%} {{'\U0001F60C'}}
            {%- elif time <= 23 -%} Bonne soirée {%if not user == 'tablet'%}{{user}}{% endif%} {{'\U0001F974'}}
            {%- else %} Bonne soirée {%if not user == 'tablet'%}{{user}}{% endif%} {{'\U0001F974'}}
            {%- endif -%}

            {% endif%}
        card_mod:
          style:
            mushroom-title-card$: |
              h1 {
                --title-font-size: 26px;
                --title-font-weight: bold;
                --title-line-height: 1;
              }
              h2 {
                --title-font-size: 16px;
              }
              .header {
                --title-padding: 12px 12px 0px;
              }
      - type: vertical-stack
        cards:
          - type: conditional
            conditions:
              - condition: or
                conditions:
                  - condition: and
                    conditions:
                      - condition: state
                        entity: media_player.spotify
                        state_not: "off"
                      - condition: state
                        entity: media_player.spotify
                        state_not: idle
                      - condition: state
                        entity: media_player.spotify
                        state_not: unavailable
                  - condition: and
                    conditions:
                      - condition: state
                        entity: media_player.samsung_tv_salon
                        state_not: "off"
                      - condition: state
                        entity: media_player.samsung_tv_salon
                        state_not: idle
                      - condition: state
                        entity: media_player.samsung_tv_salon
                        state_not: unavailable
                  - condition: and
                    conditions:
                      - condition: state
                        entity: media_player.samsung_tv_papa
                        state_not: "off"
                      - condition: state
                        entity: media_player.samsung_tv_papa
                        state_not: idle
                      - condition: state
                        entity: media_player.samsung_tv_papa
                        state_not: unavailable
            card:
              type: custom:mushroom-title-card
              title: Media
              title_tap_action:
                action: navigate
                navigation_path: /lovelace/device
          - type: conditional
            conditions:
              - entity: media_player.spotify
                state_not: "off"
              - entity: media_player.spotify
                state_not: idle
              - entity: media_player.spotify
                state_not: unavailable
            card:
              type: custom:stack-in-card
              cards:
                - type: custom:mushroom-media-player-card
                  entity: media_player.spotify
                  icon: mdi:play
                  use_media_info: true
                  use_media_artwork: false
                  show_volume_level: false
                  media_controls:
                    - play_pause_stop
                    - previous
                    - next
                  volume_controls:
                    - volume_buttons
                    - volume_set
                  fill_container: false
                  card_mod:
                    style:
                      mushroom-media-player-media-control$:
                        mushroom-button$: |
                          .button {
                            background-color: rgb(74 74 74 / 70%) !important;
                          }
                          .button:active {
                                transform: scale(0.95);
                                transition: 0s;
                          }
                      mushroom-button$: |
                        .button {
                          background-color: rgb(74 74 74 / 70%) !important;
                        }
                        .button:active {
                              transform: scale(0.95);
                              transition: 0s;
                        }
                      .: |
                        ha-state-icon {
                          color: rgba(30, 215, 96);
                        }
                        mushroom-shape-icon {
                          --rgb-state-media-player: var(--rgb-disabled);
                        }
                - type: conditional
                  conditions:
                    - entity: media_player.spotify
                      state_not: "off"
                    - entity: media_player.spotify
                      state_not: idle
                  card:
                    entity: media_player.spotify
                    hide:
                      icon: true
                      name: true
                      runtime: true
                      source: true
                      power: true
                      state_label: true
                      volume: true
                      info: true
                      progress: false
                      controls: true
                    more_info: false
                    type: custom:mini-media-player
                    toggle_power: false
                    group: true
                    card_mod:
                      style:
                        mmp-progress$: |
                          .mmp-progress[paused] .progress-bar {
                            background-color: #FFFFFF !important;
                          }
                          paper-progress {
                          --paper-progress-container-color: rgba(30, 215, 96, 0.2) !important;
                          }
                          .mmp-progress:before {
                              {% if is_state('media_player.spotify', 'paused') %}
                              background-color: rgb(74 74 74 / 70%) !important;
                              {% else %}
                                background-color: rgba(30, 215, 96, 0.2) !important;
                              {% endif %}
                            }
                        .: |
                          ha-card {
                            margin: -5px 12px 12px;
                            --mmp-progress-height: 42px !important;
                            height: var(--mmp-progress-height);
                            --mmp-accent-color: rgb(30, 215, 96);
                          }
                          ha-card.--group {
                            --mmp-border-radius: var(--mush-control-border-radius) !important;
                          }
              card_mod:
                style:
                  .: |
                    @media (max-width: 600px) {
                      ha-card::before {
                        {% if not is_state('media_player.spotify', 'off') and not is_state('media_player.spotify', 'idle') %}
                        content: '';
                        position: absolute;
                        top: 0;
                        right: 0;
                        width: 200px;
                        height: 100%;
                        background-image: url('{{ state_attr("media_player.spotify", "entity_picture") }}');
                        background-size: cover;
                        background-position: right;
                        background-repeat: no-repeat;
                        -webkit-mask-image: linear-gradient(to right, transparent, black 200px);
                        {% endif %}
                      }
                    }
                    @media (min-width: 600px) and (max-width: 1100px) {
                      ha-card::before {
                        {% if not is_state('media_player.spotify', 'off') and not is_state('media_player.spotify', 'idle') %}
                        content: '';
                        position: absolute;
                        top: 0;
                        right: 0;
                        width: 100%;
                        height: 100%;
                        background-image: url('{{ state_attr("media_player.spotify", "entity_picture") }}');
                        background-size: 300px auto, cover;
                        background-position: right;
                        background-repeat: no-repeat;
                        -webkit-mask-image: linear-gradient(to right, transparent, black 200px);
                        {% endif %}
                      }
                    }
                    @media (min-width: 1100px) {
                      ha-card::before {
                        {% if not is_state('media_player.spotify', 'off') and not is_state('media_player.spotify', 'idle') %}
                        content: '';
                        position: absolute;
                        top: 0;
                        right: 0;
                        width: 250px;
                        height: 100%;
                        background-image: url('{{ state_attr("media_player.spotify", "entity_picture") }}');
                        background-size: cover;
                        background-position: right;
                        background-repeat: no-repeat;
                        -webkit-mask-image: linear-gradient(to right, transparent, black 200px);
                        {% endif %}
                      }
                    }
          - type: conditional
            conditions:
              - entity: media_player.samsung_tv_salon
                state: "on"
            card:
              type: custom:mushroom-media-player-card
              entity: media_player.samsung_tv_salon
              use_media_info: true
              media_controls:
                - on_off
              volume_controls:
                - volume_set
                - volume_mute
                - volume_buttons
              collapsible_controls: false
              show_volume_level: false
              fill_container: false
              tap_action:
                action: more-info
              double_tap_action:
                action: toggle
              card_mod:
                style:
                  mushroom-button$: |
                    .button:active {
                          transform: scale(0.95);
                          transition: 0s;
                    }
                  .: |
                    ha-state-icon:before {
                      content: "";
                      position: absolute;
                      width: 40%;
                      height: 30%;
                      margin: 6%;
                      {% if is_state('media_player.samsung_tv_salon', 'on') %}
                      animation: refresh 300ms linear infinite;
                      {% endif %}
                    }
                    @keyframes refresh {
                      0% { background: linear-gradient(180deg, rgba(var(--mush-rgb-light-blue), 0.4) 0%, transparent 50%, transparent 100%); }
                      25% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 25%, transparent 100%); }
                      50% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 50%, transparent 100%); }
                      75% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 75%, transparent 100%); }
                      100% { background: linear-gradient(180deg, transparent 0%, transparent 50%, rgba(var(--mush-rgb-light-blue), 0.4) 100%); }
                    }
          - type: conditional
            conditions:
              - entity: media_player.samsung_tv_papa
                state: "on"
            card:
              type: custom:mushroom-media-player-card
              entity: media_player.samsung_tv_papa
              use_media_info: true
              media_controls:
                - on_off
              volume_controls:
                - volume_set
                - volume_mute
                - volume_buttons
              collapsible_controls: false
              show_volume_level: false
              fill_container: false
              tap_action:
                action: more-info
              double_tap_action:
                action: toggle
              card_mod:
                style:
                  mushroom-button$: |
                    .button:active {
                          transform: scale(0.95);
                          transition: 0s;
                    }
                  .: |
                    ha-state-icon:before {
                      content: "";
                      position: absolute;
                      width: 40%;
                      height: 30%;
                      margin: 6%;
                      {% if is_state('media_player.samsung_tv_papa', 'on') %}
                      animation: refresh 300ms linear infinite;
                      {% endif %}
                    }
                    @keyframes refresh {
                      0% { background: linear-gradient(180deg, rgba(var(--mush-rgb-light-blue), 0.4) 0%, transparent 50%, transparent 100%); }
                      25% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 25%, transparent 100%); }
                      50% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 50%, transparent 100%); }
                      75% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 75%, transparent 100%); }
                      100% { background: linear-gradient(180deg, transparent 0%, transparent 50%, rgba(var(--mush-rgb-light-blue), 0.4) 100%); }
                    }
          - type: custom:mushroom-title-card
            title: Favoris
          - type: conditional
            conditions:
              - condition: user
                users:
                  - 024754dd3daf43be88dd4f24177c4d2c #tablet
            card:
              type: vertical-stack
              cards:
                - type: conditional
                  conditions:
                    - condition: state
                      entity: sensor.shiro_plex_recently_added
                      state: Online
                  card:
                    type: custom:mushroom-template-card
                    primary: |
                      Ajouté récement sur Plex
                    secondary: >
                      {{ state_attr("sensor.shiro_plex_recently_added","data")[1].title }} - {{
                      state_attr("sensor.shiro_plex_recently_added","data")[1].number }}
                    picture: ""
                    icon_color: amber
                    icon: mdi:plex
                    tap_action: none
                    card_mod:
                      style:
                        mushroom-shape-icon$: |
                          .shape {
                            --shape-color: rgb(68, 58, 16);
                            --icon-color: rgb(255, 191, 0);
                            bottom: 50px;
                          }
                        .: |
                          {% if state_attr("sensor.shiro_plex_recently_added","data")[1].fanart is defined %}
                            ha-card {
                                height: 13em !important;
                                background: linear-gradient(to top, transparent, rgba(0,0,0,0.3) 100%), url({{ state_attr("sensor.shiro_plex_recently_added","data")[1].fanart }});
                                background-size: auto, cover;
                                background-repeat: no-repeat;
                                background-blend-mode: saturation;
                            }
                            ha-card:active {
                              transform: scale(0.95);
                              transition: 0s
                            }
                            mushroom-state-info {
                              position: absolute;
                              bottom: 0px;
                              left: 0;
                              width: 100%;
                              padding: 10px 0 5px 15px;
                              margin-bottom: -1px;
                              box-sizing: border-box;
                              backdrop-filter: blur(8px);
                              background: rgba(115, 115, 115, 0.15);
                              border-bottom-left-radius: 12px;
                              border-bottom-right-radius: 12px;
                              overflow: hidden;
                            }
                          {% endif %}
                  days_to_show: 3
                  show_location: true
                - square: false
                  columns: 2
                  type: grid
                  cards:
                    - type: custom:mushroom-template-card
                      entity: switch.computer_rig_kaoru
                      primary: Kaoru RIG
                      secondary: |-
                        {% if is_state(entity, 'on') %}
                          On
                        {% elif is_state(entity, 'off') %}
                          Off
                        {% else %}
                          Non disponible
                        {% endif %}
                      icon: mdi:monitor-multiple
                      icon_color: |-
                        {% if is_state(entity, 'on') %}
                          var(--cstm-rgb-automation-on-icon)
                        {% else %}
                          disabled
                        {% endif %}
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action: !include popup/computer_rig_kaoru.yaml
                      badge_icon: |-
                        {% if not is_state(entity, ['on', 'off']) %}
                          mdi:help
                        {% endif %}
                      badge_color: orange
                      card_mod:
                        style:
                          mushroom-state-info$: |
                            .primary {
                              white-space: normal !important;
                              overflow: hidden;
                              display: -webkit-box;
                              -webkit-line-clamp: 1;
                              -webkit-box-orient: vertical;
                            }
                          .: |
                            ha-card {
                              {% if is_state(config.entity, 'on') %}
                                background: var(--cstm-rgb-automation-on-background);
                                --card-primary-color: rgb(var(--cstm-rgb-on-primary-text));
                                --card-secondary-color: rgb(var(--cstm-rgb-on-secondary-text));
                              {% endif %}
                            }
                            ha-card:active {
                              transform: scale(0.95);
                              transition: 0s;
                            }
                            ha-state-icon:after {
                              content: "";
                              position: absolute;
                              width: 35%;
                              height: 60%;
                              margin-left: 5px;
                              margin-top: 5px;
                              {% if is_state(config.entity, 'on') %}
                              animation: refresh-screen 300ms linear infinite;
                              {% endif %}
                            }
                            @keyframes refresh-screen {
                              0% { background: linear-gradient(180deg, rgba(var(--rgb-black), 0.2) 0%, transparent 50%, transparent 100%); }
                              25% { background: linear-gradient(180deg, transparent 0%, rgba(var((--rgb-black), 0.2) 25%, transparent 100%); }
                              50% { background: linear-gradient(180deg, transparent 0%, rgba(var((--rgb-black), 0.2) 50%, transparent 100%); }
                              75% { background: linear-gradient(180deg, transparent 0%, rgba(var((--rgb-black), 0.2) 75%, transparent 100%); }
                              100% { background: linear-gradient(180deg, transparent 0%, transparent 50%, rgba(var((--rgb-black), 0.2) 100%); }
                            }
                          mushroom-shape-icon$: |
                            .shape::before {
                              content: "";
                              position: absolute;
                              top: 0px;
                              left: 0px;
                              right: 0px;
                              bottom: 0px;
                              border-radius: 12px;
                              border: 4px solid transparent;
                              {% if is_state('input_boolean.computer_rig_kaoru_load', 'on') %}
                                animation: borderLoading 1s linear reverse infinite;
                              {% endif %}
                            }
                            @keyframes borderLoading {
                              0% {
                                border-top-color: rgba(var(--rgb-light-blue), 1);
                                border-right-color: rgba(var(--rgb-light-blue), 0.75);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.5);
                                border-left-color: rgba(var(--rgb-light-blue), 0.25);
                              }
                              25% {
                                border-top-color: rgba(var(--rgb-light-blue), 0.75);
                                border-right-color: rgba(var(--rgb-light-blue), 0.5);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.25);
                                border-left-color: rgba(var(--rgb-light-blue), 1);
                              }
                              50% {
                                border-top-color: rgba(var(--rgb-light-blue), 0.5);
                                border-right-color: rgba(var(--rgb-light-blue), 0.25);
                                border-bottom-color: rgba(var(--rgb-light-blue), 1);
                                border-left-color: rgba(var(--rgb-light-blue), 0.75);
                              }
                              75% {
                                border-top-color: rgba(var(--rgb-light-blue), 0.25);
                                border-right-color: rgba(var(--rgb-light-blue), 1);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.75);
                                border-left-color: rgba(var(--rgb-light-blue), 0.5);
                              }
                              100% {
                                border-top-color: rgba(var(--rgb-light-blue), 1);
                                border-right-color: rgba(var(--rgb-light-blue), 0.75);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.5);
                                border-left-color: rgba(var(--rgb-light-blue), 0.25);
                              }
                            }
                    - type: custom:mushroom-template-card
                      entity: switch.computer_papa
                      primary: Papa PC
                      secondary: |-
                        {% if is_state(entity, 'on') %}
                          On
                        {% elif is_state(entity, 'off') %}
                          Off
                        {% else %}
                          Non disponible
                        {% endif %}
                      icon: mdi:desktop-tower
                      icon_color: |-
                        {% if is_state(entity, 'on') %}
                          var(--cstm-rgb-automation-on-icon)
                        {% else %}
                          disabled
                        {% endif %}
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action: !include popup/computer_papa.yaml
                      badge_icon: |-
                        {% if not is_state(entity, ['on', 'off']) %}
                          mdi:help
                        {% endif %}
                      badge_color: orange
                      card_mod:
                        style:
                          mushroom-state-info$: |
                            .primary {
                              white-space: normal !important;
                              overflow: hidden;
                              display: -webkit-box;
                              -webkit-line-clamp: 1;
                              -webkit-box-orient: vertical;
                            }
                          .: |
                            ha-card {
                              {% if is_state(config.entity, 'on') %}
                                background: var(--cstm-rgb-automation-on-background);
                                --card-primary-color: rgb(var(--cstm-rgb-on-primary-text));
                                --card-secondary-color: rgb(var(--cstm-rgb-on-secondary-text));
                              {% endif %}
                            }
                            ha-card:active {
                              transform: scale(0.95);
                              transition: 0s;
                            }
                            ha-state-icon:before {
                              content: "";
                              position: absolute;
                              width: 4px;
                              height: 4px;
                              margin-left: 10px;
                              margin-top: 14px;
                              #border-radius: 10px;
                              {% if is_state(config.entity, 'on') %}
                              animation: blink-before 300ms linear infinite;
                              {% endif %}
                            }
                            ha-state-icon:after {
                              content: "";
                              position: absolute;
                              width: 8px;
                              height: 8px;
                              margin-left: 9px;
                              margin-top: 13px;
                              border-radius: 15px;
                              {% if is_state(config.entity, 'on') %}
                              animation: blink-after 300ms linear infinite;
                              {% endif %}
                            }
                            @keyframes blink-after {
                              0% { background: radial-gradient(closest-side, rgba(var(--rgb-light-blue), 0.5), rgba(var(--rgb-light-blue), 0.1)); }
                              25% { background: radial-gradient(closest-side,rgba(var(--rgb-light-blue), 1), rgba(var(--rgb-light-blue), 0.1)); }
                              50% { background: radial-gradient(closest-side, rgba(var(--rgb-light-blue), 0.5), rgba(var(--rgb-light-blue), 0.1)); }
                              75% { background: radial-gradient(closest-side, rgba(var(--rgb-light-blue), 0.1), rgba(var(--rgb-light-blue), 0.1)); }
                              100% { background: radial-gradient(closest-side, rgba(var(--rgb-light-blue), 0.5), rgba(var(--rgb-light-blue), 0.1)); }
                            }
                            @keyframes blink-before {
                              0% { background: rgba(var(--rgb-light-blue), 0.5); }
                              25% { background: rgba(var(--rgb-light-blue), 1); }
                              50% { background: rgba(var(--rgb-light-blue), 0.5); }
                              75% { background: rgba(var(--rgb-light-blue), 0.1); }
                              100% { background: rgba(var(--rgb-light-blue), 0.5); }
                            }
                          mushroom-shape-icon$: |
                            .shape::before {
                              content: "";
                              position: absolute;
                              top: 0px;
                              left: 0px;
                              right: 0px;
                              bottom: 0px;
                              border-radius: 12px;
                              border: 4px solid transparent;
                              {% if is_state('input_boolean.computer_papa_load', 'on') %}
                                animation: borderLoading 1s linear reverse infinite;
                              {% endif %}
                            }
                            @keyframes borderLoading {
                              0% {
                                border-top-color: rgba(var(--rgb-light-blue), 1);
                                border-right-color: rgba(var(--rgb-light-blue), 0.75);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.5);
                                border-left-color: rgba(var(--rgb-light-blue), 0.25);
                              }
                              25% {
                                border-top-color: rgba(var(--rgb-light-blue), 0.75);
                                border-right-color: rgba(var(--rgb-light-blue), 0.5);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.25);
                                border-left-color: rgba(var(--rgb-light-blue), 1);
                              }
                              50% {
                                border-top-color: rgba(var(--rgb-light-blue), 0.5);
                                border-right-color: rgba(var(--rgb-light-blue), 0.25);
                                border-bottom-color: rgba(var(--rgb-light-blue), 1);
                                border-left-color: rgba(var(--rgb-light-blue), 0.75);
                              }
                              75% {
                                border-top-color: rgba(var(--rgb-light-blue), 0.25);
                                border-right-color: rgba(var(--rgb-light-blue), 1);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.75);
                                border-left-color: rgba(var(--rgb-light-blue), 0.5);
                              }
                              100% {
                                border-top-color: rgba(var(--rgb-light-blue), 1);
                                border-right-color: rgba(var(--rgb-light-blue), 0.75);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.5);
                                border-left-color: rgba(var(--rgb-light-blue), 0.25);
                              }
                            }
          - type: conditional
            conditions:
              - condition: user
                users:
                  - 0caf2086ed5748ad815a274c7789bae7
            card:
              type: vertical-stack
              cards:
                - type: horizontal-stack
                  cards:
                    - type: vertical-stack
                      cards:
                        - type: custom:mushroom-template-card
                          entity: sensor.oneplus12_battery_level
                          primary: OnePlus 12
                          secondary: "{{ states(entity) }}%"
                          icon: >
                            {% set battery_level = (states(entity) | int / 10) | round(0) | int * 10 %}
                            {% if battery_level == 100 %}
                              mdi:battery
                            {% elif battery_level > 0 %}
                              mdi:battery-{{ battery_level }}
                            {% else %}
                              mdi:battery-alert-variant-outline
                            {% endif %}
                          icon_color: >
                            {% set battery_level = (states(entity) | int / 10) | round(0)
                            | int * 10 %}
                            {% if battery_level > 60 %}
                              green
                            {% elif battery_level > 20 %}
                              orange
                            {% elif battery_level > 0 %}
                              red
                            {% else %}
                              grey
                            {% endif %}
                          layout: horizontal
                          tap_action:
                            action: more-info
                          badge_color: blue
                          badge_icon: >-
                            {% if is_state('binary_sensor.oneplus12_is_charging','on') %}
                              mdi:lightning-bolt
                            {% endif %}
                          card_mod:
                            style: |
                              ha-card:active {
                                transform: scale(0.95);
                                transition: 0s
                              }
                              mushroom-shape-icon {
                                  {% set battery_level = (states('sensor.oneplus12_battery_level') | int / 10) | round(0) | int * 10 %}
                                  --shape-color: rgba(var(--cstm-rgb-on-secondary), 0.05) !important;
                                  {% if is_state('binary_sensor.oneplus12_is_charging','on') and not battery_level == 100 %}
                                      animation: charging-animation 4s infinite;
                                  {% endif %}
                                }
                              @keyframes charging-animation {
                                0% { --card-mod-icon: mdi:battery-outline; }
                                10% { --card-mod-icon: mdi:battery-10; }
                                20% { --card-mod-icon: mdi:battery-20; }
                                30% { --card-mod-icon: mdi:battery-30; }
                                40% { --card-mod-icon: mdi:battery-40; }
                                50% { --card-mod-icon: mdi:battery-50; }
                                60% { --card-mod-icon: mdi:battery-60; }
                                70% { --card-mod-icon: mdi:battery-70; }
                                80% { --card-mod-icon: mdi:battery-80; }
                                90% { --card-mod-icon: mdi:battery-90; }
                                100% { --card-mod-icon: mdi:battery; }
                              }
                - type: conditional
                  conditions:
                    - condition: state
                      entity: sensor.shiro_plex_recently_added
                      state: Online
                  card:
                    type: custom:mushroom-template-card
                    primary: |
                      Ajouté récement sur Plex
                    secondary: >
                      {{ state_attr("sensor.shiro_plex_recently_added","data")[1].title }} - {{
                      state_attr("sensor.shiro_plex_recently_added","data")[1].number }}
                    picture: ""
                    icon_color: amber
                    icon: mdi:plex
                    tap_action: none
                    card_mod:
                      style:
                        mushroom-shape-icon$: |
                          .shape {
                            --shape-color: rgb(68, 58, 16);
                            --icon-color: rgb(255, 191, 0);
                            bottom: 50px;
                          }
                        mushroom-state-info$: |
                          .container {
                            --card-primary-color: white;
                            #--card-secondary-color: orange;
                          }
                        .: |
                          {% if state_attr("sensor.shiro_plex_recently_added","data")[1].fanart is defined %}
                            ha-card {
                                height: 13em !important;
                                background: linear-gradient(to top, transparent, rgba(0,0,0,0.3) 100%), url({{ state_attr("sensor.shiro_plex_recently_added","data")[1].fanart }});
                                background-size: auto, cover;
                                background-repeat: no-repeat;
                                background-blend-mode: saturation;
                            }
                            ha-card:active {
                              transform: scale(0.95);
                              transition: 0s
                            }
                            mushroom-state-info {
                              position: absolute;
                              bottom: 0px;
                              left: 0;
                              width: 100%;
                              padding: 10px 0 5px 15px;
                              margin-bottom: -1px;
                              box-sizing: border-box;
                              backdrop-filter: blur(15px);
                              background: rgba(115, 115, 115, 0.15);
                              border-bottom-left-radius: 12px;
                              border-bottom-right-radius: 12px;
                              overflow: hidden;
                            }
                          {% endif %}
                - type: custom:calendar-card-pro
                  entities:
                    - calendar.les_amoureux
                    - calendar.anniversaires
                    - calendar.main
                  card_mod:
                    style: |
                      ha-card:active {
                        transform: scale(0.95);
                        transition: 0s;
                      }
                - square: false
                  columns: 2
                  type: grid
                  cards:
                    - type: custom:decluttering-card
                      template: thermometer_template
                      variables:
                        - primary: William
                        - temperature: sensor.temperature_chambre_william
                        - humidity: sensor.humidity_chambre_william
                        - battery: sensor.battery_thermometre_chambre_william
                        - color: var(--mush-rgb-purple)
                        - icon: mdi:bed
                    - type: custom:mushroom-template-card
                      entity: switch.computer_rig_kaoru
                      primary: Kaoru RIG
                      secondary: |-
                        {% if is_state(entity, 'on') %}
                          On
                        {% elif is_state(entity, 'off') %}
                          Off
                        {% else %}
                          Non disponible
                        {% endif %}
                      icon: mdi:monitor-multiple
                      icon_color: |-
                        {% if is_state(entity, 'on') %}
                          var(--cstm-rgb-automation-on-icon)
                        {% else %}
                          disabled
                        {% endif %}
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action: !include popup/computer_rig_kaoru.yaml
                      badge_icon: |-
                        {% if not is_state(entity, ['on', 'off']) %}
                          mdi:help
                        {% endif %}
                      badge_color: orange
                      card_mod:
                        style:
                          mushroom-state-info$: |
                            .primary {
                              white-space: normal !important;
                              overflow: hidden;
                              display: -webkit-box;
                              -webkit-line-clamp: 1;
                              -webkit-box-orient: vertical;
                            }
                          .: |
                            ha-card {
                              {% if is_state(config.entity, 'on') %}
                                background: var(--cstm-rgb-automation-on-background);
                                --card-primary-color: rgb(var(--cstm-rgb-on-primary-text));
                                --card-secondary-color: rgb(var(--cstm-rgb-on-secondary-text));
                              {% endif %}
                            }
                            ha-card:active {
                              transform: scale(0.95);
                              transition: 0s;
                            }
                            ha-state-icon:after {
                              content: "";
                              position: absolute;
                              width: 35%;
                              height: 60%;
                              margin-left: 5px;
                              margin-top: 5px;
                              {% if is_state(config.entity, 'on') %}
                              animation: refresh-screen 300ms linear infinite;
                              {% endif %}
                            }
                            @keyframes refresh-screen {
                              0% { background: linear-gradient(180deg, rgba(var(--rgb-black), 0.2) 0%, transparent 50%, transparent 100%); }
                              25% { background: linear-gradient(180deg, transparent 0%, rgba(var((--rgb-black), 0.2) 25%, transparent 100%); }
                              50% { background: linear-gradient(180deg, transparent 0%, rgba(var((--rgb-black), 0.2) 50%, transparent 100%); }
                              75% { background: linear-gradient(180deg, transparent 0%, rgba(var((--rgb-black), 0.2) 75%, transparent 100%); }
                              100% { background: linear-gradient(180deg, transparent 0%, transparent 50%, rgba(var((--rgb-black), 0.2) 100%); }
                            }
                          mushroom-shape-icon$: |
                            .shape::before {
                              content: "";
                              position: absolute;
                              top: 0px;
                              left: 0px;
                              right: 0px;
                              bottom: 0px;
                              border-radius: 12px;
                              border: 4px solid transparent;
                              {% if is_state('input_boolean.computer_rig_kaoru_load', 'on') %}
                                animation: borderLoading 1s linear reverse infinite;
                              {% endif %}
                            }
                            @keyframes borderLoading {
                              0% {
                                border-top-color: rgba(var(--rgb-light-blue), 1);
                                border-right-color: rgba(var(--rgb-light-blue), 0.75);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.5);
                                border-left-color: rgba(var(--rgb-light-blue), 0.25);
                              }
                              25% {
                                border-top-color: rgba(var(--rgb-light-blue), 0.75);
                                border-right-color: rgba(var(--rgb-light-blue), 0.5);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.25);
                                border-left-color: rgba(var(--rgb-light-blue), 1);
                              }
                              50% {
                                border-top-color: rgba(var(--rgb-light-blue), 0.5);
                                border-right-color: rgba(var(--rgb-light-blue), 0.25);
                                border-bottom-color: rgba(var(--rgb-light-blue), 1);
                                border-left-color: rgba(var(--rgb-light-blue), 0.75);
                              }
                              75% {
                                border-top-color: rgba(var(--rgb-light-blue), 0.25);
                                border-right-color: rgba(var(--rgb-light-blue), 1);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.75);
                                border-left-color: rgba(var(--rgb-light-blue), 0.5);
                              }
                              100% {
                                border-top-color: rgba(var(--rgb-light-blue), 1);
                                border-right-color: rgba(var(--rgb-light-blue), 0.75);
                                border-bottom-color: rgba(var(--rgb-light-blue), 0.5);
                                border-left-color: rgba(var(--rgb-light-blue), 0.25);
                              }
                            }
                    - type: custom:decluttering-card
                      template: automation_template
                      variables:
                        - entity: automation.turn_off_gps_william_absence
                        - primary: GPS William Absence
          - type: conditional
            conditions:
              - condition: user
                users:
                  - bba8c8327681437a8c1f2d9e7aa20320
            card:
              type: vertical-stack
              cards:
                - type: horizontal-stack
                  cards:
                    - type: vertical-stack
                      cards:
                        - type: custom:mushroom-template-card
                          entity: sensor.samsung_s24_battery_level
                          primary: Samsung s24
                          secondary: "{{ states(entity) }}%"
                          icon: >
                            {% set battery_level = (states(entity) | int / 10) |
                            round(0) | int * 10 %}

                            {% if battery_level == 100 %}
                              mdi:battery
                            {% elif battery_level > 0 %}
                              mdi:battery-{{ battery_level }}
                            {% else %}
                              mdi:battery-alert-variant-outline
                            {% endif %}
                          icon_color: >
                            {% set battery_level = (states(entity) | int / 10) | round(0)
                            | int * 10 %}
                            {% if battery_level > 60 %}
                              green
                            {% elif battery_level > 20 %}
                              orange
                            {% elif battery_level > 0 %}
                              red
                            {% else %}
                              grey
                            {% endif %}
                          layout: horizontal
                          tap_action:
                            action: more-info
                          badge_color: blue
                          badge_icon: >-
                            {% if is_state('binary_sensor.samsung_s10e_is_charging','on') %}
                              mdi:lightning-bolt
                            {% endif %}
                          card_mod:
                            style: |
                              ha-card:active {
                                transform: scale(0.95);
                                transition: 0s
                              }
                              mushroom-shape-icon {
                                {% set battery_level = (states('sensor.oneplus12_battery_level') | int / 10) | round(0) | int * 10 %}
                                --shape-color: rgba(var(--cstm-rgb-on-secondary), 0.05) !important;
                                {% if is_state('binary_sensor.samsung_s10e_is_charging','on') and not battery_level == 100 %}
                                    animation: charging-animation 4s infinite;
                                {% endif %}
                                }
                                @keyframes charging-animation {
                                  0% { --card-mod-icon: mdi:battery-outline; }
                                  10% { --card-mod-icon: mdi:battery-10; }
                                  20% { --card-mod-icon: mdi:battery-20; }
                                  30% { --card-mod-icon: mdi:battery-30; }
                                  40% { --card-mod-icon: mdi:battery-40; }
                                  50% { --card-mod-icon: mdi:battery-50; }
                                  60% { --card-mod-icon: mdi:battery-60; }
                                  70% { --card-mod-icon: mdi:battery-70; }
                                  80% { --card-mod-icon: mdi:battery-80; }
                                  90% { --card-mod-icon: mdi:battery-90; }
                                  100% { --card-mod-icon: mdi:battery; }
                                }
        view_layout:
          grid-area: favorites
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Lumières
          - type: custom:mod-card
            card_mod:
              style:
                swipe-card$: |
                  @media (min-width: 1200px) and (max-width: 1300px) {
                    .swiper-wrapper {
                      padding-bottom: 10% !important;
                    }
                  } 
                  @media (min-width: 0px) {
                    .swiper-wrapper {
                      padding-bottom: 50px !important;
                    }
                    div > div.swiper-pagination.swiper-pagination-bullets {
                      bottom: 14px;
                    }
                  } 
                  div > div.swiper-pagination.swiper-pagination-bullets >
                  span.swiper-pagination-bullet.swiper-pagination-bullet-active {
                    background: white;
                  }
                  div > div.swiper-pagination.swiper-pagination-bullets > span {
                    background: white;
                  }
                  div {
                    margin-bottom: -20px;
                  }
            card:
              type: custom:swipe-card
              parameters:
                spaceBetween: 8
                pagination:
                  type: bullets
                  color: white
              cards:
                - square: false
                  columns: 2
                  type: grid
                  cards:
                    - type: custom:mushroom-light-card
                      entity: light.plafond
                      use_light_color: true
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      name: Plafond
                      icon: mdi:lightbulb-variant
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                    - type: custom:mushroom-light-card
                      entity: light.chambre
                      use_light_color: true
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Chambre
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:desk
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                    - type: custom:mushroom-light-card
                      entity: light.bureau
                      icon_type: icon
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Bureau
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:bed
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                    - type: custom:mushroom-light-card
                      entity: light.switch_wall_cuisine
                      icon_type: icon
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Cuisine
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:microwave
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                    - type: custom:mushroom-light-card
                      entity: light.switch_wall_chambre_papa
                      icon_type: icon
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Papa
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:bed-king
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                    - type: custom:mushroom-light-card
                      entity: light.switch_wall_toilette
                      icon_type: icon
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Toilette
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:toilet
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                - square: false
                  columns: 2
                  type: grid
                  cards:
                    - type: custom:mushroom-light-card
                      entity: light.switch_wall_salle_de_bain
                      icon_type: icon
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Salle de bain
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:bathtub-outline
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
          - type: custom:mushroom-title-card
            title: Energie
            subtitle: ""
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.lixee_zlinky_tic_apparent_power
                icon: mdi:lightning-bolt
                primary: >-
                  Actuellement : {{states(entity)}} W
                secondary: >-
                  Aujourd'hui: {{states("sensor.daily_energy") | round(2)}} kWh / {{(states("sensor.daily_energy") | float * 0.2276)  | round(2)}} €
                tap_action:
                  action: more-info
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                icon_color: orange
                primary_info: state
                secondary_info: name
              - type: custom:apexcharts-card
                graph_span: 24h
                span:
                  start: day
                now:
                  show: true
                  label: Now
                series:
                  - entity: sensor.lixee_zlinky_tic_summation_delivered
                    type: column
                    float_precision: 2
                    statistics:
                      type: change
                apex_config:
                  chart:
                    height: 164px
                    fontFamily: SF Pro, Roboto, system-ui
                yaxis:
                  - decimals: 2
                    min: ~0
                    apex_config:
                      tickAmount: 4
                      labels:
                        formatter: |
                          EVAL:function(value, index) {
                            return value.toFixed(2);
                          }
                card_mod:
                  style: |
                    ha-card {
                      margin: -16px 0px 0px 0px;
                    }
            card_mod:
              style: |
                ha-card:active {
                  transform: scale(0.95);
                  transition: 0s;
                }
        view_layout:
          grid-area: lights
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Météo
          - type: custom:stack-in-card
            cards:
              - type: custom:decluttering-card
                template: weather_now_template
                variables:
                  - secondary: >-
                      {{states('sensor.openweathermap_temperature') | round(1)}}
                      °C
            card_mod:
              style: |
                ha-card {
                  height: 13em !important;
                  background: linear-gradient(to top, transparent, rgba(var(--frog-rgb-{{states('sensor.weather_frog_status')}})) 10%), url({{states('sensor.weather_frog_image_wide')}});
                  background-size: cover, 200% auto;
                  background-position: bottom left {% if is_state("sensor.weather_frog_location", "field") %}20%{% elif is_state("sensor.weather_frog_location", "hills") %}40%{% else %}10%{% endif %};
                  background-repeat: no-repeat;
                  background-blend-mode: saturation;
                }
                ha-card:active {
                  transform: scale(0.95);
                  transition: 0s;
                }
          - type: custom:stack-in-card
            mode: horizontal
            cards:
              - type: custom:decluttering-card
                template: weather_day_template
                variables:
                  - index: 0
              - type: custom:decluttering-card
                template: weather_day_template
                variables:
                  - index: 1
              - type: custom:decluttering-card
                template: weather_day_template
                variables:
                  - index: 2
              - type: custom:decluttering-card
                template: weather_day_template
                variables:
                  - index: 3
              - type: custom:decluttering-card
                template: weather_day_template
                variables:
                  - index: 4
            card_mod:
              style: |
                ha-card:active {
                  transform: scale(0.95);
                  transition: 0s;
                }
          - type: custom:mushroom-title-card
            title: News
            title_tap_action:
              action: navigate
              navigation_path: /lovelace/news
          - type: custom:stack-in-card
            cards:
              - type: custom:layout-card
                layout_type: grid
                cards:
                  - type: custom:mushroom-template-card
                    primary: ETF S&P 500
                    secondary: '{{state_attr(entity, "friendly_name")}}'
                    icon: '{{ state_attr(entity, "icon")}}'
                    icon_color: grey
                    tap_action:
                      action: more-info
                    entity: sensor.yahoofinance_sxr8_de
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none;
                          margin: -4px -7px;
                          background: none;
                        }
                  - type: custom:mushroom-template-card
                    primary: "{{states(entity)}}"
                    secondary: |
                      {% if state_attr(entity, 'trending') == "up" %}+{% endif
                      %}{{state_attr(entity,'regularMarketChangePercent')}}%
                    icon_color: ""
                    icon: ""
                    entity: sensor.yahoofinance_sxr8_de
                    tap_action:
                      action: more-info
                    card_mod:
                      style:
                        mushroom-state-info$: |
                          * {
                            text-align: end;
                            font-family: 'SF Pro Rounded', system-ui;
                          }
                        .: |
                          ha-card {
                            --card-secondary-color: {% if state_attr(config.entity, 'trending') == "up" %}rgba(var(--rgb-green)){% else %}rgba(var(--rgb-red)){% endif %};
                            margin: -3px 2px -6px 0px;
                            box-shadow: none;
                            background: none;
                          }
                layout:
                  grid-template-columns: 70% 30%
                  grid-gap: 0px;
            card_mod:
              style: |
                ha-card:active {
                  transform: scale(0.95);
                  transition: 0s;
                }
          - type: custom:mushroom-title-card
            title: Autres
            title_tap_action:
          - type: custom:mod-card
            card:
              square: false
              columns: 2
              type: grid
              cards:
                - type: custom:mushroom-template-card
                  entity: script.home_leave
                  primary: Partir
                  icon: mdi:hand-wave
                  icon_color: |-
                    {% if is_state(entity, 'on') %}
                      var(--cstm-rgb-automation-on-icon)
                    {% else %}
                      disabled
                    {% endif %}
                  tap_action:
                    action: call-service
                    service: script.toggle
                    data: {}
                    target:
                      entity_id: script.home_leave
                  double_tap_action:
                    action: more-info
                  badge_icon: |-
                    {% if not is_state(entity, ['on', 'off']) %}
                      mdi:help
                    {% endif %}
                  badge_color: orange
                  card_mod:
                    style:
                      .: |
                        ha-card {
                          {% if is_state(config.entity, 'on') %}
                            background: var(--cstm-rgb-automation-on-background);
                            --card-primary-color: rgb(var(--cstm-rgb-on-primary-text));
                            --card-secondary-color: rgb(var(--cstm-rgb-on-secondary-text));
                          {% endif %}
                        }
                        ha-card:active {
                          transform: scale(0.95);
                          transition: 0s;
                        }
                        ha-state-icon  {
                          {% if is_state(config.entity, 'on') %}
                            animation: wave-hand 0.8s ease-in-out infinite;
                          {% endif %}
                        }
                        @keyframes wave-hand {
                        0% { transform: translateX(0) }
                          25% { transform: translateY(-2px) }
                          35% { transform: translateY(2px) rotate(17deg) }
                          55% { transform: translateY(-2px) rotate(-17deg) }
                          65% { transform: translateY(-1px) rotate(17deg) }
                          75% { transform: translateY(-1px) rotate(-17deg) }
                          100% { transform: translateY(0) rotate(0) }
                        }
                - type: custom:mushroom-template-card
                  primary: QR Wifi
                  icon: mdi:qrcode
                  tap_action: !include popup/qr_wifi.yaml
                  double_tap_action: !include popup/qr_wifi.yaml
                  card_mod:
                    style: |
                      ha-card:active {
                        transform: scale(0.95);
                        transition: 0s;
                      }
            card_mod:
              style: |
                @media (max-width: 600px) {
                  ha-card {
                    margin-bottom: 80px; /* add margin before footer */
                  }
                }
        view_layout:
          grid-area: weather
      - square: false
        columns: 1
        type: grid
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    entity: sensor.average_temperature
                    icon: mdi:home
                    icon_color: |
                      {% if states("sensor.average_temperature") | round(1) < 18 %}
                        orange
                      {% elif states("sensor.average_temperature") | round(1) < 28 %}
                        green
                      {% else %}
                        red
                      {% endif %}
                    content: >-
                      {{states("sensor.average_temperature") | round(1)}}º
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          float: left;
                          margin: 5px;
                          {% if states("sensor.average_temperature") | round(1) < 18 %}
                            --chip-background: rgba(var(--mush-rgb-blue), 0.2);
                          {% elif states("sensor.average_temperature") | round(1) < 28 %}
                            --chip-background: rgba(var(--mush-rgb-green), 0.2);
                          {% else %}
                            --chip-background: rgba(var(--mush-rgb-red), 0.2);
                          {% endif %}
                        }
                        ha-card:active {
                          transform: scale(0.95);
                          transition: 0s
                        }
                  - type: template
                    entity: sensor.next_timer_cuisine_remaining
                    icon: mdi:google-assistant
                    icon_color: white
                    content: >-
                      {{states("sensor.next_timer_cuisine_remaining")}}
                    tap_action: none
                    card_mod:
                      style: |
                        ha-card {
                          float: left;
                          margin: 5px;
                          {% if is_state('timer.timer_cuisine', 'active') %}
                          animation: ping 1.2s ease-in-out infinite;
                          {% endif %}
                        }
                        ha-card:active {
                          transform: scale(0.95);
                          transition: 0s;
                        }
                        @keyframes ping {
                            30% {background: white; --text-color: rgba(var(--rgb-card-background-color));}
                            100% {background: rgba(var(--rgb-card-background-color)); --text-color: white;}
                            30% {background: white; --text-color: rgba(var(--rgb-card-background-color));}
                        }
                  - type: template
                    entity: sensor.total_lights_on
                    content: "{{ states(entity) }}"
                    tap_action: none
                    icon: >
                      {% if states("sensor.total_lights_on") | int > 0 %}
                        mdi:lightbulb
                      {% else %}
                        mdi:lightbulb-off
                      {% endif %}
                    icon_color: >
                      {% if states("sensor.total_lights_on") | int > 0 %}
                        amber
                      {% else %}
                        disabled
                      {% endif %}
                    name: Lights On
                    card_mod:
                      style: |
                        ha-card {
                          float: left;
                          margin: 5px;
                          {% if states("sensor.total_lights_on") | int > 0 %}
                            --chip-background: rgba(var(--mush-rgb-yellow), 0.3);
                          {% endif %}
                        }
                        ha-card:active {
                          transform: scale(0.95);
                          transition: 0s
                        }
                  - type: template
                    entity: sensor.total_open_windows
                    content: "{{ states(entity) }}"
                    tap_action: !include popup/window.yaml
                    icon: >
                        {% if states(entity) | int > 0 %}
                          mdi:window-open-variant
                        {% else %}
                          mdi:window-closed-variant
                        {% endif %}
                    icon_color: >
                      {% if states(entity) | int > 0 %}
                        rgb(var(--mush-rgb-grey))
                      {% else %}
                        disabled
                      {% endif %}                    
                    name: Open windows
                    card_mod:
                      style: |
                        ha-card {
                          float: left;
                          margin: 5px;
                          {% if states("sensor.total_open_windows") | int > 0 %}
                            --chip-background: rgba(var(--mush-rgb-white), 0.3);
                          {% endif %}
                        }
                        ha-card:active {
                          transform: scale(0.95);
                          transition: 0s
                        }
                  - type: alarm-control-panel
                    entity: alarm_control_panel.home_alarm
                    content_info: state
                    card_mod:
                      style: |
                        ha-card {
                          float: left;
                          margin: 5px;
                          {% if states("alarm_control_panel.home_alarm") == "arming" %}
                          --chip-background: rgba(var(--rgb-orange), 0.1);
                          animation: ping-arming 1.0s ease-in-out infinite;
                          {% elif states("alarm_control_panel.home_alarm") == "armed_away" %}
                          --chip-background: rgba(var(--rgb-red), 0.1);
                          animation: ping-armed-away 5.0s ease-in-out infinite;          
                          {% elif states("alarm_control_panel.home_alarm") == "armed_home" %}
                          --chip-background: rgba(var(--rgb-red), 0.2);
                          animation: ping-armed-away 5.0s ease-in-out infinite;
                          {% elif states("alarm_control_panel.home_alarm") == "pending" %}
                          --chip-background: rgba(var(--rgb-red), 0.2);
                          animation: ping-pending 1.0s ease-in-out infinite;
                          {% elif states("alarm_control_panel.home_alarm") == "triggered" %}
                          --chip-background: rgba(var(--rgb-red), 0.2);
                          animation: ping-triggered 0.4s ease-in-out infinite;
                          {% else %}
                          --chip-background: rgba(var(--rgb-blue), 0.2);
                          {% endif %}
                        }
                        ha-card:active {
                          transform: scale(0.95);
                          transition: 0s
                        }
                        @keyframes ping-arming {
                          100% {background: rgba(var(--rgb-orange), 0.2);}
                          70% {background: rgba(var(--rgb-orange), 0.4);}
                        }
                        @keyframes ping-armed-away {
                          100% {background: rgba(var(--rgb-red), 0.2);}
                          70% {background: rgba(var(--rgb-red), 0.4);}
                        }
                        @keyframes ping-armed-home {
                          100% {background: rgba(var(--rgb-red), 0.2);}
                          70% {background: rgba(var(--rgb-red), 0.4);}
                        }
                        @keyframes ping-pending {
                          100% {background: rgba(var(--rgb-red), 0.2);}
                          70% {background: rgba(var(--rgb-yelllow), 0.4);}
                        }
                        @keyframes ping-triggered {
                          100% {background: rgba(var(--rgb-red), 0.2)}
                          70% {background: rgba(var(--rgb-red), 0.4);}
                        }
                  - type: entity
                    entity: person.kaoru
                    content_info: kaoru
                    use_entity_picture: true
                    tap_action: !include popup/person_william.yaml
                    card_mod:
                      style:
                        .: |
                          ha-card {
                            margin: 5px;
                            {% if is_state('person.kaoru', 'home') %}
                              --chip-background: rgba(var(--rgb-state-person-home), 0.2);
                              animation: ping 5.0s ease-in-out infinite;
                            {% elif is_state('person.kaoru', 'not_home') %}
                              --chip-background: rgba(var(--rgb-state-person-not-home), 0.4);
                            {% elif is_state('person.kaoru', 'unknown') %}
                              --chip-background: rgba(var(--rgb-state-person-unknown), 0.4);
                            {% else %}
                              --chip-background: rgba(var(--rgb-state-person-zone), 0.4);
                            {% endif %}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s
                          }
                          @keyframes ping {
                              100% {background: rgba(var(--rgb-state-person-home), 0.2);}
                              50% {background: rgba(var(--rgb-state-person-home), 0.8);}
                              100% {background: rgba(var(--rgb-state-person-home), 0.2);}
                          }
                  - type: entity
                    entity: person.papa
                    content_info: papa
                    use_entity_picture: true
                    tap_action: !include popup/person_papa.yaml
                    card_mod:
                      style:
                        .: |
                          ha-card {
                            margin: 5px;
                            {% if is_state('person.papa', 'home') %}
                              --chip-background: rgba(var(--rgb-state-person-home), 0.2);
                              animation: ping 5.0s ease-in-out infinite;
                            {% elif is_state('person.papa', 'not_home') %}
                              --chip-background: rgba(var(--rgb-state-person-not-home), 0.4);
                            {% elif is_state('person.papa', 'unknown') %}
                              --chip-background: rgba(var(--rgb-state-person-unknown), 0.4);
                            {% else %}
                              --chip-background: rgba(var(--rgb-state-person-zone), 0.4);
                            {% endif %}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s
                          }
                          @keyframes ping {
                              100% {background: rgba(var(--rgb-state-person-home), 0.2);}
                              50% {background: rgba(var(--rgb-state-person-home), 0.8);}
                              100% {background: rgba(var(--rgb-state-person-home), 0.2);}
                          }
                alignment: start
                card_mod:
                  style:
                    .: |
                      ha-card {
                        margin: 5px;
                        overflow: hidden; /* Clear float */
                      }
                      .chip-container {
                        display: block !important;
                        position: relative;
                      }
                      .type-custom-mushroom-chips-card .chip-container > mushroom-entity-chip:nth-child(6) {
                        {% if is_state('person.kaoru', 'home') %}
                          float: left;
                        {% elif is_state('person.kaoru', 'not_home') or is_state('person.kaoru', 'unknown') %}
                          float: right;
                        {% else %}
                          float: right;
                        {% endif %}
                        }
                      .type-custom-mushroom-chips-card .chip-container > mushroom-entity-chip:nth-child(7) {
                        {% if is_state('person.papa', 'home') %}
                          float: left;
                        {% elif is_state('person.papa', 'not_home') or is_state('person.papa', 'unknown') %}
                          float: right;
                        {% else %}
                          float: right;
                        {% endif %}
                      }
                    mushroom-template-chip:nth-child(2)$: |
                      ha-state-icon {
                        {% if is_state('timer.timer_cuisine', 'active') %}
                        animation: ping 1.2s ease-in-out infinite;
                        {% endif %}
                      }
                      @keyframes ping {
                        100% {color: white;}
                        30% {color: rgba(var(--rgb-card-background-color));} /*
                        100% {color: white;}
                      }
        view_layout:
          grid-area: badge
  - theme: Adaptive Mushroom
    title: Appareil
    path: device
    icon: mdi:devices
    type: custom:grid-layout
    layout:
      grid-template-columns: 0em 74px 30% 30% 30% auto
      grid-template-rows: grid-title-row-height auto auto auto auto
      grid-gap: 0.5em
      grid-template-areas: |
        ". .   title title  chips     ."
        ". nav media lights batteries ."
        ". nav media lights cameras   ."
      mediaquery:
        "(max-width: 600px)":
          grid-template-columns: 3% 94% 3%
          grid-template-rows: auto
          grid-gap: 0em
          grid-template-areas: |
            ". title ."
            ". chips ."
            ". lights ."
            ". media ."
            ". batteries ."
            ". cameras ."
            "footer footer footer"
    visible:
      - user: 12345678901234567000
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: " "
          - type: custom:decluttering-card
            template: side-nav
            variables:
              - dashboard-name: lovelace
              - active-view: device
        view_layout:
          grid-area: nav
          show:
            mediaquery: "(min-width: 600px)"
      - type: custom:stack-in-card
        mode: horizontal
        cards:
          - type: custom:decluttering-card
            template: bottom-nav
            variables:
              - dashboard-name: lovelace
              - active-view: device
        card_mod:
          style: |
            ha-card {
              z-index:4;
              position: fixed;
              bottom: 10px;
              left: 18px;
              width: calc(100% - 36px);
            }
            :host {
              border-radius: var(--ha-card-border-radius, -2px) !important;
            }
        view_layout:
          grid-area: footer
          show:
            mediaquery: "(max-width: 600px)"
      - type: custom:mod-card
        card:
          type: custom:mushroom-title-card
          title: Appareil
          subtitle: |
            {%- set switches = [
              states.switch.computer_papa,
              states.switch.computer_rig_kaoru,
            ] %}
            {%- set lights_on = states.light| selectattr('state','eq','on') | rejectattr('attributes.type', 'equalto', 'browser_mod') | list %}
            {%- set lights_name = lights_on | selectattr('state','eq','on') | map(attribute='name') | join(', ') %}
            {%- set switches_on = switches | selectattr('state','eq','on') | list %}
            {%- set switches_name = switches | selectattr('state','eq','on') | map(attribute='name') | join(', ') %}
            {%- if (lights_on | length == 0) and (switches_on | length > 1) -%}
              {{ switches_name | regex_replace(',([^,]*)$',' et\\1') }} allumés
            {%- elif (lights_on | length == 0) and (switches_on | length == 1) -%}
              {{ switches_name | regex_replace(',([^,]*)$',' et\\1') }} allumé
            {%- elif (lights_on | length == 1) and (switches_on | length > 1) -%}
              {{ lights_name }} et {{switches_name }} allumés
            {%- elif (lights_on | length == 1) and (switches_on | length > 1) -%}
              {{ lights_name }}, {{ switches_name | regex_replace(',([^,]*)$',' et\\1') }} allumés
            {%- elif (lights_on | length > 1) and (switches_on | length == 1) -%}
              {{ lights_on | length }} lampes et {{ switches_name }} sont allumés
            {%- elif (lights_on | length > 1) and (switches_on | length > 1) -%}
              {{ lights_on | length }} lampes, {{ switches_name | regex_replace(',([^,]*)$',' et\\1') }} allumés
            {%- elif (lights_on | length == 1) and (switches_on | length == 0) -%}
              {{ lights_name }} est allumée
            {%- elif (lights_on | length > 1) and (switches_on | length == 0) -%}
              {{ lights_on | length }} sont allumées
            {%- else %}
              Tout est éteint
            {%- endif -%}
        card_mod:
          style:
            mushroom-title-card$: |
              h1 {
                --title-font-size: 26px;
                --title-font-weight: bold;
                --title-line-height: 1;
              }
              h2 {
                --title-font-size: 16px;
              }
              .header {
                --title-padding: 12px 12px 0px;
              }
        view_layout:
          grid-area: title
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Télévision
          - type: conditional
            conditions:
              - entity: media_player.samsung_tv_salon
                state_not: unavailable
            card:
              type: custom:mushroom-media-player-card
              entity: media_player.samsung_tv_salon
              use_media_info: true
              media_controls:
                - on_off
              volume_controls:
                - volume_set
                - volume_mute
                - volume_buttons
              collapsible_controls: false
              show_volume_level: false
              fill_container: false
              tap_action:
                action: more-info
              double_tap_action:
                action: toggle
              card_mod:
                style:
                  mushroom-button$: |
                    .button:active {
                          transform: scale(0.95);
                          transition: 0s;
                    }
                  .: |
                    ha-state-icon:before {
                      content: "";
                      position: absolute;
                      width: 40%;
                      height: 30%;
                      margin: 6%;
                      {% if is_state('media_player.samsung_tv_salon', 'on') %}
                      animation: refresh 300ms linear infinite;
                      {% endif %}
                    }
                    @keyframes refresh {
                      0% { background: linear-gradient(180deg, rgba(var(--mush-rgb-light-blue), 0.4) 0%, transparent 50%, transparent 100%); }
                      25% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 25%, transparent 100%); }
                      50% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 50%, transparent 100%); }
                      75% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 75%, transparent 100%); }
                      100% { background: linear-gradient(180deg, transparent 0%, transparent 50%, rgba(var(--mush-rgb-light-blue), 0.4) 100%); }
                    }
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-media-player-card
                entity: media_player.bouygtel4k
                secondary_info: none
                use_media_info: true
                media_controls:
                  - previous
                  - play_pause_stop
                  - next
                  - on_off
                volume_controls:
                  - volume_set
                  - volume_mute
                  - volume_buttons
                collapsible_controls: false
                show_volume_level: false
                fill_container: false
                tap_action:
                  action: more-info
                double_tap_action:
                  action: toggle
                card_mod:
                  style:
                    .: |
                      ha-card {
                        background: none
                      }
                    mushroom-button$: |
                      .button:active {
                            transform: scale(0.95);
                            transition: 0s;
                      }
              - type: conditional
                conditions:
                  - entity: media_player.bouygtel4k
                    state_not: "off"
                  - entity: media_player.bouygtel4k
                    state_not: idle
                  - entity: media_player.bouygtel4k
                    state_not: unavailable
                card:
                  type: custom:layout-card
                  layout_type: custom:grid-layout
                  cards:
                    - type: custom:button-card
                      icon: mdi:arrow-left-bottom
                      tap_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: BACK
                      show_icon: true
                      show_name: false
                      styles:
                        card:
                          - box-shadow: none
                          - padding: 0px
                          - background-color: rgba(var(--cstm-rgb-on-secondary),0.05)
                          - border-radius: var(--mush-control-border-radius)
                          - place-self: center
                          - height: var(--mush-control-height)
                        icon:
                          - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                      size: 20px
                      view_layout:
                        grid-area: item1
                    - type: custom:button-card
                      icon: mdi:arrow-up
                      tap_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: DPAD_UP
                      hold_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: DPAD_UP
                          num_repeats: 1
                          delay_secs: 0.5
                      show_icon: true
                      show_name: false
                      styles:
                        card:
                          - box-shadow: none
                          - padding: 0px
                          - background-color: rgba(var(--cstm-rgb-on-secondary),0.05)
                          - border-radius: var(--mush-control-border-radius)
                          - place-self: center
                          - height: var(--mush-control-height)
                        icon:
                          - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                      size: 20px
                      view_layout:
                        grid-area: item2
                    - type: custom:button-card
                      icon: mdi:home
                      tap_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: HOME
                      show_icon: true
                      show_name: false
                      styles:
                        card:
                          - box-shadow: none
                          - padding: 0px
                          - background-color: rgba(var(--cstm-rgb-on-secondary),0.05)
                          - border-radius: var(--mush-control-border-radius)
                          - place-self: center
                          - height: var(--mush-control-height)
                        icon:
                          - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                      size: 20px
                      view_layout:
                        grid-area: item3
                    - type: custom:button-card
                      icon: mdi:arrow-left
                      tap_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: DPAD_LEFT
                      hold_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: DPAD_LEFT
                          num_repeats: 1
                          delay_secs: 0.5
                      show_icon: true
                      show_name: false
                      styles:
                        card:
                          - box-shadow: none
                          - padding: 0px
                          - background-color: rgba(var(--cstm-rgb-on-secondary),0.05)
                          - border-radius: var(--mush-control-border-radius)
                          - place-self: center
                          - height: var(--mush-control-height)
                        icon:
                          - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                      size: 20px
                      view_layout:
                        grid-area: item4
                    - type: custom:button-card
                      icon: mdi:cursor-pointer
                      tap_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: DPAD_CENTER
                      hold_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: DPAD_CENTER
                          num_repeats: 1
                          delay_secs: 0.5
                      show_icon: true
                      show_name: false
                      styles:
                        card:
                          - box-shadow: none
                          - padding: 0px
                          - background-color: rgba(var(--cstm-rgb-on-secondary),0.05)
                          - border-radius: var(--mush-control-border-radius)
                          - place-self: center
                          - height: var(--mush-control-height)
                        icon:
                          - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                      size: 20px
                      view_layout:
                        grid-area: item5
                    - type: custom:button-card
                      icon: mdi:arrow-right
                      tap_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: DPAD_RIGHT
                      hold_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: DPAD_RIGHT
                          num_repeats: 1
                          delay_secs: 0.5
                      show_icon: true
                      show_name: false
                      styles:
                        card:
                          - box-shadow: none
                          - padding: 0px
                          - background-color: rgba(var(--cstm-rgb-on-secondary),0.05)
                          - border-radius: var(--mush-control-border-radius)
                          - place-self: center
                          - height: var(--mush-control-height)
                        icon:
                          - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                      size: 20px
                      view_layout:
                        grid-area: item6
                    - type: custom:button-card
                      icon: mdi:arrow-down
                      tap_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: DPAD_DOWN
                      hold_action:
                        action: call-service
                        service: remote.send_command
                        service_data:
                          entity_id: remote.bouygtel4k
                          command: DPAD_DOWN
                          num_repeats: 1
                          delay_secs: 0.5
                      show_icon: true
                      show_name: false
                      styles:
                        card:
                          - box-shadow: none
                          - padding: 0px
                          - background-color: rgba(var(--cstm-rgb-on-secondary),0.05)
                          - border-radius: var(--mush-control-border-radius)
                          - place-self: center
                          - height: var(--mush-control-height)
                        icon:
                          - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                      size: 20px
                      view_layout:
                        grid-area: item8
                    - type: custom:button-card
                      entity: remote.bouygtel4k
                      icon: mdi:youtube
                      tap_action:
                        action: call-service
                        service: remote.turn_on
                        service_data:
                          entity_id: remote.bouygtel4k
                          activity: https://www.youtube.com
                      show_icon: true
                      show_name: false
                      styles:
                        card:
                          - box-shadow: none
                          - padding: 0px
                          - background-color: >
                              [[[ if (entity.attributes.current_activity ==
                              'com.youtube') {
                                return 'rgba(var(--mush-rgb-red),0.3)'
                              } else {
                                return 'rgba(var(--cstm-rgb-on-secondary),0.05)'
                              } ]]]
                          - border-radius: var(--mush-control-border-radius)
                          - place-self: center
                          - height: var(--mush-control-height)
                        icon:
                          - color: rgba(var(--mush-rgb-red),0.9)
                      size: 20px
                      view_layout:
                        grid-area: item9
                    - type: custom:button-card
                      entity: remote.bouygtel4k
                      icon: mdi:netflix
                      tap_action:
                        action: call-service
                        service: remote.turn_on
                        service_data:
                          entity_id: remote.bouygtel4k
                          activity: netflix://
                      show_icon: true
                      show_name: false
                      styles:
                        card:
                          - box-shadow: none
                          - padding: 0px
                          - background-color: >
                              [[[ if (entity.attributes.current_activity ==
                              'com.netflix.ninja') {
                                return 'rgba(var(--mush-rgb-red),0.3)'
                              } else {
                                return 'rgba(var(--cstm-rgb-on-secondary),0.05)'
                              } ]]]
                          - border-radius: var(--mush-control-border-radius)
                          - place-self: center
                          - height: var(--mush-control-height)
                        icon:
                          - color: rgba(var(--mush-rgb-red),0.9)
                      size: 20px
                      view_layout:
                        grid-area: item10
                    - type: custom:button-card
                      entity: remote.bouygtel4k
                      entity_picture: >-
                        https://upload.wikimedia.org/wikipedia/commons/a/ad/AppleTVLogo.svg
                      show_entity_picture: true
                      tap_action:
                        action: call-service
                        service: remote.turn_on
                        service_data:
                          entity_id: remote.bouygtel4k
                          activity: https://tv.apple.com
                      show_icon: true
                      show_name: false
                      styles:
                        card:
                          - box-shadow: none
                          - padding: 0px
                          - background-color: >
                              [[[ if (entity.attributes.current_activity ==
                              'com.apple')  {
                                return 'rgba(var(--cstm-rgb-on-secondary),0.2)'
                              } else {
                                return 'rgba(var(--cstm-rgb-on-secondary),0.05)'
                              } ]]]
                          - border-radius: var(--mush-control-border-radius)
                          - place-self: center
                          - height: var(--mush-control-height)
                        icon:
                          - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                      size: 22px
                      view_layout:
                        grid-area: item11
                    - type: custom:button-card
                      entity: remote.bouygtel4k
                      icon: mdi:spotify
                      tap_action:
                        action: call-service
                        service: remote.turn_on
                        service_data:
                          entity_id: remote.bouygtel4k
                          activity: spotify://
                      show_icon: true
                      show_name: false
                      styles:
                        card:
                          - box-shadow: none
                          - padding: 0px
                          - background-color: >
                              [[[ if (entity.attributes.current_activity ==
                              'spotify')  {
                                return 'rgba(var(--mush-rgb-green),0.2)'
                              } else {
                                return 'rgba(var(--cstm-rgb-on-secondary),0.05)'
                              } ]]]
                          - border-radius: var(--mush-control-border-radius)
                          - place-self: center
                          - height: var(--mush-control-height)
                        icon:
                          - color: rgba(var(--mush-rgb-green),0.9)
                      size: 20px
                      view_layout:
                        grid-area: item12
                  layout:
                    grid-template-columns: 1fr 1fr 1fr 1fr
                    grid-template-rows: min-content
                    grid-template-areas: |
                      ". item2 . item1"
                      "item4 item5 item6 item3"
                      ". item8 . item7"
                      "item9 item10 item11 item12"
                    gap: 0px
                    margin: "-4px 8px 4px"
          - type: conditional
            conditions:
              - entity: media_player.samsung_tv_papa
                state: "on"
            card:
              type: custom:mushroom-media-player-card
              entity: media_player.samsung_tv_papa
              use_media_info: true
              media_controls:
                - on_off
              volume_controls:
                - volume_set
                - volume_mute
                - volume_buttons
              collapsible_controls: false
              show_volume_level: false
              fill_container: false
              tap_action:
                action: more-info
              double_tap_action:
                action: toggle
              card_mod:
                style:
                  mushroom-button$: |
                    .button:active {
                          transform: scale(0.95);
                          transition: 0s;
                    }
                  .: |
                    ha-state-icon:before {
                      content: "";
                      position: absolute;
                      width: 40%;
                      height: 30%;
                      margin: 6%;
                      {% if is_state('media_player.samsung_tv_papa', 'on') %}
                      animation: refresh 300ms linear infinite;
                      {% endif %}
                    }
                    @keyframes refresh {
                      0% { background: linear-gradient(180deg, rgba(var(--mush-rgb-light-blue), 0.4) 0%, transparent 50%, transparent 100%); }
                      25% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 25%, transparent 100%); }
                      50% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 50%, transparent 100%); }
                      75% { background: linear-gradient(180deg, transparent 0%, rgba(var(--mush-rgb-light-blue), 0.4) 75%, transparent 100%); }
                      100% { background: linear-gradient(180deg, transparent 0%, transparent 50%, rgba(var(--mush-rgb-light-blue), 0.4) 100%); }
                    }
          - type: custom:mushroom-title-card
            title: Audio
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-media-player-card
                entity: media_player.google_home_chambre
                use_media_info: true
                use_media_artwork: false
                show_volume_level: false
                media_controls:
                  - next
                  - play_pause_stop
                  - shuffle
                  - on_off
                  - previous
                volume_controls:
                  - volume_mute
                  - volume_set
                  - volume_buttons
                fill_container: false
                card_mod:
                  style:
                    mushroom-media-player-media-control$:
                      mushroom-button$: |
                        .button {
                          background-color: rgb(74 74 74 / 70%) !important;
                        }
                        .button:active {
                              transform: scale(0.95);
                              transition: 0s;
                        }
                    mushroom-button$: |
                      .button {
                        background-color: rgb(74 74 74 / 70%) !important;
                      }
                      .button:active {
                            transform: scale(0.95);
                            transition: 0s;
                      }
                    .: |
                      ha-state-icon {
                        {% if is_state(config.entity, 'playing') %}
                          animation: beat 800ms ease-out infinite both;
                        {% endif %}
                      }
                      @keyframes beat {
                        0% { transform: scale(1); }
                        10% { transform: scale(1.1); }
                        17% { transform: scale(1.05); }
                        33% { transform: scale(1.25); }
                        60% { transform: scale(1); }
                      }
            card_mod:
              style:
                .: |
                  @media (max-width: 600px) {
                    ha-card::before {
                      {% if not is_state('media_player.google_home_chambre', 'off') and not is_state('media_player.google_home_chambre', 'idle') %}
                      content: '';
                      position: absolute;
                      top: 0;
                      right: 0;
                      width: 200px;
                      height: 100%;
                      background-image: url('{{ state_attr("media_player.google_home_chambre", "entity_picture") }}');
                      background-size: cover;
                      background-position: right;
                      background-repeat: no-repeat;
                      -webkit-mask-image: linear-gradient(to right, transparent, black 200px);
                      {% endif %}
                    }
                  }
                  @media (min-width: 600px) and (max-width: 1100px) {
                    ha-card::before {
                      {% if not is_state('media_player.google_home_chambre', 'off') and not is_state('media_player.google_home_chambre', 'idle') %}
                      content: '';
                      position: absolute;
                      top: 0;
                      right: 0;
                      width: 100%;
                      height: 100%;
                      background-image: url('{{ state_attr("media_player.google_home_chambre", "entity_picture") }}');
                      background-size: 300px auto, cover;
                      background-position: right;
                      background-repeat: no-repeat;
                      -webkit-mask-image: linear-gradient(to right, transparent, black 200px);
                      {% endif %}
                    }
                  }
                  @media (min-width: 1100px) {
                    ha-card::before {
                      {% if not is_state('media_player.google_home_chambre', 'off') and not is_state('media_player.google_home_chambre', 'idle') %}
                      content: '';
                      position: absolute;
                      top: 0;
                      right: 0;
                      width: 250px;
                      height: 100%;
                      background-image: url('{{ state_attr("media_player.google_home_chambre", "entity_picture") }}');
                      background-size: cover;
                      background-position: right;
                      background-repeat: no-repeat;
                      -webkit-mask-image: linear-gradient(to right, transparent, black 200px);
                      {% endif %}
                    }
                  }
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-media-player-card
                entity: media_player.google_home_cuisine
                use_media_info: true
                use_media_artwork: false
                show_volume_level: false
                media_controls:
                  - next
                  - play_pause_stop
                  - shuffle
                  - on_off
                  - previous
                volume_controls:
                  - volume_mute
                  - volume_set
                  - volume_buttons
                fill_container: false
                card_mod:
                  style:
                    mushroom-media-player-media-control$:
                      mushroom-button$: |
                        .button {
                          background-color: rgb(74 74 74 / 70%) !important;
                        }
                        .button:active {
                              transform: scale(0.95);
                              transition: 0s;
                        }
                    mushroom-button$: |
                      .button {
                        background-color: rgb(74 74 74 / 70%) !important;
                      }
                      .button:active {
                            transform: scale(0.95);
                            transition: 0s;
                      }
                    .: |
                      ha-state-icon {
                        {% if is_state(config.entity, 'playing') %}
                          animation: beat 800ms ease-out infinite both;
                        {% endif %}
                      }
                      @keyframes beat {
                        0% { transform: scale(1); }
                        10% { transform: scale(1.1); }
                        17% { transform: scale(1.05); }
                        33% { transform: scale(1.25); }
                        60% { transform: scale(1); }
                      }
            card_mod:
              style:
                .: |
                  @media (max-width: 600px) {
                    ha-card::before {
                      {% if not is_state('media_player.google_home_cuisine', 'off') and not is_state('media_player.google_home_cuisine', 'idle') %}
                      content: '';
                      position: absolute;
                      top: 0;
                      right: 0;
                      width: 200px;
                      height: 100%;
                      background-image: url('{{ state_attr("media_player.google_home_cuisine", "entity_picture") }}');
                      background-size: cover;
                      background-position: right;
                      background-repeat: no-repeat;
                      -webkit-mask-image: linear-gradient(to right, transparent, black 200px);
                      {% endif %}
                    }
                  }
                  @media (min-width: 600px) and (max-width: 1100px) {
                    ha-card::before {
                      {% if not is_state('media_player.google_home_cuisine', 'off') and not is_state('media_player.google_home_cuisine', 'idle') %}
                      content: '';
                      position: absolute;
                      top: 0;
                      right: 0;
                      width: 100%;
                      height: 100%;
                      background-image: url('{{ state_attr("media_player.google_home_cuisine", "entity_picture") }}');
                      background-size: 300px auto, cover;
                      background-position: right;
                      background-repeat: no-repeat;
                      -webkit-mask-image: linear-gradient(to right, transparent, black 200px);
                      {% endif %}
                    }
                  }
                  @media (min-width: 1100px) {
                    ha-card::before {
                      {% if not is_state('media_player.google_home_cuisine', 'off') and not is_state('media_player.google_home_cuisine', 'idle') %}
                      content: '';
                      position: absolute;
                      top: 0;
                      right: 0;
                      width: 250px;
                      height: 100%;
                      background-image: url('{{ state_attr("media_player.google_home_cuisine", "entity_picture") }}');
                      background-size: cover;
                      background-position: right;
                      background-repeat: no-repeat;
                      -webkit-mask-image: linear-gradient(to right, transparent, black 200px);
                      {% endif %}
                    }
                  }
            layout:
              column_widths: 51% 51%testdash
              width: 145
              margin: 0px
              card_margin: 4px 4px 8px
              min_height: 1
              reflow: true
        view_layout:
          grid-area: media
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Lumières
          - type: custom:mod-card
            card_mod:
              style:
                swipe-card$: |
                  @media (min-width: 1200px) and (max-width: 1300px) {
                    .swiper-wrapper {
                      padding-bottom: 10% !important;
                    }
                  } 
                  @media (min-width: 0px) {
                    .swiper-wrapper {
                      padding-bottom: 50px !important;
                    }
                    div > div.swiper-pagination.swiper-pagination-bullets {
                      bottom: 14px;
                    }
                  } 
                  div > div.swiper-pagination.swiper-pagination-bullets >
                  span.swiper-pagination-bullet.swiper-pagination-bullet-active {
                    background: white;
                  }
                  div > div.swiper-pagination.swiper-pagination-bullets > span {
                    background: white;
                  }
                  div {
                    margin-bottom: -20px;
                  }
            card:
              type: custom:swipe-card
              parameters:
                spaceBetween: 8
                pagination:
                  type: bullets
                  color: white
              cards:
                - square: false
                  columns: 2
                  type: grid
                  cards:
                    - type: custom:mushroom-light-card
                      entity: light.plafond
                      use_light_color: true
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      name: Plafond
                      icon: mdi:lightbulb-variant
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                    - type: custom:mushroom-light-card
                      entity: light.chambre
                      use_light_color: true
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Chambre
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:desk
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                    - type: custom:mushroom-light-card
                      entity: light.bureau
                      icon_type: icon
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Bureau
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:bed
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                    - type: custom:mushroom-light-card
                      entity: light.switch_wall_cuisine
                      icon_type: icon
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Cuisine
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:microwave
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                    - type: custom:mushroom-light-card
                      entity: light.switch_wall_chambre_papa
                      icon_type: icon
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Papa
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:bed-king
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                    - type: custom:mushroom-light-card
                      entity: light.switch_wall_toilette
                      icon_type: icon
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Toilette
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:toilet
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                - square: false
                  columns: 2
                  type: grid
                  cards:
                    - type: custom:mushroom-light-card
                      entity: light.switch_wall_salle_de_bain
                      icon_type: icon
                      show_brightness_control: true
                      show_color_control: false
                      show_color_temp_control: true
                      collapsible_controls: true
                      primary_info: name
                      secondary_info: state
                      name: Salle de bain
                      tap_action:
                        action: toggle
                      hold_action:
                        action: more-info
                      double_tap_action:
                        action: more-info
                      icon: mdi:bathtub-outline
                      fill_container: false
                      card_mod:
                        style: |
                          ha-card {
                            {{ 'background: rgba(var(--mush-rgb-amber), 0.2);' if is_state(config.entity, 'on') }}
                          }
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
            layout:
              column_widths: 51% 51%
              width: 145
              margin: 0px
              card_margin: 4px 4px 8px
              min_height: 1
              reflow: true
          - type: custom:mushroom-title-card
            title: Plugs
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:decluttering-card
                template: plug_template
                variables:
                  - entity: switch.smart_plug_homelab_switch
                  - name: Homelab
              - type: custom:decluttering-card
                template: plug_template
                variables:
                  - entity: switch.smart_plug_shiro_switch
                  - name: Shiro
              - type: custom:mushroom-template-card
                entity: switch.computer_rig_kaoru
                primary: Kaoru RIG
                secondary: |-
                  {% if is_state(entity, 'on') %}
                    On
                  {% elif is_state(entity, 'off') %}
                    Off
                  {% else %}
                    Non disponible
                  {% endif %}
                icon: mdi:monitor-multiple
                icon_color: |-
                  {% if is_state(entity, 'on') %}
                    var(--cstm-rgb-automation-on-icon)
                  {% else %}
                    disabled
                  {% endif %}
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action: !include popup/computer_rig_kaoru.yaml
                badge_icon: |-
                  {% if not is_state(entity, ['on', 'off']) %}
                    mdi:help
                  {% endif %}
                badge_color: orange
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .primary {
                        white-space: normal !important;
                        overflow: hidden;
                        display: -webkit-box;
                        -webkit-line-clamp: 1;
                        -webkit-box-orient: vertical;
                      }
                    .: |
                      ha-card {
                        {% if is_state(config.entity, 'on') %}
                          background: var(--cstm-rgb-automation-on-background);
                          --card-primary-color: rgb(var(--cstm-rgb-on-primary-text));
                          --card-secondary-color: rgb(var(--cstm-rgb-on-secondary-text));
                        {% endif %}
                      }
                      ha-card:active {
                        transform: scale(0.95);
                        transition: 0s;
                      }
                      ha-state-icon:after {
                        content: "";
                        position: absolute;
                        width: 35%;
                        height: 60%;
                        margin-left: 5px;
                        margin-top: 5px;
                        {% if is_state(config.entity, 'on') %}
                        animation: refresh-screen 300ms linear infinite;
                        {% endif %}
                      }
                      @keyframes refresh-screen {
                        0% { background: linear-gradient(180deg, rgba(var(--rgb-black), 0.2) 0%, transparent 50%, transparent 100%); }
                        25% { background: linear-gradient(180deg, transparent 0%, rgba(var((--rgb-black), 0.2) 25%, transparent 100%); }
                        50% { background: linear-gradient(180deg, transparent 0%, rgba(var((--rgb-black), 0.2) 50%, transparent 100%); }
                        75% { background: linear-gradient(180deg, transparent 0%, rgba(var((--rgb-black), 0.2) 75%, transparent 100%); }
                        100% { background: linear-gradient(180deg, transparent 0%, transparent 50%, rgba(var((--rgb-black), 0.2) 100%); }
                      }
                    mushroom-shape-icon$: |
                      .shape::before {
                        content: "";
                        position: absolute;
                        top: 0px;
                        left: 0px;
                        right: 0px;
                        bottom: 0px;
                        border-radius: 12px;
                        border: 4px solid transparent;
                        {% if is_state('input_boolean.computer_rig_kaoru_load', 'on') %}
                          animation: borderLoading 1s linear reverse infinite;
                        {% endif %}
                      }
                      @keyframes borderLoading {
                        0% {
                          border-top-color: rgba(var(--rgb-light-blue), 1);
                          border-right-color: rgba(var(--rgb-light-blue), 0.75);
                          border-bottom-color: rgba(var(--rgb-light-blue), 0.5);
                          border-left-color: rgba(var(--rgb-light-blue), 0.25);
                        }
                        25% {
                          border-top-color: rgba(var(--rgb-light-blue), 0.75);
                          border-right-color: rgba(var(--rgb-light-blue), 0.5);
                          border-bottom-color: rgba(var(--rgb-light-blue), 0.25);
                          border-left-color: rgba(var(--rgb-light-blue), 1);
                        }
                        50% {
                          border-top-color: rgba(var(--rgb-light-blue), 0.5);
                          border-right-color: rgba(var(--rgb-light-blue), 0.25);
                          border-bottom-color: rgba(var(--rgb-light-blue), 1);
                          border-left-color: rgba(var(--rgb-light-blue), 0.75);
                        }
                        75% {
                          border-top-color: rgba(var(--rgb-light-blue), 0.25);
                          border-right-color: rgba(var(--rgb-light-blue), 1);
                          border-bottom-color: rgba(var(--rgb-light-blue), 0.75);
                          border-left-color: rgba(var(--rgb-light-blue), 0.5);
                        }
                        100% {
                          border-top-color: rgba(var(--rgb-light-blue), 1);
                          border-right-color: rgba(var(--rgb-light-blue), 0.75);
                          border-bottom-color: rgba(var(--rgb-light-blue), 0.5);
                          border-left-color: rgba(var(--rgb-light-blue), 0.25);
                        }
                      }
              - type: custom:mushroom-template-card
                entity: switch.computer_papa
                primary: Papa PC
                secondary: |-
                  {% if is_state(entity, 'on') %}
                    On
                  {% elif is_state(entity, 'off') %}
                    Off
                  {% else %}
                    Non disponible
                  {% endif %}
                icon: mdi:desktop-tower
                icon_color: |-
                  {% if is_state(entity, 'on') %}
                    var(--cstm-rgb-automation-on-icon)
                  {% else %}
                    disabled
                  {% endif %}
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action: !include popup/computer_papa.yaml
                badge_icon: |-
                  {% if not is_state(entity, ['on', 'off']) %}
                    mdi:help
                  {% endif %}
                badge_color: orange
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .primary {
                        white-space: normal !important;
                        overflow: hidden;
                        display: -webkit-box;
                        -webkit-line-clamp: 1;
                        -webkit-box-orient: vertical;
                      }
                    .: |
                      ha-card {
                        {% if is_state(config.entity, 'on') %}
                          background: var(--cstm-rgb-automation-on-background);
                          --card-primary-color: rgb(var(--cstm-rgb-on-primary-text));
                          --card-secondary-color: rgb(var(--cstm-rgb-on-secondary-text));
                        {% endif %}
                      }
                      ha-card:active {
                        transform: scale(0.95);
                        transition: 0s;
                      }
                      ha-state-icon:before {
                        content: "";
                        position: absolute;
                        width: 4px;
                        height: 4px;
                        margin-left: 10px;
                        margin-top: 14px;
                        #border-radius: 10px;
                        {% if is_state(config.entity, 'on') %}
                        animation: blink-before 300ms linear infinite;
                        {% endif %}
                      }
                      ha-state-icon:after {
                        content: "";
                        position: absolute;
                        width: 8px;
                        height: 8px;
                        margin-left: 9px;
                        margin-top: 13px;
                        border-radius: 15px;
                        {% if is_state(config.entity, 'on') %}
                        animation: blink-after 300ms linear infinite;
                        {% endif %}
                      }
                      @keyframes blink-after {
                        0% { background: radial-gradient(closest-side, rgba(var(--rgb-light-blue), 0.5), rgba(var(--rgb-light-blue), 0.1)); }
                        25% { background: radial-gradient(closest-side,rgba(var(--rgb-light-blue), 1), rgba(var(--rgb-light-blue), 0.1)); }
                        50% { background: radial-gradient(closest-side, rgba(var(--rgb-light-blue), 0.5), rgba(var(--rgb-light-blue), 0.1)); }
                        75% { background: radial-gradient(closest-side, rgba(var(--rgb-light-blue), 0.1), rgba(var(--rgb-light-blue), 0.1)); }
                        100% { background: radial-gradient(closest-side, rgba(var(--rgb-light-blue), 0.5), rgba(var(--rgb-light-blue), 0.1)); }
                      }
                      @keyframes blink-before {
                        0% { background: rgba(var(--rgb-light-blue), 0.5); }
                        25% { background: rgba(var(--rgb-light-blue), 1); }
                        50% { background: rgba(var(--rgb-light-blue), 0.5); }
                        75% { background: rgba(var(--rgb-light-blue), 0.1); }
                        100% { background: rgba(var(--rgb-light-blue), 0.5); }
                      }
                    mushroom-shape-icon$: |
                      .shape::before {
                        content: "";
                        position: absolute;
                        top: 0px;
                        left: 0px;
                        right: 0px;
                        bottom: 0px;
                        border-radius: 12px;
                        border: 4px solid transparent;
                        {% if is_state('input_boolean.computer_papa_load', 'on') %}
                          animation: borderLoading 1s linear reverse infinite;
                        {% endif %}
                      }
                      @keyframes borderLoading {
                        0% {
                          border-top-color: rgba(var(--rgb-light-blue), 1);
                          border-right-color: rgba(var(--rgb-light-blue), 0.75);
                          border-bottom-color: rgba(var(--rgb-light-blue), 0.5);
                          border-left-color: rgba(var(--rgb-light-blue), 0.25);
                        }
                        25% {
                          border-top-color: rgba(var(--rgb-light-blue), 0.75);
                          border-right-color: rgba(var(--rgb-light-blue), 0.5);
                          border-bottom-color: rgba(var(--rgb-light-blue), 0.25);
                          border-left-color: rgba(var(--rgb-light-blue), 1);
                        }
                        50% {
                          border-top-color: rgba(var(--rgb-light-blue), 0.5);
                          border-right-color: rgba(var(--rgb-light-blue), 0.25);
                          border-bottom-color: rgba(var(--rgb-light-blue), 1);
                          border-left-color: rgba(var(--rgb-light-blue), 0.75);
                        }
                        75% {
                          border-top-color: rgba(var(--rgb-light-blue), 0.25);
                          border-right-color: rgba(var(--rgb-light-blue), 1);
                          border-bottom-color: rgba(var(--rgb-light-blue), 0.75);
                          border-left-color: rgba(var(--rgb-light-blue), 0.5);
                        }
                        100% {
                          border-top-color: rgba(var(--rgb-light-blue), 1);
                          border-right-color: rgba(var(--rgb-light-blue), 0.75);
                          border-bottom-color: rgba(var(--rgb-light-blue), 0.5);
                          border-left-color: rgba(var(--rgb-light-blue), 0.25);
                        }
                      }
              - type: custom:mushroom-fan-card
                entity: fan.xiaomi_smart_fan_2
                show_percentage_control: true
                show_oscillate_control: true
                collapsible_controls: true
                fill_container: false
                icon_animation: true
                card_mod:
                  style:
                    mushroom-fan-percentage-control$: |
                      mushroom-slider {
                          --main-color: rgba(var(--mush-rgb-blue), 0.8) !important;
                          --bg-color: rgba(var(--cstm-rgb-automation-on-icon), 0.2) !important;
                        }
                    mushroom-fan-oscillate-control$:
                      mushroom-button:nth-child(1)$: |
                        .button {
                          background: rgba(var(--cstm-rgb-automation-on-icon), 0.2) !important;
                        }
                        .button ::slotted(*) {
                          --card-mod-icon-color: rgb(var(--cstm-rgb-automation-on-icon)) !important;
                        }
                    mushroom-shape-icon$: |
                      .shape {
                        --shape-color: rgba(var(--cstm-rgb-automation-on-icon), 0.2) !important;
                      }
                    .: |
                      ha-state-icon {
                        {% if is_state(config.entity, 'on') %}
                          color: rgb(var(--cstm-rgb-automation-on-icon));
                        {% endif %}
                      }
                      ha-card {
                        {% if is_state(config.entity, 'on') %}
                          background: var(--cstm-rgb-fan-on-background);
                          --card-primary-color: rgb(var(--cstm-rgb-on-primary-text));
                          --card-secondary-color: rgb(var(--cstm-rgb-on-secondary-text));
                          {% endif %}      
                      }
                      ha-card:active {
                        transform: scale(0.95);
                        transition: 0s;
                      }
              - type: custom:stack-in-card
                keep:
                  background: false
                cards:
                  - type: custom:decluttering-card
                    template: plug_template
                    variables:
                      - entity: switch.smart_plug_spare_switch
                      - name: Trotinette
                      - action: toggle
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: switch.smart_plug_spare_switch
                        state: "on"
                    card:
                      type: custom:layout-card
                      layout_type: custom:grid-layout
                      cards:
                        - type: custom:button-card
                          icon: mdi:minus
                          tap_action:
                            action: call-service
                            service: script.smart_plug_spare_duration_decrement
                          show_icon: true
                          show_name: false
                          styles:
                            grid:
                              - grid-template-areas: "\"i\""
                            card:
                              - "--mdc-ripple-color": white
                              - "--mdc-ripple-press-opacity": 0.2
                              - box-shadow: none
                              - padding: 0px
                              - background-color: rgba(var(--mush-rgb-white),0.2)
                              - border-radius: var(--mush-control-border-radius)
                              - place-self: center
                              - height: var(--mush-control-height)
                            icon:
                              - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                          size: 20px
                          view_layout:
                            grid-area: item1
                          card_mod:
                            style: |
                              ha-card:active {
                                transform: scale(0.95);
                                transition: 0s;
                              }
                        - type: custom:button-card
                          entity: input_number.smart_plug_spare_duration
                          name: "[[[ return Math.round(entity.state) ]]]"
                          tap_action:
                            action: more-info
                          show_icon: false
                          show_name: true
                          styles:
                            grid:
                              - grid-template-areas: "\"n\""
                            card:
                              - "--mdc-ripple-color": white
                              - "--mdc-ripple-press-opacity": 0.2
                              - box-shadow: none
                              - padding: 0px
                              - background-color: rgba(var(--mush-rgb-white),0.2)
                              - border-radius: var(--mush-control-border-radius)
                              - place-self: center
                              - height: var(--mush-control-height)
                            name:
                              - font-size: 16px
                          size: 20px
                          view_layout:
                            grid-area: item2
                          card_mod:
                            style: |
                              ha-card:active {
                                transform: scale(0.95);
                                transition: 0s;
                              }
                        - type: custom:button-card
                          icon: mdi:plus
                          tap_action:
                            action: call-service
                            service: script.smart_plug_spare_duration_increment
                          show_icon: true
                          show_name: false
                          styles:
                            grid:
                              - grid-template-areas: "\"i\""
                            card:
                              - "--mdc-ripple-color": white
                              - "--mdc-ripple-press-opacity": 0.2
                              - box-shadow: none
                              - padding: 0px
                              - background-color: rgba(var(--mush-rgb-white),0.2)
                              - border-radius: var(--mush-control-border-radius)
                              - place-self: center
                              - height: var(--mush-control-height)
                            icon:
                              - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                          size: 20px
                          view_layout:
                            grid-area: item3
                        - type: custom:button-card
                          entity: automation.turn_off_smart_plug_spare_switch
                          icon: mdi:creation
                          tap_action:
                            action: toggle
                          show_icon: true
                          show_name: false
                          styles:
                            grid:
                              - grid-template-areas: "\"i\""
                            card:
                              - "--mdc-ripple-color": white
                              - "--mdc-ripple-press-opacity": 0.2
                              - box-shadow: none
                              - padding: 0px
                              - background-color: rgba(var(--mush-rgb-white),0.2)
                              - border-radius: var(--mush-control-border-radius)
                              - place-self: center
                              - height: var(--mush-control-height)
                            icon:
                              - color: rgba(var(--cstm-rgb-on-secondary), 0.8)
                          state:
                            - value: "on"
                              styles:
                                card:
                                  - background-color: rgba(var(--cstm-rgb-on), 0.8)
                                icon:
                                  - color: rgb(var(--cstm-rgb-bottom-nav))
                          size: 20px
                          view_layout:
                            grid-area: item4
                          card_mod:
                            style: |
                              ha-card:active {
                                transform: scale(0.95);
                                transition: 0s;
                              }
                        - type: custom:button-card
                          entity: sensor.smart_plug_spare_remaining_time
                          name: |
                            [[[ return entity.state; ]]]
                          tap_action:
                            action: more-info
                          show_icon: false
                          show_name: true
                          styles:
                            grid:
                              - grid-template-areas: "\"n\""
                            card:
                              - "--mdc-ripple-color": white
                              - "--mdc-ripple-press-opacity": 0.2
                              - box-shadow: none
                              - padding: 0px
                              - background-color: rgba(var(--mush-rgb-white),0.2)
                              - border-radius: var(--mush-control-border-radius)
                              - place-self: center
                              - height: var(--mush-control-height)
                            name:
                              - font-size: 16px
                          size: 20px
                          view_layout:
                            grid-area: item5
                          card_mod:
                            style: |
                              ha-card:active {
                                transform: scale(0.95);
                                transition: 0s;
                              }
                        - type: custom:button-card
                          entity: sensor.smart_plug_spare_active_power
                          name: |
                            [[[ return  Math.round(entity.state) + " W" ]]]
                          tap_action:
                            action: more-info
                          show_icon: false
                          show_name: true
                          styles:
                            grid:
                              - grid-template-areas: "\"n\""
                            card:
                              - "--mdc-ripple-color": white
                              - "--mdc-ripple-press-opacity": 0.2
                              - box-shadow: none
                              - padding: 0px
                              - background-color: rgba(var(--mush-rgb-white),0.2)
                              - border-radius: var(--mush-control-border-radius)
                              - place-self: center
                              - height: var(--mush-control-height)
                            name:
                              - font-size: 16px
                          size: 20px
                          view_layout:
                            grid-area: item6
                          card_mod:
                            style: |
                              ha-card:active {
                                transform: scale(0.95);
                                transition: 0s;
                              }
                      layout:
                        grid-template-columns: 1fr 1fr 1fr
                        grid-template-rows: min-content min-content
                        grid-template-areas: |
                          "item1 item2 item3"
                          "item4 item5 item6"
                        gap: 0px
                        margin: "-4px 8px 4px"
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .primary {
                        white-space: normal !important;
                        overflow: hidden;
                      }
                    .: |
                      ha-card {
                        {% if is_state('switch.smart_plug_spare_switch', 'on') %}
                          background: rgba(var(--mush-rgb-blue), 0.8);
                          --card-primary-color: rgb(var(--mush-rgb-white));
                          --card-secondary-color: rgba(var(--mush-rgb-white), 0.8);
                        {% endif %}
                      }
            layout:
              column_widths: 51% 51%
              width: 145
              margin: 0px
              card_margin: 4px 4px 8px
              min_height: 1
        view_layout:
          grid-area: lights
      - type: custom:mod-card
        card_mod:
          style: |
            @media (max-width: 600px) {
              ha-card {
                margin-bottom: 50px; /* add margin before swipe card and footer */
              }
            }
        card:
          type: vertical-stack
          cards:
            - type: custom:mushroom-title-card
              title: Appareil et batteries
            - type: custom:mod-card
              card_mod:
                style:
                  swipe-card$: |
                    @media (min-width: 1200px) and (max-width: 1300px) {
                      .swiper-wrapper {
                        padding-bottom: 10% !important;
                      }
                    } 
                    @media (min-width: 0px) {
                      .swiper-wrapper {
                        padding-bottom: 50px !important;
                      }
                      div > div.swiper-pagination.swiper-pagination-bullets {
                        bottom: 14px;
                      }
                    } 
                    div > div.swiper-pagination.swiper-pagination-bullets >
                    span.swiper-pagination-bullet.swiper-pagination-bullet-active {
                      background: white;
                    }
                    div > div.swiper-pagination.swiper-pagination-bullets > span {
                      background: white;
                    }
              card:
                type: custom:swipe-card
                parameters:
                  spaceBetween: 8
                  pagination:
                    type: bullets
                    color: white
                cards:
                - square: false
                  columns: 2
                  type: grid
                  cards:
                    - type: custom:mushroom-template-card
                      entity: sensor.oneplus12_battery_level
                      primary: OnePlus 12
                      secondary: "{{ states(entity) }}%"
                      icon: >
                        {% set battery_level = (states(entity) | int / 10) | round(0) | int * 10 %}
                        {% if battery_level == 100 %}
                          mdi:battery
                        {% elif battery_level > 0 %}
                          mdi:battery-{{ battery_level }}
                        {% else %}
                          mdi:battery-alert-variant-outline
                        {% endif %}
                      icon_color: >
                        {% set battery_level = (states(entity) | int / 10) | round(0)
                        | int * 10 %}
                        {% if battery_level > 60 %}
                          green
                        {% elif battery_level > 20 %}
                          orange
                        {% elif battery_level > 0 %}
                          red
                        {% else %}
                          grey
                        {% endif %}
                      layout: horizontal
                      tap_action:
                        action: more-info
                      badge_color: blue
                      badge_icon: |-
                        {% if is_state('binary_sensor.oneplus12_is_charging', 'on') %}
                          mdi:lightning-bolt
                        {% endif %}
                      card_mod:
                        style: |
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                          mushroom-shape-icon {
                            {% set battery_level = (states('sensor.oneplus12_battery_level') | int / 10) | round(0) | int * 10 %}
                            --shape-color: rgba(var(--cstm-rgb-on-secondary), 0.05) !important;
                            {% if is_state('binary_sensor.oneplus12_is_charging','on') and not battery_level == 100 %}
                                animation: charging-animation 4s infinite;
                            {% endif %}
                          }
                          @keyframes charging-animation {
                            0% { --card-mod-icon: mdi:battery-outline; }
                            10% { --card-mod-icon: mdi:battery-10; }
                            20% { --card-mod-icon: mdi:battery-20; }
                            30% { --card-mod-icon: mdi:battery-30; }
                            40% { --card-mod-icon: mdi:battery-40; }
                            50% { --card-mod-icon: mdi:battery-50; }
                            60% { --card-mod-icon: mdi:battery-60; }
                            70% { --card-mod-icon: mdi:battery-70; }
                            80% { --card-mod-icon: mdi:battery-80; }
                            90% { --card-mod-icon: mdi:battery-90; }
                            100% { --card-mod-icon: mdi:battery; }
                          }
                    - type: custom:mushroom-template-card
                      entity: sensor.samsung_s24_battery_level
                      primary: Samsung s24
                      secondary: "{{ states(entity) }}%"
                      icon: >
                        {% set battery_level = (states(entity) | int / 10) | round(0)
                        | int * 10 %}

                        {% if battery_level == 100 %}
                          mdi:battery
                        {% elif battery_level > 0 %}
                          mdi:battery-{{ battery_level }}
                        {% else %}
                          mdi:battery-alert-variant-outline
                        {% endif %}
                      icon_color: >
                        {% set battery_level = (states(entity) | int / 10) | round(0)
                        | int * 10 %}
                        {% if battery_level > 60 %}
                          green
                        {% elif battery_level > 20 %}
                          orange
                        {% elif battery_level > 0 %}
                          red
                        {% else %}
                          grey
                        {% endif %}
                      layout: horizontal
                      tap_action:
                        action: more-info
                      badge_icon: >-
                        {% if is_state('sensor.samsung_s10e_is_charging', 'Charging')
                        %}
                          mdi:lightning-bolt
                        {% endif %}
                      badge_color: blue
                      card_mod:
                        style: |
                          ha-card:active {
                            transform: scale(0.95);
                            transition: 0s;
                          }
                          mushroom-shape-icon {
                            {% set battery_level = (states('sensor.oneplus12_battery_level') | int / 10) | round(0) | int * 10 %}
                            --shape-color: rgba(var(--cstm-rgb-on-secondary), 0.05) !important;
                            {% if is_state('binary_sensor.samsung_s10e_is_charging','on') and not battery_level == 100 %}
                                animation: charging-animation 4s infinite;
                            {% endif %}
                          }
                          @keyframes charging-animation {
                            0% { --card-mod-icon: mdi:battery-outline; }
                            10% { --card-mod-icon: mdi:battery-10; }
                            20% { --card-mod-icon: mdi:battery-20; }
                            30% { --card-mod-icon: mdi:battery-30; }
                            40% { --card-mod-icon: mdi:battery-40; }
                            50% { --card-mod-icon: mdi:battery-50; }
                            60% { --card-mod-icon: mdi:battery-60; }
                            70% { --card-mod-icon: mdi:battery-70; }
                            80% { --card-mod-icon: mdi:battery-80; }
                            90% { --card-mod-icon: mdi:battery-90; }
                            100% { --card-mod-icon: mdi:battery; }
                          }
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.thermometer_chambre_papa_batterie
                        - primary: Ch. Papa Thermomètre
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.thermometer_chambre_william_batterie
                        - primary: Ch. William Thermomètre
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.thermometer_cuisine_batterie
                        - primary: Cuisine Thermomètre
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.thermometer_salon_batterie
                        - primary: Salon Thermomètre
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.thermometer_salle_de_bain_batterie
                        - primary: Bain Thermomètre
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.pir_couloir1_batterie
                        - primary: PIR Couloir 1
                - square: false
                  columns: 2
                  type: grid
                  cards:
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.pir_couloir2_batterie
                        - primary: PIR Couloir 2
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.pir_wc_batterie
                        - primary: PIR WC
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.lux_pir_couloir_batterie
                        - primary: Lux PIR Couloir
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.switch_chambre_william_1_batterie
                        - primary: Switch William 1
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.switch_chambre_william_2_batterie
                        - primary: Switch William 2
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.switch_chambre_william_2_batterie
                        - primary: Switch William 3
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.fenetre_salon_1_batterie
                        - primary: Fenêtre Salon 1
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.fenetre_salon_1_batterie
                        - primary: Fenêtre Salon 2
                - square: false
                  columns: 2
                  type: grid
                  cards:
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.fenetre_cuisine_batterie
                        - primary: Fenêtre Cusine
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.fenetre_chambre_william_batterie
                        - primary: Fenêtre Chambre William
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.fenetre_chambre_papa_batterie
                        - primary: Fenêtre Chambre Papa
                    - type: custom:decluttering-card
                      template: batterie_template
                      variables:
                        - entity: sensor.porte_couloir_entree_batterie
                        - primary: Porte d'entrée
        view_layout:
          grid-area: batteries
  - theme: Adaptive Mushroom
    title: News
    path: news
    icon: mdi:bell-outline
    type: custom:grid-layout
    layout:
      grid-template-columns: 0em 74px 30% 30% 30% auto
      grid-template-rows: grid-title-row-height auto auto auto
      grid-gap: 0.5em
      grid-template-areas: |
        ". . title title . ."
        ". nav left1 center1 right1 ."
        ". nav left1 center1 right2 ."
        ". nav left3 left3 right2 ."
        ". nav . . right2 ."
      mediaquery:
        "(max-width: 600px)":
          grid-template-columns: 3% 94% 3%
          grid-template-rows: auto
          grid-gap: 0em
          grid-template-areas: |
            ". title ."
            ". left1 ."
            ". center1 ."
            ". left3 ."
            ". right1 ."
            ". right2 ."
            "footer footer footer"
    subview: false
    visible:
      - user: 12345678901234567000
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: " "
          - type: custom:decluttering-card
            template: side-nav
            variables:
              - dashboard-name: lovelace
              - active-view: news
        view_layout:
          grid-area: nav
          show:
            mediaquery: "(min-width: 600px)"
      - type: custom:stack-in-card
        mode: horizontal
        cards:
          - type: custom:decluttering-card
            template: bottom-nav
            variables:
              - dashboard-name: lovelace
              - active-view: news
        card_mod:
          style: |
            ha-card {
              z-index:4;
              position: fixed;
              bottom: 10px;
              left: 18px;
              width: calc(100% - 36px);
            }
            :host {
              border-radius: var(--ha-card-border-radius, -2px) !important;
            }
        view_layout:
          grid-area: footer
          show:
            mediaquery: "(max-width: 600px)"
      - type: custom:mod-card
        card:
          type: custom:mushroom-title-card
          title: Météo
          subtitle: |
            {% if states('sensor.meteo_france_rain_chance') | float > 0 and states('sensor.meteo_france_next_rain') not in ['unknown', 'unavailable'] %}
              Précipitations à {{ as_timestamp(states('sensor.meteo_france_next_rain')) | timestamp_custom("%H:%M") }}
            {% else %}
              {{ states("sensor.meteo_france_temperature") | round(1) }} °C, {{ states("weather.meteo_france") }}
            {% endif %}
        card_mod:
          style:
            mushroom-title-card$: |
              h1 {
                --title-font-size: 26px;
                --title-font-weight: bold;
                --title-line-height: 1;
              }
              h2 {
                --title-font-size: 0px;
              }
              .header {
                --title-padding: 12px 12px 8px;
              }
        view_layout:
          grid-area: title
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Maintenant
          - type: custom:stack-in-card
            cards:
              - type: custom:decluttering-card
                template: weather_now_template
                variables:
                  - secondary: >-
                      {{ states('sensor.meteo_france_cloud_cover') }}%
                      nuageux
            card_mod:
              style: |
                ha-card {
                  height: 13em !important;
                  background: linear-gradient(to top, transparent, rgba(var(--frog-rgb-{{states('sensor.weather_frog_status')}})) 30%), url({{states('sensor.weather_frog_image_wide')}});
                  background-size: cover, 200% auto;
                  background-position: bottom left {% if is_state("sensor.weather_frog_location", "field") %}20%{% elif is_state("sensor.weather_frog_location", "hills") %}40%{% else %}10%{% endif %};
                  background-repeat: no-repeat;
                  background-blend-mode: saturation;
                }
                ha-card:active {
                  transform: scale(0.95);
                  transition: 0s;
                }
          - type: custom:mod-card
            card_mod:
              style:
                .: |
                  @media (min-width: 1200px) and (max-width: 1300px) {
                    ha-card {
                      margin-bottom: -35px;
                    }
                  }
                swipe-card$: |
                  @media (min-width: 1200px) and (max-width: 1300px) {
                    .swiper-wrapper {
                      padding-bottom: 10% !important;
                    }
                  } 
                  @media (min-width: 0px) {
                    .swiper-wrapper {
                      padding-bottom: 25px !important;
                    }
                    div > div.swiper-pagination.swiper-pagination-bullets {
                      bottom: 0;
                    }
                  } 
                  div > div.swiper-pagination.swiper-pagination-bullets >
                  span.swiper-pagination-bullet.swiper-pagination-bullet-active {
                    background: white;
                  }
                  div > div.swiper-pagination.swiper-pagination-bullets > span {
                    background: white;
                  }
            card:
              type: custom:swipe-card
              parameters:
                spaceBetween: 8
                pagination:
                  type: bullets
                  color: white
              cards:
                - type: custom:mod-card
                  card:
                    type: custom:stack-in-card
                    cards:
                      - type: horizontal-stack
                        cards:
                          - type: custom:mushroom-template-card
                            entity: sensor.openweathermap_temperature
                            primary: "{{states(entity) | round(1)}} °C"
                            secondary: >-
                              Ressenti:
                              {{states('sensor.openweathermap_feels_like_temperature')
                              | round(0)}}°
                            multiline_secondary: true
                            icon: mdi:thermometer
                            icon_color: orange
                            tap_action:
                              action: more-info
                          - type: custom:mushroom-entity-card
                            entity: sensor.openweathermap_humidity
                            primary_info: state
                            secondary_info: name
                            name: Humidité
                            icon_color: blue
                      - type: custom:mini-graph-card
                        entities:
                          - entity: sensor.openweathermap_temperature
                            name: Température
                            color: rgb(var(--mush-rgb-orange))
                          - entity: sensor.openweathermap_humidity
                            name: Humidité
                            color: rgb(var(--mush-rgb-blue))
                            y_axis: secondary
                        hours_to_show: 24
                        hour24: true
                        points_per_hour: 1
                        line_width: 3
                        font_size: 90
                        animate: true
                        show:
                          name: false
                          icon: false
                          state: false
                          legend: false
                          extrema: true
                          fill: fade
                - type: custom:mod-card
                  card:
                    type: custom:horizon-card
                    moon: true
                    refresh_period: 60
                    fields:
                      sunrise: true
                      sunset: true
                      dawn: true
                      noon: true
                      dusk: true
                      azimuth: true
                      sun_azimuth: false
                      moon_azimuth: false
                      elevation: true
                      sun_elevation: false
                      moon_elevation: false
                      moonrise: true
                      moonset: true
                      moon_phase: true
                    southern_flip: false
                    moon_phase_rotation: -10
                    language: fr
                    time_format: 24
                    number_format: language
                    time_zone: Europe/Paris
                    card_mod:
                      style: |
                        ha-card {
                          font-size: 11px;
                        }
                        ha-card > div > div.horizon-card-footer > div:nth-child(1) {
                          margin-top: -20px;
                        }
        view_layout:
          grid-area: left1
      - type: vertical-stack
        cards:
          - type: conditional
            conditions:
              - condition: screen
                media_query: "(min-width: 600px)"
            card:
              type: custom:mushroom-title-card
              title: " "
          - type: custom:mod-card
            card:
              type: iframe
              url: >-
                https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=default&metricTemp=default&metricWind=default&zoom=5&overlay=radar&product=radar&level=surface&lat=49.966&lon=2.557&detailLat=50.570547139313874&detailLon=3.194087910132675&marker=true&message=true
            card_mod:
              style: |
                ha-card {
                  height: 300px;
                }
          - type: custom:gap-card
            height: 2
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: sensor.openweathermap_feels_like_temperature
                icon: mdi:thermometer
                icon_color: orange
                content: >-
                  Ressenti
                  {{states("sensor.openweathermap_feels_like_temperature") |
                  round(0)}}º
                tap_action:
                  action: more-info
                card_mod:
                  style: |
                    ha-card {
                      --chip-background: rgba(var(--mush-rgb-orange), 0.2);
                    }
                    ha-card:active {
                      transform: scale(0.95);
                      transition: 0s;
                    }
              - type: template
                entity: sensor.openweathermap_wind_speed
                icon: >-
                  {% if ((states('sensor.openweathermap_wind_speed')|float /
                  0.836)**(2/3)) | round() > 6 %} mdi:windsock {% else %}
                  mdi:weather-windy {% endif %}
                icon_color: grey
                content: >-
                  {{((states('sensor.openweathermap_wind_speed')|float /
                  0.836)**(2/3)) | round()}} Bft
                tap_action:
                  action: more-info
                card_mod:
                  style: |
                    ha-card {
                      --chip-background: rgba(var(--mush-rgb-grey), 0.2);
                    }
                    ha-card:active {
                      transform: scale(0.95);
                      transition: 0s;
                    }
              - type: template
                entity: sensor.openweathermap_wind_bearing
                icon: >-
                  {% set dir =
                  (states('sensor.openweathermap_wind_bearing')|int)/45 %} {% if
                  dir > 0.5 and dir <= 1.5 %} mdi:arrow-bottom-left {% elif dir
                  > 1.5 and dir <= 2.5 %} mdi:arrow-left {% elif dir > 2.5 and
                  dir <= 3.5 %} mdi:arrow-top-left {% elif dir > 3.5 and dir <=
                  4.5 %} mdi:arrow-up {% elif dir > 4.5 and dir <= 5.5 %}
                  mdi:arrow-top-right {% elif dir > 5.5 and dir <= 6.5 %}
                  mdi:arrow-right {% elif dir > 6.5 and dir <= 7.5 %}
                  mdi:arrow-bottom-right {% else %} mdi:arrow-down {% endif %}
                tap_action:
                  action: more-info
                card_mod:
                  style: |
                    ha-card {
                      --chip-background: rgba(var(--mush-rgb-grey), 0.2);
                    }
                    ha-card:active {
                      transform: scale(0.95);
                      transition: 0s;
                    }
              - type: template
                entity: sensor.meteo_france_rain_chance
                picture: >-
                  https://www.gstatic.com/images/icons/material/apps/weather/2x/showers_rain_dark_color_48dp.png
                content: >-
                  {{states('sensor.meteo_france_rain_chance')}}%
                tap_action:
                  action: more-info
                card_mod:
                  style: |
                    ha-card {
                      --chip-background: rgba(var(--mush-rgb-light-blue), 0.3);
                    }
                    ha-card:active {
                      transform: scale(0.95);
                      transition: 0s;
                    }
              - type: conditional
                conditions:
                  - entity: sun.sun
                    state: above_horizon
                chip:
                  type: template
                  entity: sensor.openweathermap_uv_index
                  icon: mdi:weather-sunny
                  content: >-
                    UV-index:
                    {{states('sensor.openweathermap_uv_index')|round(0)}}
                  tap_action:
                    action: more-info
              - type: conditional
                conditions:
                  - entity: sun.sun
                    state: below_horizon
                chip:
                  type: entity
                  entity: sensor.moon_phase
                  tap_action:
                    action: more-info
            alignment: start
        view_layout:
          grid-area: center1
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Prochaines heures
            subtitle: ""
          - type: custom:hourly-weather
            entity: weather.openweathermap
            icons: true
            name: " "
            show_precipitation_amounts: false
            num_segments: "16"
            label_spacing: "2"
            show_wind: "false"
            card_mod:
              style:
                .: |
                  ha-card:active {
                    transform: scale(0.95);
                    transition: 0s;
                  }
                weather-bar$: |
                  .main {
                    --color-clear-night: rgba(var(--mush-rgb-black), 0.2) !important;
                    --color-cloudy: rgba(var(--mush-rgb-grey), 0.35) !important;
                    --color-fog: var(--color-cloudy);
                    --color-hail: rgba(var(--mush-rgb-blue), 0.3) !important;
                    --color-lightning: var(--color-rainy);
                    --color-lightning-rainy: var(--color-rainy);
                    --color-partlycloudy: rgba(var(--mush-rgb-light-blue), 0.35) !important;
                    --color-pouring: var(--color-rainy);
                    --color-rainy: rgba(var(--mush-rgb-indigo), 0.25) !important;
                    --color-snowy: var(--mush-rgb-snow) !important;
                    --color-snowy-rainy: var(--color-partlycloudy);
                    --color-sunny: rgba(var(--mush-rgb-yellow), 0.4) !important;
                    --color-windy: var(--color-sunny);
                    --color-windy-variant: var(--color-sunny);
                    --color-exceptional: rgba(var(--mush-rgb-amber), 0.3) !important;
                  }
                  .bar > div {
                    height: 42px !important;
                  }
                  .bar > div:first-child {
                    border-top-left-radius: 14px !important;
                    border-bottom-left-radius: 14px !important;
                  }
                  .bar > div:last-child {
                    border-top-right-radius: 14px !important;
                    border-bottom-right-radius: 14px !important;
                  }
                  .bar > div > span {
                    text-shadow: none !important;
                    color: rgb(var(--card-primary-color));
                    font-size: 14px;
                    font-weight: bold;
                  }
                  .axes > div > .bar-block-bottom > .hour {
                    font-size: 12px;
                    font-weight: bolder;
                  }
                  .axes > div > .bar-block-bottom > .temperature {
                    font-size: 12px;
                    font-weight: bolder;
                  }
        view_layout:
          grid-area: left3
      - type: vertical-stack
        cards:
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-colums: 70% 30%
              grid-template-rows: auto
              grid-template-areas: |
                "left right"
              grid-gap: 0px
              margin: "-4px"
            cards:
              - type: custom:mushroom-title-card
                title: Prochains jours
                view_layout:
                  grid-area: left
            card_mod:
              style: |
                ha-card {
                  background: none;
                  box-shadow: none;
                }
          - type: custom:stack-in-card
            mode: horizontal
            cards:
              - type: custom:decluttering-card
                template: weather_day_template
                variables:
                  - index: 0
              - type: custom:decluttering-card
                template: weather_day_template
                variables:
                  - index: 1
              - type: custom:decluttering-card
                template: weather_day_template
                variables:
                  - index: 2
              - type: custom:decluttering-card
                template: weather_day_template
                variables:
                  - index: 3
              - type: custom:decluttering-card
                template: weather_day_template
                variables:
                  - index: 4
            card_mod:
              style: |
                ha-card:active {
                  transform: scale(0.95);
                  transition: 0s;
                }
        view_layout:
          grid-area: right1
      - type: custom:mod-card #mod-card fix footer because swipe card
        card_mod:
          style: |
            @media (max-width: 600px) {
              ha-card {
                margin-bottom: 80px;
              }
            }
        card:
          type: vertical-stack
          cards:
            - type: custom:mushroom-title-card
              title: ""
              subtitle: Autres news
            - type: custom:mod-card
              card_mod:
                style:
                  swipe-card$: >
                    @media (min-width: 1200px) and (max-width: 1300px) {
                      .swiper-wrapper {
                        padding-bottom: 10% !important;
                      }
                    }
                    @media (min-width: 0px) {
                      .swiper-wrapper {
                        padding-bottom: 50px !important;
                      }
                      div > div.swiper-pagination.swiper-pagination-bullets {
                        bottom: 14px;
                      }
                    } 
                    div > div.swiper-pagination.swiper-pagination-bullets >
                    span.swiper-pagination-bullet.swiper-pagination-bullet-active {
                      background: white;
                    }
                    div > div.swiper-pagination.swiper-pagination-bullets > span {
                      background: white;
                    }
              card:
                type: custom:swipe-card
                parameters:
                  spaceBetween: 8
                  pagination:
                    type: bullets
                    color: white
                cards:
                  - type: custom:mod-card
                    card:
                      type: custom:stack-in-card
                      mode: vertical
                      cards:
                        - type: custom:layout-card
                          layout_type: grid
                          layout:
                            grid-template-columns: 70% 30%
                            grid-gap: 0px;
                          cards:
                            - type: custom:mushroom-template-card
                              entity: sensor.yahoofinance_sxr8_de
                              primary: ETF S&P500
                              secondary: '{{state_attr(entity, "friendly_name")}}'
                              icon: '{{state_attr(entity,"icon")}}'
                              icon_color: grey
                              tap_action:
                                action: more-info
                              card_mod:
                                style:
                                  mushroom-state-info$: |
                                    .secondary {
                                      white-space: normal !important;
                                      overflow: hidden;
                                    }
                                  .: |
                                    ha-card {
                                      box-shadow: none;
                                      margin: -4px -7px;
                                      background: none
                                    }
                                    ha-card:after {
                                      content: '';
                                      border-bottom: solid 2px rgba(var(--rgb-disabled), 0.2);
                                      margin: 12px -92px -12px 0px;
                                    }
                            - type: custom:mushroom-template-card
                              entity: sensor.yahoofinance_sxr8_de
                              primary: "{{states(entity)}}"
                              secondary: >
                                {% if state_attr(entity, 'trending') == "up" %}+{%
                                endif

                                %}{{state_attr(entity,'regularMarketChangePercent')}}%
                              card_mod:
                                style:
                                  mushroom-state-info$: |
                                    * {
                                      text-align: end;
                                      font-family: 'SF Pro Rounded', system-ui;
                                    }
                                  .: |
                                    ha-card {
                                      --card-secondary-color: {% if state_attr(config.entity, 'trending') == "up" %}rgba(var(--rgb-green)){% else %}rgba(var(--rgb-red)){% endif %};
                                      margin: -3px 2px -6px 0px;
                                      box-shadow: none;
                                      background: none;

                                    }
                        - type: custom:layout-card
                          layout_type: grid
                          layout:
                            grid-template-columns: 70% 30%
                            grid-gap: 0px;
                          cards:
                            - type: custom:mushroom-template-card
                              entity: sensor.yahoofinance_aapl
                              primary: Apple
                              secondary: '{{state_attr(entity, "friendly_name")}}'
                              icon: mdi:apple
                              icon_color: grey
                              tap_action:
                                action: more-info
                              card_mod:
                                style:
                                  mushroom-state-info$: |
                                    .secondary {
                                      white-space: normal !important;
                                      overflow: hidden;
                                    }
                                  .: |
                                    ha-card {
                                      box-shadow: none;
                                      margin: -4px -7px;
                                      background: none;
                                    }
                                    ha-card:after {
                                      content: '';
                                      border-bottom: solid 2px rgba(var(--rgb-disabled), 0.2);
                                      margin: 12px -92px -12px 0px;
                                    }
                            - type: custom:mushroom-template-card
                              entity: sensor.yahoofinance_aapl
                              primary: "{{states(entity)}}"
                              secondary: >
                                {% if state_attr(entity, 'trending') == "up" %}+{%
                                endif

                                %}{{state_attr(entity,'regularMarketChangePercent')}}%
                              card_mod:
                                style:
                                  mushroom-state-info$: |
                                    * {
                                      text-align: end;
                                      font-family: 'SF Pro Rounded', system-ui;
                                    }
                                  .: |
                                    ha-card {
                                      --card-secondary-color: {% if state_attr(config.entity, 'trending') == "up" %}rgba(var(--rgb-green)){% else %}rgba(var(--rgb-red)){% endif %};
                                      margin: -3px 2px -6px 0px;
                                      box-shadow: none;
                                      background: none;
                                    }
                        - type: custom:layout-card
                          layout_type: grid
                          layout:
                            grid-template-columns: 70% 30%
                            grid-gap: 0px;
                          cards:
                            - type: custom:mushroom-template-card
                              entity: sensor.yahoofinance_btc_eur
                              primary: BTC
                              secondary: '{{state_attr(entity, "friendly_name")}}'
                              icon: mdi:bitcoin
                              icon_color: grey
                              tap_action:
                                action: more-info
                              card_mod:
                                style:
                                  mushroom-state-info$: |
                                    .secondary {
                                      white-space: normal !important;
                                      overflow: hidden;
                                    }
                                  .: |
                                    ha-card {
                                      box-shadow: none;
                                      margin: -4px -7px;
                                      background: none;
                                    }
                            - type: custom:mushroom-template-card
                              entity: sensor.yahoofinance_btc_eur
                              primary: "{{states(entity)}}"
                              secondary: >
                                {% if state_attr(entity, 'trending') == "up" %}+{%
                                endif

                                %}{{state_attr(entity,'regularMarketChangePercent')}}%
                              card_mod:
                                style:
                                  mushroom-state-info$: |
                                    * {
                                      text-align: end;
                                      font-family: 'SF Pro Rounded', system-ui;
                                    }
                                  .: |
                                    ha-card {
                                      --card-secondary-color: {% if state_attr(config.entity, 'trending') == "up" %}rgba(var(--rgb-green)){% else %}rgba(var(--rgb-red)){% endif %};
                                      margin: -3px 2px -6px 0px;
                                      box-shadow: none;
                                      background: none;
                                    }
                  - type: custom:mod-card
                    card:
                      type: custom:stack-in-card
                      mode: vertical
                      cards:
                        - type: custom:layout-card
                          layout_type: grid
                          layout:
                            grid-template-columns: 70% 30%
                            grid-gap: 0px;
                          cards:
                            - type: custom:mushroom-template-card
                              entity: sensor.yahoofinance_ntoa_f
                              primary: Nintendo
                              secondary: '{{state_attr(entity, "friendly_name")}}'
                              icon: mdi:nintendo-switch
                              icon_color: grey
                              tap_action:
                                action: more-info
                              card_mod:
                                style:
                                  mushroom-state-info$: |
                                    .secondary {
                                      white-space: normal !important;
                                      overflow: hidden;
                                    }
                                  .: |
                                    ha-card {
                                      box-shadow: none;
                                      margin: -4px -7px;
                                      background: none;
                                    }
                                    ha-card:after {
                                      content: '';
                                      border-bottom: solid 2px rgba(var(--rgb-disabled), 0.2);
                                      margin: 12px -92px -12px 0px;
                                    }
                            - type: custom:mushroom-template-card
                              entity: sensor.yahoofinance_ntoa_f
                              primary: "{{states(entity)}}"
                              secondary: >
                                {% if state_attr(entity, 'trending') == "up" %}+{%
                                endif

                                %}{{state_attr(entity,'regularMarketChangePercent')}}%
                              card_mod:
                                style:
                                  mushroom-state-info$: |
                                    * {
                                      text-align: end;
                                      font-family: 'SF Pro Rounded', system-ui;
                                    }
                                  .: |
                                    ha-card {
                                      --card-secondary-color: {% if state_attr(config.entity, 'trending') == "up" %}rgba(var(--rgb-green)){% else %}rgba(var(--rgb-red)){% endif %};
                                      margin: -3px 2px -6px 0px;
                                      box-shadow: none;
                                      background: none;
                                    }
                        - type: custom:layout-card
                          layout_type: grid
                          layout:
                            grid-template-columns: 70% 30%
                            grid-gap: 0px;
                          cards:
                            - type: custom:mushroom-template-card
                              entity: sensor.yahoofinance_nvda
                              primary: Nvidia
                              secondary: '{{state_attr(entity, "friendly_name")}}'
                              icon: mdi:expansion-card
                              icon_color: grey
                              tap_action:
                                action: more-info
                              card_mod:
                                style:
                                  mushroom-state-info$: |
                                    .secondary {
                                      white-space: normal !important;
                                      overflow: hidden;
                                    }
                                  .: |
                                    ha-card {
                                      box-shadow: none;
                                      margin: -4px -7px;
                                      background: none;
                                    }
                                    ha-card:after {
                                      content: '';
                                      border-bottom: solid 2px rgba(var(--rgb-disabled), 0.2);
                                      margin: 12px -92px -12px 0px;
                                    }
                            - type: custom:mushroom-template-card
                              entity: sensor.yahoofinance_nvda
                              primary: "{{states(entity)}}"
                              secondary: >
                                {% if state_attr(entity, 'trending') == "up" %}+{%
                                endif

                                %}{{state_attr(entity,'regularMarketChangePercent')}}%
                              card_mod:
                                style:
                                  mushroom-state-info$: |
                                    * {
                                      text-align: end;
                                      font-family: 'SF Pro Rounded', system-ui;
                                    }
                                  .: |
                                    ha-card {
                                      --card-secondary-color: {% if state_attr(config.entity, 'trending') == "up" %}rgba(var(--rgb-green)){% else %}rgba(var(--rgb-red)){% endif %};
                                      margin: -3px 2px -6px 0px;
                                      box-shadow: none;
                                      background: none;
                                    }
        view_layout:
          grid-area: right2
  - theme: Adaptive Mushroom
    title: Automatisation
    path: automation
    icon: mdi:creation
    type: custom:grid-layout
    layout:
      grid-template-columns: 0em 74px 30% 30% 30% auto
      grid-template-rows: grid-title-row-height auto auto auto
      grid-gap: 0.5em
      grid-template-areas: |
        ". .   title  title  .      ."
        ". nav left1 center1 right1 ."
        ". nav left2 center2 right2 ."
        ". nav .     .       .       ."
      mediaquery:
        "(max-width: 600px)":
          grid-template-columns: 3% 94% 3%
          grid-template-rows: auto
          grid-gap: 0em
          grid-template-areas: |
            ". title ."
            ". left1 ."
            ". left2 ."
            ". center1 ."
            ". center2 ."
            ". right1 ."
            ". right2 ."
            "footer footer footer"
    visible:
      - user: 12345678901234567000
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: " "
          - type: custom:decluttering-card
            template: side-nav
            variables:
              - dashboard-name: lovelace
              - active-view: automation
        view_layout:
          grid-area: nav
          show:
            mediaquery: "(min-width: 600px)"
      - type: custom:stack-in-card
        mode: horizontal
        cards:
          - type: custom:decluttering-card
            template: bottom-nav
            variables:
              - dashboard-name: lovelace
              - active-view: automation
        card_mod:
          style: |
            ha-card {
              z-index:4;
              position: fixed;
              bottom: 10px;
              left: 18px;
              width: calc(100% - 36px);
            }
            :host {
              border-radius: var(--ha-card-border-radius, -2px) !important;
            }
        view_layout:
          grid-area: footer
          show:
            mediaquery: "(max-width: 600px)"
      - type: custom:mod-card
        card:
          type: custom:mushroom-title-card
          title: Automatisation
          subtitle: >
            Vous avez {{ states.automation | list | length }} automatisations and {{ states.script | list | length }} scripts in total
        card_mod:
          style:
            mushroom-title-card$: |
              h1 {
                --title-font-size: 26px;
                --title-font-weight: bold;
                --title-line-height: 1;
              }
              h2 {
                --title-font-size: 16px;
              }
              .header {
                --title-padding: 12px 12px 0px;
              }
        view_layout:
          grid-area: title
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Automatisation
            subtitle: ""
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:decluttering-card
                template: automation_template
                variables:
                  - entity: automation.turn_off_gps_william_absence
                  - primary: GPS William Absence
              - type: custom:decluttering-card
                template: automation_template
                variables:
                  - entity: automation.turn_off_gps_papa_absence
                  - primary: GPS Papa Absence
              - type: custom:decluttering-card
                template: automation_template
                variables:
                  - entity: automation.turn_off_gps_home_absence
                  - primary: GPS Maison Absence
            layout:
              column_widths: 51% 51%
              width: 145
              margin: 0px
              card_margin: 4px 4px 8px
              min_height: 1
        view_layout:
          grid-area: left1
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Temperature
            subtitle: ""
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:decluttering-card
                template: thermometer_template
                variables:
                  - primary: William
                  - temperature: sensor.thermometer_chambre_william_temperature
                  - humidity: sensor.thermometer_chambre_william_humidite
                  - battery: sensor.thermometer_chambre_william_batterie
                  - color: var(--mush-rgb-purple)
                  - icon: mdi:bed
              - type: custom:decluttering-card
                template: thermometer_template
                variables:
                  - primary: Papa
                  - temperature: sensor.thermometer_chambre_papa_temperature
                  - humidity: sensor.thermometer_chambre_papa_humidite
                  - battery: sensor.thermometer_chambre_papa_batterie
                  - color: var(--mush-rgb-green)
                  - icon: mdi:bed
              - type: custom:decluttering-card
                template: thermometer_template
                variables:
                  - primary: Salon
                  - temperature: sensor.thermometer_salon_temperature
                  - humidity: sensor.thermometer_salon_humidite
                  - battery: sensor.thermometer_salon_batterie
                  - color: var(--mush-rgb-amber)
                  - icon: mdi:sofa
              - type: custom:decluttering-card
                template: thermometer_template
                variables:
                  - primary: Cusine
                  - temperature: sensor.thermometer_cuisine_temperature
                  - humidity: sensor.thermometer_cuisine_humidite
                  - battery: sensor.thermometer_cuisine_batterie
                  - color: var(--mush-rgb-red)
                  - icon: mdi:fridge
              - type: custom:decluttering-card
                template: thermometer_template
                variables:
                  - primary: Salle de bain
                  - temperature: sensor.thermometer_chambre_papa_temperature
                  - humidity: sensor.thermometer_chambre_papa_humidite
                  - battery: sensor.thermometer_chambre_papa_batterie
                  - color: var(--mush-rgb-cyan)
                  - icon: mdi:shower
              - type: custom:stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.average_temperature
                    primary: "Maison"
                    secondary: >
                      {{states("sensor.average_temperature") | round(1)}}º / {{states("sensor.average_humidity") | round(1)}}%
                    icon: mdi:home
                    icon_color: var(--mush-rgb-orange)
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          background-color: transparent;
                          box-shadow: none;
                          margin-bottom: -30px;
                          z-index: 3;
                        }
                  - type: custom:layout-card
                    cards:
                      - type: custom:mini-graph-card
                        entities:
                          - entity: sensor.average_temperature
                            name: Température
                            color: rgb(var(--mush-rgb-orange))
                          - entity: sensor.average_humidity
                            name: Humidité
                            color: rgb(var(--mush-rgb-white))
                            y_axis: secondary
                        hours_to_show: 24
                        line_width: 8
                        animate: true
                        show:
                          name: false
                          icon: false
                          state: false
                          legend: false
                          extrema: false
                          fill: fade
                          points: false
                          labels: false
                          labels_secondary: false
                        card_mod:
                          style: |
                            ha-card {
                              background-color: transparent;
                              z-index: 2;
                              box-shadow: none;
                            }
            layout:
              column_widths: 51% 51%
              width: 145
              margin: 0px
              card_margin: 4px 4px 8px
              min_height: 1
        view_layout:
          grid-area: center1
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Cartes
            subtitle: ""
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Cartes
            subtitle: ""
          - type: custom:mod-card
            card_mod:
              style: |
                @media (max-width: 600px) {
                  ha-card {
                    margin-bottom: 80px; /* add margin before footer */
                  }
                }
            card:
              type: map
              default_zoom: 14
              dark_mode: true
              entities:
                - person.papa
                - person.kaoru
                - device_tracker.cles
                - device_tracker.portefeuille
                - device_tracker.sac_photo
                - device_tracker.velo_de_course
        view_layout:
          grid-area: right1
  - theme: Adaptive Mushroom
    icon: mdi:cog
    title: Système
    path: system
    type: custom:grid-layout
    layout:
      grid-template-columns: 0em 74px 30% 30% 30% auto
      grid-template-rows: grid-title-row-height auto auto auto
      grid-gap: 0.5em
      grid-template-areas: |
        ". . title title . ."
        ". nav left2 center1 right1 ."
        ". nav left1 center1 right1 ."
        ". nav left3 center2 right1 ."
      mediaquery:
        "(max-width: 600px)":
          grid-template-columns: 3% 94% 3%
          grid-template-rows: auto
          grid-gap: 0em
          grid-template-areas: |
            ". title ."
            ". left2 ."
            ". left1 ."
            ". left3 ."
            ". center1 ."
            ". center2 ."
            ". right1 ."
            ". right2 ."
            "footer footer footer"
    visible:
      - user: 12345678901234567000
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: " "
          - type: custom:decluttering-card
            template: side-nav
            variables:
              - dashboard-name: lovelace
              - active-view: system
        view_layout:
          grid-area: nav
          show:
            mediaquery: "(min-width: 600px)"
      - type: custom:stack-in-card
        mode: horizontal
        cards:
          - type: custom:decluttering-card
            template: bottom-nav
            variables:
              - dashboard-name: lovelace
              - active-view: system
        card_mod:
          style: |
            ha-card {
              z-index:4;
              position: fixed;
              bottom: 10px;
              left: 18px;
              width: calc(100% - 36px);
            }
            :host {
              border-radius: var(--ha-card-border-radius, -2px) !important;
            }
        view_layout:
          grid-area: footer
          show:
            mediaquery: "(max-width: 600px)"
      - type: custom:mod-card
        card:
          type: custom:mushroom-title-card
          title: Système
          subtitle: "Welcome! Everything is fine."
        card_mod:
          style:
            mushroom-title-card$: |
              h1 {
                --title-font-size: 26px;
                --title-font-weight: bold;
                --title-line-height: 1;
              }
              h2 {
                --title-font-size: 16px;
              }
              .header {
                --title-padding: 12px 12px 0px;
              }
        view_layout:
          grid-area: title
      - type: vertical-stack
        cards:
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-colums: 70% 30%
              grid-template-rows: auto
              grid-template-areas: |
                "left right"
              grid-gap: 0px
              margin: "-4px"
            cards:
              - type: custom:mushroom-title-card
                title: Famille
                subtitle: ""
                view_layout:
                  grid-area: left
          - type: custom:stack-in-card
            mode: horizontal
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 50px auto
                  grid-gap: 0px
                  margin: "-4px -4px -8px 8px"
                cards:
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:mushroom-person-card
                entity: person.kaoru
                icon_type: entity-picture
                icon: mdi:face-man
                tap_action: !include popup/person_william.yaml
                card_mod:
                  style: |
                    ha-card {
                        {% if is_state(config.entity, 'home') %}
                          background: rgba(var(--mush-rgb-green), 0.8);
                        {% endif %}
                          --card-primary-color: rgb(var(--mush-rgb-white));
                          --card-secondary-color: rgb(230,230,230);
                    }
                    ha-card:active {
                      transform: scale(0.95);
                      transition: 0s;
                    }
              - type: custom:mushroom-person-card
                entity: person.papa
                icon: mdi:face-man
                icon_type: entity-picture
                tap_action: !include popup/person_papa.yaml
                card_mod:
                  style: |
                    ha-card {
                        {% if is_state(config.entity, 'home') %}
                          background: rgba(var(--mush-rgb-green), 0.8);
                        {% endif %}
                          --card-primary-color: rgb(var(--mush-rgb-white));
                          --card-secondary-color: rgb(230,230,230);
                    }
                    ha-card:active {
                      transform: scale(0.95);
                      transition: 0s;
                    }
          - type: custom:mushroom-title-card
            title: Internet
          - type: custom:vertical-stack-in-card
            cards:
              - type: custom:mushroom-template-card
                primary: Ethernet
                secondary: Connecté
                icon: mdi:ethernet
                entity: sensor.speedtest_download
                icon_color: blue
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      title: Ethernet
                      content:
                        type: vertical-stack
                        cards:
                          - type: custom:mushroom-title-card
                            title: Paquets
                            subtitle: ""
                          - type: custom:stack-in-card
                            cards:
                              - type: horizontal-stack
                                cards:
                                  - type: custom:mushroom-entity-card
                                    entity: sensor.system_monitor_paquets_entrant_via_enp6s18
                                    name: Download
                                    icon: mdi:download
                                    icon_color: deep-orange
                                  - type: custom:mushroom-entity-card
                                    entity: sensor.system_monitor_paquets_sortants_via_enp6s18
                                    name: Upload
                                    icon: mdi:upload
                                    icon_color: blue
                              - type: custom:mini-graph-card
                                entities:
                                  - entity: sensor.system_monitor_paquets_entrant_via_enp6s18
                                    name: Download
                                    color: rgb(var(--mush-rgb-deep-orange))
                                  - entity: sensor.system_monitor_paquets_sortants_via_enp6s18
                                    name: Upload
                                hours_to_show: 8
                                hour24: true
                                points_per_hour: 24
                                aggregate_func: median
                                line_width: 3
                                font_size: 90
                                animate: true
                                show:
                                  name: false
                                  icon: false
                                  state: false
                                  labels: true
                                  legend: false
                                  extrema: true
                                  fill: fade
                card_mod:
                  style: |
                    ha-card {
                      background: none;
                    }
              - type: custom:layout-card
                layout_type: custom:grid-layout
                cards:
                  - type: custom:button-card
                    entity: sensor.speedtest_download
                    layout: icon_name
                    name: |
                      [[[ return Math.round(entity.state) ]]]
                    icon: mdi:arrow-down
                    tap_action:
                      action: more-info
                    show_icon: true
                    show_name: true
                    styles:
                      card:
                        - box-shadow: none
                        - padding: 0px
                        - background-color: rgba(var(--cstm-rgb-on-secondary),0.05)
                        - border-radius: var(--mush-control-border-radius)
                        - place-self: center
                        - height: var(--mush-control-height)
                      name:
                        - font-size: 16px
                      icon:
                        - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                    size: 20px
                    view_layout:
                      grid-area: item1
                  - type: custom:button-card
                    entity: sensor.speedtest_upload
                    icon: mdi:arrow-up
                    tap_action:
                      action: more-info
                    show_icon: true
                    show_name: false
                    styles:
                      card:
                        - box-shadow: none
                        - padding: 0px
                        - background-color: rgba(var(--cstm-rgb-on-secondary),0.05)
                        - border-radius: var(--mush-control-border-radius)
                        - place-self: center
                        - height: var(--mush-control-height)
                      icon:
                        - color: rgba(var(--cstm-rgb-on-secondary),0.9)
                    size: 20px
                    view_layout:
                      grid-area: item2
                layout:
                  grid-template-columns: 1fr 52px
                  grid-template-rows: min-content
                  grid-template-areas: |
                    "item1 item2"
                  gap: 0px
                  margin: "-4px 8px 4px"
          - type: custom:stack-in-card
            cards:
              - type: custom:mushroom-template-card
                entity: ""
                primary: Speedtest
                secondary: ""
                multiline_secondary: true
                icon: mdi:web-refresh
                icon_color: grey
                tap_action:
                  action: call-service
                  service: automation.trigger
                  data:
                    skip_condition: true
                  target:
                    entity_id: automation.run_speedtest_addon_every_12_hours
              - type: custom:mushroom-template-card
                card_mod:
                  style: |
                    ha-card {
                      margin: -10px 12px 0px 12px;
                      border-bottom: solid 2px rgba(var(--rgb-disabled), 0.2);
                    }
              - square: false
                columns: 3
                type: grid
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:apexcharts-card
                        chart_type: radialBar
                        series:
                          - entity: sensor.speedtest_download
                            color: rgb(255, 87, 34)
                            max: 1000
                            show:
                              legend_value: false
                        apex_config:
                          plotOptions:
                            radialBar:
                              offsetY: 0
                              startAngle: -108
                              endAngle: 108
                              hollow:
                                size: 80%
                              dataLabels:
                                name:
                                  show: false
                                value:
                                  show: false
                              track:
                                strokeWidth: 70%
                                margin: 0
                          fill:
                            type: gradient
                            gradient:
                              shade: light
                              type: horizontal
                              shadeIntensity: 0.3
                              inverseColors: false
                              opacityFrom: 1
                              opacityTo: 1
                              stops:
                                - 0
                                - 50
                                - 55
                                - 90
                          legend:
                            show: false
                          chart:
                            height: 130
                        card_mod:
                          style: |
                            ha-card {
                              box-shadow: none;
                              background: none;
                            }
                            @media (max-width: 600px) {
                              ha-card {
                                margin: -10px;
                              }
                            }
                      - type: custom:mushroom-entity-card
                        entity: sensor.speedtest_download
                        primary_info: state
                        secondary_info: name
                        name: Download
                        icon: mdi:download
                        icon_color: deep-orange
                        layout: vertical
                        card_mod:
                          style: |
                            ha-card {
                              margin-top: -70px;
                              margin-left: 3px;
                              margin-right: auto;
                              margin-bottom: 2px;
                              box-shadow: none;
                              background: none;
                            }
                            @media (max-width: 600px) {
                              ha-card {
                                margin-top: -50px;
                              }
                            }
                  - type: vertical-stack
                    cards:
                      - type: custom:apexcharts-card
                        chart_type: radialBar
                        series:
                          - entity: sensor.speedtest_upload
                            color: rgb(33, 150, 243)
                            max: 1000
                            show:
                              legend_value: false
                        apex_config:
                          plotOptions:
                            radialBar:
                              offsetY: 0
                              startAngle: -108
                              endAngle: 108
                              hollow:
                                size: 80%
                              dataLabels:
                                name:
                                  show: false
                                value:
                                  show: false
                              track:
                                strokeWidth: 70%
                                margin: 0
                          fill:
                            type: gradient
                            gradient:
                              shade: light
                              type: horizontal
                              shadeIntensity: 0.3
                              inverseColors: false
                              opacityFrom: 1
                              opacityTo: 1
                              stops:
                                - 0
                                - 50
                                - 55
                                - 90
                          legend:
                            show: false
                          chart:
                            height: 130
                        card_mod:
                          style: |
                            ha-card {
                              box-shadow: none;
                              background: none;
                            }
                            @media (max-width: 600px) {
                              ha-card {
                                margin: -10px;
                              }
                            }
                      - type: custom:mushroom-entity-card
                        entity: sensor.speedtest_upload
                        primary_info: state
                        secondary_info: name
                        name: Upload
                        icon: mdi:upload
                        icon_color: blue
                        layout: vertical
                        card_mod:
                          style: |
                            ha-card {
                              margin-top: -70px;
                              margin-left: 3px;
                              margin-right: auto;
                              margin-bottom: 2px;
                              box-shadow: none;
                              background: none;
                            }
                            @media (max-width: 600px) {
                              ha-card {
                                margin-top: -50px;
                              }
                            }
                  - type: vertical-stack
                    cards:
                      - type: custom:apexcharts-card
                        chart_type: radialBar
                        series:
                          - entity: sensor.speedtest_ping
                            color: rgb(17, 246, 211)
                            show:
                              legend_value: false
                            data_generator: |
                              const max = 100;
                              const val = entity.state ? parseFloat(entity.state) : 0;
                              return [[new Date(), Math.max(0, Math.min(max, max - val))]];
                        apex_config:
                          plotOptions:
                            radialBar:
                              offsetY: 0
                              startAngle: -108
                              endAngle: 108
                              hollow:
                                size: 80%
                              dataLabels:
                                name:
                                  show: false
                                value:
                                  show: false
                              track:
                                strokeWidth: 70%
                                margin: 0
                          fill:
                            type: gradient
                            gradient:
                              shade: light
                              type: horizontal
                              shadeIntensity: 0.3
                              inverseColors: false
                              opacityFrom: 1
                              opacityTo: 1
                              stops:
                                - 0
                                - 50
                                - 55
                                - 90
                          legend:
                            show: false
                          chart:
                            height: 130
                        card_mod:
                          style: |
                            ha-card {
                              box-shadow: none;
                              background: none;
                            }
                            @media (max-width: 600px) {
                              ha-card {
                                margin: -10px;
                              }
                            }
                      - type: custom:mushroom-entity-card
                        entity: sensor.speedtest_ping
                        primary_info: state
                        secondary_info: name
                        name: Ping
                        icon_color: teal
                        icon: mdi:wan
                        layout: vertical
                        card_mod:
                          style: |
                            ha-card {
                              margin-top: -70px;
                              margin-left: 3px;
                              margin-right: auto;
                              margin-bottom: 2px;
                              box-shadow: none;
                              background: none;
                            }
                            @media (max-width: 600px) {
                              ha-card {
                                margin-top: -50px;
                              }
                            }
                card_mod:
                  style: |
                    ha-card {
                      box-shadow: none;
                      background: none;
                    }
        view_layout:
          grid-area: left2
      - type: vertical-stack
        cards:
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-colums: 70% 30%
              grid-template-rows: auto
              grid-template-areas: |
                "left right"
              grid-gap: 0px
              margin: "-4px"
            cards:
              - type: custom:mushroom-title-card
                title: HA
                subtitle: ""
                title_tap_action:
                  action: navigate
                  navigation_path: /config/hardware
                view_layout:
                  grid-area: left
          - type: custom:stack-in-card
            mode: horizontal
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 50px auto
                  grid-gap: 0px
                  margin: "-4px -4px -8px 8px"
                cards:
                  - type: custom:mushroom-template-card
                    primary: ""
                    secondary: ""
                    icon: mdi:sd
                    entity: sensor.system_monitor_utilisation_du_disque
                    icon_color: grey
                    tap_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none;
                          background: none;
                        }
                  - type: custom:bar-card
                    entity: sensor.system_monitor_utilisation_du_disque
                    name: Stockage
                    color: rgba(var(--cstm-rgb-on), 0.4)
                    height: 42px
                    min: "0"
                    max: "100"
                    entity_row: false
                    positions:
                      icon: "off"
                      indicator: "off"
                    card_mod:
                      style: |
                        ha-card {
                          padding: 0px;
                          margin: -4px 0px -4px 0px;
                          box-shadow: none;
                          background: none;
                          --bar-card-border-radius: 14px;
                        }
                        bar-card-value {
                          margin: 12px;
                          font-size: 14px;
                          font-weight: bolder;
                        }
                        bar-card-name {
                          margin: 12px;
                          font-size: 14px;
                          font-weight: bolder;
                        }
                        bar-card-backgroundbar {
                          opacity: 0.2;
                          filter: brightness(1);
                        }

          - type: custom:stack-in-card
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.memory_use_percent
                    primary: "{{states(entity) | round(1)}} %"
                    secondary: RAM
                    icon: mdi:memory
                    icon_color: purple
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-entity-card
                    entity: sensor.processor_use
                    primary_info: state
                    secondary_info: name
                    name: CPU
                    icon_color: blue
                    tap_action:
                      action: more-info
              - type: custom:mini-graph-card
                entities:
                  - entity: sensor.memory_use_percent
                    name: RAM
                    color: rgb(var(--mush-rgb-purple))
                  - entity: sensor.processor_use
                    name: CPU
                    color: rgb(var(--mush-rgb-blue))
                    y_axis: secondary
                hours_to_show: 12
                hour24: true
                points_per_hour: 4
                line_width: 3
                font_size: 90
                animate: true
                show:
                  name: false
                  icon: false
                  state: false
                  legend: false
                  extrema: true
                  fill: fade

          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:mushroom-template-card
                primary: "Tablette"
                icon: mdi:tablet
                icon_color: grey
                tap_action: !include popup/system_tablet.yaml
                card_mod:
                  style: |
                    ha-card:active {
                      transform: scale(0.95);
                      transition: 0s;
                    }
              - type: custom:mushroom-template-card
                primary: Redémarrer HA
                icon: mdi:restart
                icon_color: grey
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      card_mod:
                        style:
                          ha-dialog$: |
                            div.mdc-dialog div.mdc-dialog__scrim {
                              backdrop-filter: blur(10px);
                            }
                            div.mdc-dialog .mdc-dialog__container .mdc-dialog__surface {
                              background: #212526;
                            }
                          .: |
                            ha-dialog-header {
                                  background-color: #282e2e;
                            }
                      title: Tablette
                      content:
                        type: vertical-stack
                        cards:
                          - type: markdown
                            content: Voulez-vous redémarrer Home Assistant ?
                            card_mod:
                              style: |
                                ha-card {
                                  box-shadow: none;
                                  background: none;
                                }
                          - type: horizontal-stack
                            cards:
                              - type: custom:mushroom-template-card
                                primary: Oui
                                icon: mdi:check
                                tap_action:
                                  action: call-service
                                  service: homeassistant.restart
                                card_mod:
                                  style: |
                                    ha-card:active {
                                      transform: scale(0.95);
                                      transition: 0s
                                    }
                              - type: custom:mushroom-template-card
                                primary: Non
                                icon: mdi:close
                                tap_action:
                                  action: fire-dom-event
                                  browser_mod:
                                    service: browser_mod.close_popup
                                card_mod:
                                  style: |
                                    ha-card:active {
                                      transform: scale(0.95);
                                      transition: 0s
                                    }
                card_mod:
                  style: |
                    ha-card:active {
                      transform: scale(0.95);
                      transition: 0s;
                    }

          - type: custom:mushroom-title-card
            title: Developer tools
          - square: false
            columns: 2
            type: grid
            cards:
              - type: custom:mushroom-template-card
                primary: Refresh theme
                secondary: ""
                icon: mdi:refresh
                tap_action:
                  action: call-service
                  service: frontend.reload_themes
                  target: {}
                icon_color: grey
                card_mod:
                  style: |
                    ha-card:active {
                      transform: scale(0.95);
                      transition: 0s;
                    }
              - type: custom:mushroom-entity-card
                entity: sensor.last_boot
                icon_color: grey
                secondary_info: name
                primary_info: state
                name: Last reboot
                tap_action:
                  action: more-info
                card_mod:
                  style: |
                    ha-card:active {
                      transform: scale(0.95);
                      transition: 0s;
                    }
          - type: conditional
            conditions:
              - condition: screen
                media_query: "(min-width: 0px) and (max-width: 767px), (min-width: 1281px)"
            card:
              type: custom:search-card
        view_layout:
          grid-area: center1
      - type: custom:mod-card
        card_mod:
          style: |
            @media (max-width: 600px) {
              ha-card {
                margin-bottom: 80px; /* add margin before footer */
              }
            }
        card:
          type: vertical-stack
          cards:
            - type: custom:mushroom-title-card
              title: Software
            - type: custom:mushroom-template-card
              primary: Back-ups
              secondary: >-
                Dernière sauvegarde : 
                {% set last = states('sensor.backup_derniere_sauvegarde_automatique_reussie') %}
                {% if last in ['unknown', 'unavailable', 'none'] %}
                    inconnue
                {% else %}
                    {% set delta = (now().timestamp() - as_timestamp(last)) / 86400 %}
                    {% if delta < 1 %}
                        ce matin
                    {% elif delta < 2 %}
                        hier
                    {% else %}
                        {{ delta | round(0, 'floor') }} jours
                    {% endif %}
                {% endif %}

                Dernière tentative : 
                {% set attempt = states('sensor.backup_derniere_tentative_de_sauvegarde_automatique') %}
                {% if attempt in ['unknown', 'unavailable', 'none'] %}
                    inconnue
                {% else %}
                    {% set delta = (now().timestamp() - as_timestamp(attempt)) / 86400 %}
                    {% if delta < 1 %}
                        aujourd'hui
                    {% elif delta < 2 %}
                        hier
                    {% else %}
                        {{ delta | round(0, 'floor') }} jours
                    {% endif %}
                {% endif %}
              icon: |-
                {% if states('event.backup_sauvegarde_automatique') == "off" %}
                  mdi:cloud-check
                {% else %}
                  mdi:cloud-question
                {% endif %}
              multiline_secondary: true
              icon_color: |-
                {% if states('event.backup_sauvegarde_automatique') == "off" %}
                  green
                {% else %}
                  red
                {% endif %}
              tap_action:
                action: navigate
                navigation_path: /config/backup/overview
            - square: false
              columns: 2
              type: grid
              cards:
                - type: custom:mushroom-update-card
                  entity: update.home_assistant_core_update
                  name: HA Core
                  show_buttons_control: true
                  collapsible_controls: true
              layout:
                column_widths: 51% 51%
                width: 145
                margin: 0px
                card_margin: 4px 4px 8px
                min_height: 1
            - type: custom:mushroom-title-card
              title: ""
              subtitle: Add-ons
              subtitle_tap_action:
                action: navigate
                navigation_path: /hassio
            - type: custom:mushroom-template-card
              entity: ""
              icon: |-
                {% if has_value('update.hacs_update') %}
                mdi:store
                {% else %}
                mdi:store-alert
                {% endif %}
              icon_color: |-
                {% if states('update.hacs_update') == "off" %}
                green
                {% else %}
                orange
                {% endif %}
              primary: HACS
              secondary: |-
                {% if has_value('update.hacs_update') %}
                {% if states('update.hacs_update') == "off" %}
                Up-to-date
                {% else %}
                {% for item in state_attr('update.hacs_update', 'repositories') -%}
                  {%- if loop.first %}{{states('update.hacs_update')}} update(s): {% elif loop.last %} en {% else %}, {% endif -%}
                  '{{ item.display_name | lower }}'
                {%- endfor %}
                {% endif %}
                {% else %}
                Pas d'information
                {% endif %}
              multiline_secondary: true
              fill_container: false
              tap_action:
                action: navigate
                navigation_path: ../hacs/entry
              layout:
                column_widths: 51% 51%
                width: 145
                margin: 0px
                card_margin: 4px 4px 8px
                min_height: 1
        view_layout:
          grid-area: right1
title: Home Assistant
