
##########################################################################
#                                                                        #
#                              * SETTINGS *                              #
#                                                                        #
##########################################################################

preload_cards:
  [map, iframe, markdown, spotify]
preload_rows:
  [input-select-entity]

anchors:
  ⚓₁: &title
    entity: sensor.placeholder
    tap_action:
      action: none
    hold_action:
      action: none
    type: state-label
  ⚓₂: &title-style
    color: '#bcbebf'
    font-family: SF Text
    font-size: 2.4vw
    font-weight: 500
    max-width: 1px
    cursor: default

button_card_templates: !include button_card_templates.yaml

##########################################################################
#                                                                        #
#                              * LOVELACE *                              #
#                                                                        #
##########################################################################

title: Maison
views:
  - panel: true
    path: default_view
    cards:
      - type: picture-elements
        image: /local/background.png
        elements:

          # markdown fix
          - type: custom:hui-element
            card_type: markdown
            style: {opacity: 0}
            content: preload

          #################################################
          #                                               #
          #                   UNDERBAR                    #
          #                                               #
          #################################################

          - type: custom:hui-markdown-card
            class: coronavirus
            style:
              {top: 93.65%, left: 70.2%}
            content: >

                {% set break = ' ‍ ‍ ‍ ‍ ‍ ‍<font color="#2f3436">|</font> ‍ ‍ ‍ ‍ ‍ ‍' %}
                {% set lights = [states.light.salon_1, states.light.salon_2, states.light.plafond_1, states.light.plafond_2, 
                states.light.yeelight_stripe, states.light.lampe_japonaise] %}   
                {% set lights_on = lights | selectattr('state','eq','on') | list %}
                <font color='#6a7377'>
                <ha-icon icon="mdi:alarm"></ha-icon> <b> {{ states('sensor.next_timer_human') }}</b>{{ break -}}
                <ha-icon icon="mdi:home-thermometer-outline"></ha-icon> <b>  {{ states('sensor.average_temperature') | round }}</b>°C / <b>  {{ states('sensor.average_humidity') | round }}</b>% {{ break -}}
                <ha-icon icon="mdi:weather-cloudy"></ha-icon> <b>{{ state_attr('weather.villeneuve_d_ascq', 'temperature') }}</b>°C {{ break -}}
                <ha-icon icon="mdi:lightbulb"></ha-icon> <b> {{ lights_on | length }} </b>{{ break -}}
                </font>

          ##########################################################################
          #                                                                        #
          #                              * SIDEBAR *                               #
          #                                                                        #
          ##########################################################################

          - type: image
            image: local/sidebar.png
            tap_action:
              action: none
            hold_action:
              action: none
            style:
              {top: 50%, left: 10.6%, width: 21.5%, pointer-events: none, border-right: '1.5px solid rgba(58,69,73,0.2)'}

          #################################################
          #                                               #
          #                   MARKDOWN                    #
          #                                               #
          #################################################

          - type: custom:hui-markdown-card
            class: sidebar
            style:
              {top: 9%, left: 11.1%}
            content: >
              <span>{{ states('sensor.time') }}</span>


              <font color='#6a7377'><b>{{ states('sensor.sidebar_day') }}</b><br>
              <b>{{ states('sensor.sidebar_date') }}</b> </font><br> 
              
              
              <b>{{ states('sensor.sidebar_greeting') }}</b>
              

              <font color='#6a7377'>
              {{ states('sensor.sidebar_weather') }}. 
              
              Il fait {{ states('sensor.average_temperature') | round}}°C dans la maison.
              

              {{ states('sensor.sidebar_active') }}


              {% if is_state('binary_sensor.plex_availability', 'off') %}
              {{'\u26A0\uFE0F'}} Plex est éteint...{% endif %}


              {% if is_state('binary_sensor.rpi_internet_access', 'off') %}
              {{'\u26A0\uFE0F'}} Vérifier l'accès Internet{% endif %}
              </font>

          #################################################
          #                                               #
          #                  INFO BUTTON                  #
          #                                               #
          #################################################

          - type: icon
            icon: mdi:information-outline
            title: Information
            style:
              top: 87.41%
              left: 7.74%
              color: rgb(255, 255, 255)
              opacity: 0.1
              padding: 0.8vw
              --mdc-icon-size: 4vw
            tap_action: !include popup/sidebar_information.yaml

          #################################################
          #                                               #
          #                UPDATES BUTTON                 #
          #                                               #
          #################################################

          - type: icon
            icon: mdi:arrow-up-bold-circle-outline
            title: Update
            style:
              top: 87.41%
              left: 13.64%
              color: rgb(255, 255, 255)
              opacity: 0.1
              padding: 0.8vw
              --mdc-icon-size: 4vw
            tap_action: !include popup/sidebar_update.yaml

          ##########################################################################
          #                                                                        #
          #                             * SALON *                                  #
          #                                                                        #
          ##########################################################################

          - prefix: Salon
            <<: *title
            style:
              top: 9.15%
              left: 25.4%
              <<: *title-style


          #################################################
          #                                               #
          #                  Salon 1                      #
          #                                               #
          #################################################

          - type: custom:button-card
            entity: light.salon_1
            name: Salon 1
            style:
              top: 20.35%
              left: 30.31%
              width: 10%
            custom_fields:
              icon_hue: &icon_hue >
                [[[ const state = entity.state === 'on' ? 'animate' : null;
                return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                <path fill="#9da0a2" d="M27.4 47.3h-4.9s-.7.1-.7.8.4.9.7.9h4.9c.3 0 .7-.1.7-.9s-.7-.8-.7-.8zm3.3-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-3H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9s-.9-.8-.9-.8zm5.2-23.2c-3.3-5.3-7-5.6-10.9-5.6-3.8 0-8.4.4-10.9 5.6-.1.1-.1.3.1.7.4.8 3.3 7.2 3.2 18.8 0 1.1-.1 1.6 0 1.7 0 .1 0 .7 1.1.7h13c1 0 1-.5 1.1-.7v-1.7c-.1-11.6 2.8-18 3.2-18.8.1-.4.1-.5.1-.7"/>
                <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M14.1 15.3c3.4-.3 7-.4 10.9-.4 3.8 0 7.5.2 10.9.4.4-.4.7-.8.9-1.1C39 8.5 38.9 6.5 38.9 6c-.2-4.4-8.4-5-12.1-5h0-3.4c-3.7 0-12 .5-12.1 5 0 .5-.1 2.5 2.1 8.2 0 .3.3.8.7 1.1z"/></svg>`; ]]]
            styles: &icon_hue_styles
              custom_fields:
                icon_hue:
                  [top: 11%, left: 4.5%, width: 3.05vw, position: absolute]
            template: light

          #################################################
          #                                               #
          #                   Salon 2                     #
          #                                               #
          #################################################

          - type: custom:button-card
            entity: light.salon_2
            name: Salon 2
            style:
              top: 20.35%
              left: 41.31%
              width: 10%
            custom_fields:
              icon_hue: *icon_hue
            styles: *icon_hue_styles
            template: light


          #################################################
          #                                               #
          #                   Salon group                 #
          #                                               #
          #################################################

          - type: custom:button-card
            entity: light.salon
            name: GROUP
            style:
              top: 37.9%
              left: 30.31%
              width: 10%
            custom_fields:
              icon_hue: *icon_hue
            styles: *icon_hue_styles
            template: light


          #################################################
          #                                               #
          #               Computer papa                   #
          #                                               #
          #################################################


          - type: custom:button-card
            entity: switch.computer_papa
            triggers_update:
              ['switch.computer_papa', 'input_boolean.computer_papa', 
              'input_boolean.computer_papa_lock', 'script.home_leave']
            style:
              top: 37.9%
              left: 41.31%
              width: 10%
            tap_action:
              action: toggle
              animate_locked: |
                [[[ if (states['input_boolean.computer_papa_lock'].state === 'on' && states['input_boolean.computer_papa'].state === 'off') {
                this.shadowRoot.getElementById('lock').classList.add('locked');
                window.setTimeout(() => { this.shadowRoot.getElementById('lock').classList.remove('locked'); }, 1100) } ]]]
            hold_action: !include popup/computer_papa.yaml
            custom_fields:
              icon_imac: >
                [[[ const state = entity.state === 'on' ? 'animate' : null; 
                return `<svg viewBox="0 0 50 50"><style>@keyframes animate{from{opacity: 0.5; transform: scale(0.6);}100%{opacity: 1;}}.animate{animation: animate 0.8s cubic-bezier(0.25, 1, 0.5, 1); transform-origin: center;}</style>
                <path class="${state}" d="M31.9 44.5c-1-.3-1.9.4-1.9-3.7h-9.9c0 4.2-.9 3.4-1.9 3.7s-.2.7-.2.7h14.1s.8-.3-.2-.7zM47.6 4.8H2.5c-1.1 0-2 .9-2 2v30.1c0 1.1.9 2 2 2h45c1.1 0 2-.9 2-2v-30a1.95 1.95 0 0 0-1.9-2.1zm-.7 26.4H3.2V7.6H47v23.6z"/></svg>`; ]]]
              icon_lock: >
                [[[ const state = states['script.home_leave'].state === 'on' ? 'locked' : null;
                if (states['input_boolean.computer_papa_lock'].state === 'on' && states['input_boolean.computer_papa'].state === 'off') {
                return `<svg viewBox="0 0 50 50"><style>@keyframes locked{from, to{transform: translateX(0);}10%, 30%, 50%, 70%, 90%{transform: translateX(-8%);}20%, 40%, 60%, 80%{transform: translateX(8%);}}.locked{animation: locked 1.1s;}</style>
                <path id="lock" class="${state}" d="M8.2 22.6h2.4v-7.2C10.6 7.5 17.1 1 25 1s14.4 6.4 14.4 14.4v7.2h2.4V49H8.2m26.4-26.4v-7.2c0-5.3-4.3-9.6-9.6-9.6s-9.6 4.3-9.6 9.6v7.2"/></svg>`; } ]]]
            styles:
              custom_fields:
                icon_imac:
                  [fill: "[[[ return entity.state === 'on' ? '#72757c' : '#9da0a2'; ]]]", 
                  top: 8.5%, left: 11%, width: 3.3vw, position: absolute]
                icon_lock:
                  [top: 11%, left: 73%, width: 1.7vw, position: absolute, fill: '#b0b3b6']
            template: ['base', 'loader']





          ##########################################################################
          #                                                                        #
          #                     * CHAMBRE WILLIAM *                                #
          #                                                                        #
          ##########################################################################

          - prefix: William
            <<: *title
            style:
              top: 9.15%
              left: 50.2%
              <<: *title-style

          - type: custom:swipe-card
            start_card: 1
            reset_after: 10
            parameters:
              roundLengths: true
              effect: coverflow
              speed: 650
              spaceBetween: 20
              threshold: 7
              coverflowEffect:
                rotate: 80
                depth: 300
            style:
              top: 12.30%
              left: 60.7%
              width: 20.97%
              height: 1px
              --ha-card-border-radius: .88vw
            cards:

              - type: picture-elements
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
                elements:   


                #################################################
                #                                               #
                #               group bureau                    #
                #                                               #
                #################################################

                - type: custom:button-card
                  entity: light.bureau
                  name: BUREAU
                  style:
                    top: 23.9%
                    left: 23.8%
                    width: 47.7%
                  custom_fields:
                    icon_hue: >
                      [[[ const state = entity.state === 'on' ? 'animate' : null;
                      return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                      <path fill="#9da0a2" d="M27.4 47.3h-4.9s-.7.1-.7.8.4.9.7.9h4.9c.3 0 .7-.1.7-.9s-.7-.8-.7-.8zm3.3-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-3H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9s-.9-.8-.9-.8zm5.2-23.2c-3.3-5.3-7-5.6-10.9-5.6-3.8 0-8.4.4-10.9 5.6-.1.1-.1.3.1.7.4.8 3.3 7.2 3.2 18.8 0 1.1-.1 1.6 0 1.7 0 .1 0 .7 1.1.7h13c1 0 1-.5 1.1-.7v-1.7c-.1-11.6 2.8-18 3.2-18.8.1-.4.1-.5.1-.7"/>
                      <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M14.1 15.3c3.4-.3 7-.4 10.9-.4 3.8 0 7.5.2 10.9.4.4-.4.7-.8.9-1.1C39 8.5 38.9 6.5 38.9 6c-.2-4.4-8.4-5-12.1-5h0-3.4c-3.7 0-12 .5-12.1 5 0 .5-.1 2.5 2.1 8.2 0 .3.3.8.7 1.1z"/></svg>`; ]]]
                  styles: 
                    custom_fields:
                      icon_hue:
                        [top: 11%, left: 4.5%, width: 3.05vw, position: absolute]
                  template: light

                #################################################
                #                                               #
                #               group plafond                   #
                #                                               #
                #################################################

                - type: custom:button-card
                  entity: light.plafond
                  name: PLAFOND
                  style:
                    top: 23.9%
                    left: 76.2%
                    width: 47.7%
                  custom_fields:
                    icon_shade: >
                      [[[ const state = entity.state === 'on' ? 'animate' : null;
                      return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                      <path fill="#9da0a2" d="M26.4 25.6c.6-.3 1.1-.7 1.1-1.3L25 17.9l-2.5 6.4c0 .7.6 1.1 1.1 1.3v20.8h-5.5v2.7h13.7v-2.7h-5.5V25.6z"/>
                      <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M24.6.9l-9.4.5c-.6.1-1.9 0-2.5 2.1s-2.4 9.1-4 16.9c-.2.7-.5 2-.5 2.3s-.4 1.6.9 1.6c.8.1 7.4.3 15.9.3 8.6 0 15.1-.3 15.9-.3 1.3-.1.9-1.3.9-1.6s-.3-1.6-.5-2.3c-1.6-7.8-3.4-14.8-4-16.9s-1.9-2-2.5-2.1c-1.6-.2-6.9-.4-9.4-.5"/> </svg>`;]]]
                  styles:
                    custom_fields:
                      icon_shade:
                        [top: 11%, left: 4.6%, width: 3.05vw, position: absolute]
                  template: light

                #################################################
                #                                               #
                #               group chambre                   #
                #                                               #
                #################################################


                - type: custom:button-card
                  entity: light.chambre
                  name: CHAMBRE
                  style:
                    top: 76.2%
                    left: 23.8%
                    width: 47.7%
                  custom_fields:
                    icon_hue: >
                      [[[ const state = entity.state === 'on' ? 'animate' : null;
                      return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                      <path fill="#9da0a2" d="M27.4 47.3h-4.9s-.7.1-.7.8.4.9.7.9h4.9c.3 0 .7-.1.7-.9s-.7-.8-.7-.8zm3.3-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-3H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9s-.9-.8-.9-.8zm5.2-23.2c-3.3-5.3-7-5.6-10.9-5.6-3.8 0-8.4.4-10.9 5.6-.1.1-.1.3.1.7.4.8 3.3 7.2 3.2 18.8 0 1.1-.1 1.6 0 1.7 0 .1 0 .7 1.1.7h13c1 0 1-.5 1.1-.7v-1.7c-.1-11.6 2.8-18 3.2-18.8.1-.4.1-.5.1-.7"/>
                      <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M14.1 15.3c3.4-.3 7-.4 10.9-.4 3.8 0 7.5.2 10.9.4.4-.4.7-.8.9-1.1C39 8.5 38.9 6.5 38.9 6c-.2-4.4-8.4-5-12.1-5h0-3.4c-3.7 0-12 .5-12.1 5 0 .5-.1 2.5 2.1 8.2 0 .3.3.8.7 1.1z"/></svg>`; ]]]
                  styles: 
                    custom_fields:
                      icon_hue:
                        [top: 11%, left: 4.5%, width: 3.05vw, position: absolute]
                  template: light

                #################################################
                #                                               #
                #                Kaoru computer                 #
                #                                               #
                #################################################

                - type: custom:button-card
                  entity: switch.computer_kaoru
                  triggers_update:
                    ['switch.computer_kaoru', 'input_boolean.computer_kaoru', 
                    'input_boolean.computer_kaoru_lock', 'script.home_leave']
                  style:
                    top: 76.2%
                    left: 76.2%
                    width: 47.7%
                  tap_action:
                    action: toggle
                    animate_locked: |
                      [[[ if (states['input_boolean.computer_kaoru_lock'].state === 'on' && states['input_boolean.computer_kaoru'].state === 'off') {
                      this.shadowRoot.getElementById('lock').classList.add('locked');
                      window.setTimeout(() => { this.shadowRoot.getElementById('lock').classList.remove('locked'); }, 1100) } ]]]
                  hold_action: !include popup/computer_kaoru.yaml
                  double_tap_action: !include popup/computer_kaoru.yaml
                  custom_fields:
                    icon_imac: >
                      [[[ const state = entity.state === 'on' ? 'animate' : null; 
                      return `<svg viewBox="0 0 50 50"><style>@keyframes animate{from{opacity: 0.5; transform: scale(0.6);}100%{opacity: 1;}}.animate{animation: animate 0.8s cubic-bezier(0.25, 1, 0.5, 1); transform-origin: center;}</style>
                      <path class="${state}" d="M31.9 44.5c-1-.3-1.9.4-1.9-3.7h-9.9c0 4.2-.9 3.4-1.9 3.7s-.2.7-.2.7h14.1s.8-.3-.2-.7zM47.6 4.8H2.5c-1.1 0-2 .9-2 2v30.1c0 1.1.9 2 2 2h45c1.1 0 2-.9 2-2v-30a1.95 1.95 0 0 0-1.9-2.1zm-.7 26.4H3.2V7.6H47v23.6z"/></svg>`; ]]]
                    icon_lock: >
                      [[[ const state = states['script.home_leave'].state === 'on' ? 'locked' : null;
                      if (states['input_boolean.computer_kaoru_lock'].state === 'on' && states['input_boolean.computer_kaoru'].state === 'off') {
                      return `<svg viewBox="0 0 50 50"><style>@keyframes locked{from, to{transform: translateX(0);}10%, 30%, 50%, 70%, 90%{transform: translateX(-8%);}20%, 40%, 60%, 80%{transform: translateX(8%);}}.locked{animation: locked 1.1s;}</style>
                      <path id="lock" class="${state}" d="M8.2 22.6h2.4v-7.2C10.6 7.5 17.1 1 25 1s14.4 6.4 14.4 14.4v7.2h2.4V49H8.2m26.4-26.4v-7.2c0-5.3-4.3-9.6-9.6-9.6s-9.6 4.3-9.6 9.6v7.2"/></svg>`; } ]]]
                  styles:
                    custom_fields:
                      icon_imac:
                        [fill: "[[[ return entity.state === 'on' ? '#72757c' : '#9da0a2'; ]]]", 
                        top: 8.5%, left: 11%, width: 3.3vw, position: absolute]
                      icon_lock:
                        [top: 11%, left: 73%, width: 1.7vw, position: absolute, fill: '#b0b3b6']
                  template: ['base', 'loader']


              - type: picture-elements
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
                elements:   

                #################################################
                #                                               #
                #                   LED                         #
                #                                               #
                #################################################

                - type: custom:button-card
                  entity: light.yeelight_stripe
                  name: LED
                  style:
                    top: 23.9%
                    left: 23.8%
                    width: 47.7%
                  custom_fields:
                    icon_shade: >
                      [[[ const state = entity.state === 'on' ? 'animate' : null;
                      return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                      <path fill="#9da0a2" d="M26.4 25.6c.6-.3 1.1-.7 1.1-1.3L25 17.9l-2.5 6.4c0 .7.6 1.1 1.1 1.3v20.8h-5.5v2.7h13.7v-2.7h-5.5V25.6z"/>
                      <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M24.6.9l-9.4.5c-.6.1-1.9 0-2.5 2.1s-2.4 9.1-4 16.9c-.2.7-.5 2-.5 2.3s-.4 1.6.9 1.6c.8.1 7.4.3 15.9.3 8.6 0 15.1-.3 15.9-.3 1.3-.1.9-1.3.9-1.6s-.3-1.6-.5-2.3c-1.6-7.8-3.4-14.8-4-16.9s-1.9-2-2.5-2.1c-1.6-.2-6.9-.4-9.4-.5"/> </svg>`;]]]
                  styles:
                    custom_fields:
                      icon_shade:
                        [top: 11%, left: 4.6%, width: 3.05vw, position: absolute]
                  template: light


                #################################################
                #                                               #
                #                lampe japonaise                #
                #                                               #
                #################################################

                - type: custom:button-card
                  entity: light.lampe_japonaise
                  name: Lanterne
                  style:
                    top: 23.9%
                    left: 76.2%
                    width: 47.7%
                  custom_fields:
                    icon_shade: >
                      [[[ const state = entity.state === 'on' ? 'animate' : null;
                      return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                      <path fill="#9da0a2" d="M26.4 25.6c.6-.3 1.1-.7 1.1-1.3L25 17.9l-2.5 6.4c0 .7.6 1.1 1.1 1.3v20.8h-5.5v2.7h13.7v-2.7h-5.5V25.6z"/>
                      <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M24.6.9l-9.4.5c-.6.1-1.9 0-2.5 2.1s-2.4 9.1-4 16.9c-.2.7-.5 2-.5 2.3s-.4 1.6.9 1.6c.8.1 7.4.3 15.9.3 8.6 0 15.1-.3 15.9-.3 1.3-.1.9-1.3.9-1.6s-.3-1.6-.5-2.3c-1.6-7.8-3.4-14.8-4-16.9s-1.9-2-2.5-2.1c-1.6-.2-6.9-.4-9.4-.5"/> </svg>`;]]]
                  styles:
                    custom_fields:
                      icon_shade:
                        [top: 11%, left: 4.6%, width: 3.05vw, position: absolute]
                  template: light

                #################################################
                #                                               #
                #                 Plafond 1                     #
                #                                               #
                #################################################


                - type: custom:button-card
                  entity: light.plafond_1
                  name: Plafond 1
                  style:
                    top: 76.2%
                    left: 23.8%
                    width: 47.7%
                  custom_fields:
                    icon_hue: >
                      [[[ const state = entity.state === 'on' ? 'animate' : null;
                      return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                      <path fill="#9da0a2" d="M27.4 47.3h-4.9s-.7.1-.7.8.4.9.7.9h4.9c.3 0 .7-.1.7-.9s-.7-.8-.7-.8zm3.3-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-3H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9s-.9-.8-.9-.8zm5.2-23.2c-3.3-5.3-7-5.6-10.9-5.6-3.8 0-8.4.4-10.9 5.6-.1.1-.1.3.1.7.4.8 3.3 7.2 3.2 18.8 0 1.1-.1 1.6 0 1.7 0 .1 0 .7 1.1.7h13c1 0 1-.5 1.1-.7v-1.7c-.1-11.6 2.8-18 3.2-18.8.1-.4.1-.5.1-.7"/>
                      <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M14.1 15.3c3.4-.3 7-.4 10.9-.4 3.8 0 7.5.2 10.9.4.4-.4.7-.8.9-1.1C39 8.5 38.9 6.5 38.9 6c-.2-4.4-8.4-5-12.1-5h0-3.4c-3.7 0-12 .5-12.1 5 0 .5-.1 2.5 2.1 8.2 0 .3.3.8.7 1.1z"/></svg>`; ]]]
                  styles: 
                    custom_fields:
                      icon_hue:
                        [top: 11%, left: 4.5%, width: 3.05vw, position: absolute]
                  template: light

                #################################################
                #                                               #
                #                  Plafond 2                    #
                #                                               #
                #################################################

                - type: custom:button-card
                  entity: light.plafond_2
                  name: Plafond 2
                  style:
                    top: 76.2%
                    left: 76.2%
                    width: 47.7%
                  custom_fields:
                    icon_shade: >
                     [[[ const state = entity.state === 'on' ? 'animate' : null;
                      return `<svg viewBox="0 0 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                      <path fill="#9da0a2" d="M27.4 47.3h-4.9s-.7.1-.7.8.4.9.7.9h4.9c.3 0 .7-.1.7-.9s-.7-.8-.7-.8zm3.3-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-3H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9s-.9-.8-.9-.8zm5.2-23.2c-3.3-5.3-7-5.6-10.9-5.6-3.8 0-8.4.4-10.9 5.6-.1.1-.1.3.1.7.4.8 3.3 7.2 3.2 18.8 0 1.1-.1 1.6 0 1.7 0 .1 0 .7 1.1.7h13c1 0 1-.5 1.1-.7v-1.7c-.1-11.6 2.8-18 3.2-18.8.1-.4.1-.5.1-.7"/>
                      <path class="${state}" fill="var(--button-card-light-color-no-temperature)" d="M14.1 15.3c3.4-.3 7-.4 10.9-.4 3.8 0 7.5.2 10.9.4.4-.4.7-.8.9-1.1C39 8.5 38.9 6.5 38.9 6c-.2-4.4-8.4-5-12.1-5h0-3.4c-3.7 0-12 .5-12.1 5 0 .5-.1 2.5 2.1 8.2 0 .3.3.8.7 1.1z"/></svg>`; ]]]
                  styles:
                    custom_fields:
                      icon_shade:
                        [top: 11%, left: 4.6%, width: 3.05vw, position: absolute]
                  template: light



          ##########################################################################
          #                                                                        #
          #                            * TEMPERATURE *                             #
          #                                                                        #
          ##########################################################################

          - prefix: Température       
            <<: *title
            style:
              top: 9.15%
              left: 75.1%
              <<: *title-style

          - type: custom:swipe-card
            reset_after: 10
            start_card: 1
            parameters:
              roundLengths: true
              effect: coverflow
              speed: 650
              spaceBetween: 20
              threshold: 7
              coverflowEffect:
                rotate: 80
                depth: 300
            style:
              top: 12.55%
              left: 85.8%
              width: 20.97%
              height: 1px
              --ha-card-border-radius: .88vw
            cards:

              - type: picture-elements
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
                elements:      

                  #################################################
                  #                                               #
                  #             temperature William               #
                  #                                               #
                  #################################################
                  - type: custom:mini-graph-card
                    entities:
                      - color: '#0066ff'
                        entity: sensor.temperature_chambre_william
                    style:
                      top: 23.9%
                      left: 23.8%
                      width: 47.7%
                      height: 47.7%
                    height: 325
                    line_width: 12
                    align_state: left
                    group: false
                    lower_bound: 18
                    points_per_hour: 2
                    hour24: true
                    hours_to_show: 12
                    show:
                      {fill: fade, icon: false, name: false, state: false, 
                      name_adaptive_color: true, legend: false, points: false, labels: false}
                  - type: custom:button-card
                    entity: sensor.temperature_chambre_william
                    name: William
                    style:
                      top: 23.9%
                      left: 23.8%
                      width: 47.7%
                    hold_action: !include popup/temperature_chambre_william.yaml
                    tap_action: !include popup/temperature_chambre_william.yaml
                    custom_fields:
                      icon_lamp: >
                        <svg viewBox="10 5 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                        <path fill="#9da0a2" d="M41.74 10.852v2h-7.75v-2zm-3.25 4.36h-4.5v2h4.5zm-4.5 6.36h7.75v-2h-7.75zm4.5 2.36h-4.5v2h4.5zm-4.5 6.36h7.75v-2h-7.75zM35.2 41.685A10.14 10.14 0 0 1 25.074 51.81a10.14 10.14 0 0 1-10.125-10.125c0-3.618 1.9-6.906 5-8.725V10.006c0-2.826 2.3-5.125 5.125-5.125s5.125 2.3 5.125 5.125V32.96c3.1 1.817 5 5.106 5 8.725zm-2 0c0-3.07-1.706-5.845-4.453-7.24l-.547-.278v-24.16a3.13 3.13 0 0 0-3.125-3.125 3.13 3.13 0 0 0-3.125 3.125v24.16l-.547.278a8.09 8.09 0 0 0-4.453 7.24c0 4.48 3.645 8.125 8.125 8.125s8.125-3.645 8.125-8.125zm-1.666 0a6.47 6.47 0 0 1-6.459 6.458 6.47 6.47 0 0 1-6.458-6.458 6.46 6.46 0 0 1 4.796-6.233l.37-.1v-22.23h2.583v22.23l.37.1a6.46 6.46 0 0 1 4.796 6.233zm-6.14-4.305c-.154-.684-.842-1.134-1.543-.974a5.31 5.31 0 0 0-4.158 5.207 1.29 1.29 0 0 0 2.58 0c0-1.277.902-2.41 2.147-2.7.692-.16 1.13-.85.974-1.543z"/>
                        </svg>
                    styles: 
                      custom_fields:
                        icon_lamp:
                          [top: 11%, left: 4.5%, width: 3.05vw, position: absolute]
                    template: thermometre
                 
                  #################################################
                  #                                               #
                  #               temperature papa                #
                  #                                               #
                  #################################################
                  - type: custom:mini-graph-card
                    entities:
                      - color: '#2ee615'
                        entity: sensor.temperature_chambre_papa
                    style:
                      top: 23.9%
                      left: 76.2%
                      width: 47.7%
                      height: 47.7%
                    height: 325
                    line_width: 12
                    align_state: left
                    group: false
                    lower_bound: 18
                    points_per_hour: 2
                    hour24: true
                    hours_to_show: 12
                    show:
                      {fill: fade, icon: false, name: false, state: false, 
                      name_adaptive_color: true, legend: false, points: false, labels: false}
                  - type: custom:button-card
                    entity: sensor.temperature_chambre_papa
                    name: Papa
                    style:
                      top: 23.9%
                      left: 76.2%
                      width: 47.7%
                    tap_action: !include popup/temperature_chambre_papa.yaml
                    hold_action: !include popup/temperature_chambre_papa.yaml
                    custom_fields:
                      icon_lamp: >
                        <svg viewBox="10 5 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                        <path fill="#9da0a2" d="M41.74 10.852v2h-7.75v-2zm-3.25 4.36h-4.5v2h4.5zm-4.5 6.36h7.75v-2h-7.75zm4.5 2.36h-4.5v2h4.5zm-4.5 6.36h7.75v-2h-7.75zM35.2 41.685A10.14 10.14 0 0 1 25.074 51.81a10.14 10.14 0 0 1-10.125-10.125c0-3.618 1.9-6.906 5-8.725V10.006c0-2.826 2.3-5.125 5.125-5.125s5.125 2.3 5.125 5.125V32.96c3.1 1.817 5 5.106 5 8.725zm-2 0c0-3.07-1.706-5.845-4.453-7.24l-.547-.278v-24.16a3.13 3.13 0 0 0-3.125-3.125 3.13 3.13 0 0 0-3.125 3.125v24.16l-.547.278a8.09 8.09 0 0 0-4.453 7.24c0 4.48 3.645 8.125 8.125 8.125s8.125-3.645 8.125-8.125zm-1.666 0a6.47 6.47 0 0 1-6.459 6.458 6.47 6.47 0 0 1-6.458-6.458 6.46 6.46 0 0 1 4.796-6.233l.37-.1v-22.23h2.583v22.23l.37.1a6.46 6.46 0 0 1 4.796 6.233zm-6.14-4.305c-.154-.684-.842-1.134-1.543-.974a5.31 5.31 0 0 0-4.158 5.207 1.29 1.29 0 0 0 2.58 0c0-1.277.902-2.41 2.147-2.7.692-.16 1.13-.85.974-1.543z"/>
                        </svg>
                    styles: 
                      custom_fields:
                        icon_lamp:
                          [top: 11%, left: 4.5%, width: 3.05vw, position: absolute]
                    template: thermometre

                  #################################################
                  #                                               #
                  #               temperature salon               #
                  #                                               #
                  #################################################
                  - type: custom:mini-graph-card
                    entities:
                      - color: '#ff3300'
                        entity: sensor.temperature_salon
                    style:
                      top: 76.2%
                      left: 23.8%
                      width: 47.7%
                      height: 47.7%
                    height: 325
                    line_width: 12
                    align_state: left
                    group: false
                    lower_bound: 18
                    points_per_hour: 2
                    hour24: true
                    hours_to_show: 12
                    show:
                      {fill: fade, icon: false, name: false, state: false, 
                      name_adaptive_color: true, legend: false, points: false, labels: false}
                  - type: custom:button-card
                    entity: sensor.temperature_salon
                    name: Salon
                    style:
                      top: 76.2%
                      left: 23.8%
                      width: 47.7%
                    tap_action: !include popup/temperature_salon.yaml
                    hold_action: !include popup/temperature_salon.yaml
                    custom_fields:
                      icon_lamp: >
                        <svg viewBox="10 5 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                        <path fill="#9da0a2" d="M41.74 10.852v2h-7.75v-2zm-3.25 4.36h-4.5v2h4.5zm-4.5 6.36h7.75v-2h-7.75zm4.5 2.36h-4.5v2h4.5zm-4.5 6.36h7.75v-2h-7.75zM35.2 41.685A10.14 10.14 0 0 1 25.074 51.81a10.14 10.14 0 0 1-10.125-10.125c0-3.618 1.9-6.906 5-8.725V10.006c0-2.826 2.3-5.125 5.125-5.125s5.125 2.3 5.125 5.125V32.96c3.1 1.817 5 5.106 5 8.725zm-2 0c0-3.07-1.706-5.845-4.453-7.24l-.547-.278v-24.16a3.13 3.13 0 0 0-3.125-3.125 3.13 3.13 0 0 0-3.125 3.125v24.16l-.547.278a8.09 8.09 0 0 0-4.453 7.24c0 4.48 3.645 8.125 8.125 8.125s8.125-3.645 8.125-8.125zm-1.666 0a6.47 6.47 0 0 1-6.459 6.458 6.47 6.47 0 0 1-6.458-6.458 6.46 6.46 0 0 1 4.796-6.233l.37-.1v-22.23h2.583v22.23l.37.1a6.46 6.46 0 0 1 4.796 6.233zm-6.14-4.305c-.154-.684-.842-1.134-1.543-.974a5.31 5.31 0 0 0-4.158 5.207 1.29 1.29 0 0 0 2.58 0c0-1.277.902-2.41 2.147-2.7.692-.16 1.13-.85.974-1.543z"/>
                        </svg>
                    styles: 
                      custom_fields:
                        icon_lamp:
                          [top: 11%, left: 4.5%, width: 3.05vw, position: absolute]
                    template: thermometre

                  #################################################
                  #                                               #
                  #             temperature cuisine               #
                  #                                               #
                  #################################################
                  - type: custom:mini-graph-card
                    entities:
                      - color: '#b43db4'
                        entity: sensor.temperature_cuisine
                    style:
                      top: 76.2%
                      left: 76.2%
                      width: 47.7%
                      height: 47.7%
                    height: 325
                    line_width: 12
                    align_state: left
                    group: false
                    lower_bound: 18
                    points_per_hour: 2
                    hour24: true
                    hours_to_show: 12
                    show:
                      {fill: fade, icon: false, name: false, state: false, 
                      name_adaptive_color: true, legend: false, points: false, labels: false}
                  - type: custom:button-card
                    entity: sensor.temperature_cuisine
                    name: Cuisine
                    style:
                      top: 76.2%
                      left: 76.2%
                      width: 47.7%
                    tap_action: !include popup/temperature_cuisine.yaml
                    hold_action: !include popup/temperature_cuisine.yaml
                    custom_fields:
                      icon_lamp: >
                        <svg viewBox="10 5 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                        <path fill="#9da0a2" d="M41.74 10.852v2h-7.75v-2zm-3.25 4.36h-4.5v2h4.5zm-4.5 6.36h7.75v-2h-7.75zm4.5 2.36h-4.5v2h4.5zm-4.5 6.36h7.75v-2h-7.75zM35.2 41.685A10.14 10.14 0 0 1 25.074 51.81a10.14 10.14 0 0 1-10.125-10.125c0-3.618 1.9-6.906 5-8.725V10.006c0-2.826 2.3-5.125 5.125-5.125s5.125 2.3 5.125 5.125V32.96c3.1 1.817 5 5.106 5 8.725zm-2 0c0-3.07-1.706-5.845-4.453-7.24l-.547-.278v-24.16a3.13 3.13 0 0 0-3.125-3.125 3.13 3.13 0 0 0-3.125 3.125v24.16l-.547.278a8.09 8.09 0 0 0-4.453 7.24c0 4.48 3.645 8.125 8.125 8.125s8.125-3.645 8.125-8.125zm-1.666 0a6.47 6.47 0 0 1-6.459 6.458 6.47 6.47 0 0 1-6.458-6.458 6.46 6.46 0 0 1 4.796-6.233l.37-.1v-22.23h2.583v22.23l.37.1a6.46 6.46 0 0 1 4.796 6.233zm-6.14-4.305c-.154-.684-.842-1.134-1.543-.974a5.31 5.31 0 0 0-4.158 5.207 1.29 1.29 0 0 0 2.58 0c0-1.277.902-2.41 2.147-2.7.692-.16 1.13-.85.974-1.543z"/>
                        </svg>
                    styles: 
                      custom_fields:
                        icon_lamp:
                          [top: 11%, left: 4.5%, width: 3.05vw, position: absolute]
                    template: thermometre
              
              #Seconde partie de la swipe card
              - type: picture-elements
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
                elements:

                  #################################################
                  #                                               #
                  #             temperature salle de bain         #
                  #                                               #
                  #################################################
                  - type: custom:mini-graph-card
                    entities:
                      - color: '#0066ff'
                        entity: sensor.temperature_salle_de_bain
                    style:
                      top: 23.9%
                      left: 23.8%
                      width: 47.7%
                      height: 47.7%
                    height: 325
                    line_width: 12
                    align_state: left
                    group: false
                    lower_bound: 18
                    points_per_hour: 2
                    hour24: true
                    hours_to_show: 12
                    show:
                      {fill: fade, icon: false, name: false, state: false, 
                      name_adaptive_color: true, legend: false, points: false, labels: false}
                  - type: custom:button-card
                    entity: sensor.temperature_salle_de_bain
                    name: Bain
                    style:
                      top: 23.9%
                      left: 23.8%
                      width: 47.7%
                    tap_action: !include popup/temperature_salle_de_bain.yaml
                    hold_action: !include popup/temperature_salle_de_bain.yaml
                    custom_fields:
                      icon_lamp: >
                        <svg viewBox="10 5 50 50"><style>@keyframes animate{0%{transform: scale(0.85);}20%{transform: scale(1.1);}40%{transform: scale(0.95);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}100%{transform: scale(1);}}.animate{animation: animate 0.8s; transform-origin: center;}</style>
                        <path fill="#9da0a2" d="M41.74 10.852v2h-7.75v-2zm-3.25 4.36h-4.5v2h4.5zm-4.5 6.36h7.75v-2h-7.75zm4.5 2.36h-4.5v2h4.5zm-4.5 6.36h7.75v-2h-7.75zM35.2 41.685A10.14 10.14 0 0 1 25.074 51.81a10.14 10.14 0 0 1-10.125-10.125c0-3.618 1.9-6.906 5-8.725V10.006c0-2.826 2.3-5.125 5.125-5.125s5.125 2.3 5.125 5.125V32.96c3.1 1.817 5 5.106 5 8.725zm-2 0c0-3.07-1.706-5.845-4.453-7.24l-.547-.278v-24.16a3.13 3.13 0 0 0-3.125-3.125 3.13 3.13 0 0 0-3.125 3.125v24.16l-.547.278a8.09 8.09 0 0 0-4.453 7.24c0 4.48 3.645 8.125 8.125 8.125s8.125-3.645 8.125-8.125zm-1.666 0a6.47 6.47 0 0 1-6.459 6.458 6.47 6.47 0 0 1-6.458-6.458 6.46 6.46 0 0 1 4.796-6.233l.37-.1v-22.23h2.583v22.23l.37.1a6.46 6.46 0 0 1 4.796 6.233zm-6.14-4.305c-.154-.684-.842-1.134-1.543-.974a5.31 5.31 0 0 0-4.158 5.207 1.29 1.29 0 0 0 2.58 0c0-1.277.902-2.41 2.147-2.7.692-.16 1.13-.85.974-1.543z"/>
                        </svg>
                    styles: 
                      custom_fields:
                        icon_lamp:
                          [top: 11%, left: 4.5%, width: 3.05vw, position: absolute]
                    template: thermometre         


          ##########################################################################
          #                                                                        #
          #                               * MEDIA *                                #
          #                                                                        #
          ##########################################################################
 
          - prefix: Media
            <<: *title
            style:
              top: 53.4%
              left: 25.4%
              <<: *title-style

          - type: custom:swipe-card
            start_card: 1
            reset_after: 10
            parameters:
              roundLengths: true
              effect: coverflow
              speed: 650
              spaceBetween: 20
              threshold: 7
              coverflowEffect:
                rotate: 80
                depth: 300
            style:
              top: 56.55%
              left: 35.8%
              width: 20.97%
              height: 1px
              --ha-card-border-radius: .88vw
            cards:

              - type: picture-elements
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
                elements:

                  #################################################
                  #                                               #
                  #              RECENTLY DOWNLOADED              #
                  #                                               #
                  #################################################

                  - type: conditional
                    conditions:
                      - entity: input_select.conditional_media
                        state: Senast nedladdat
                    elements:
                      - type: custom:button-card
                        entity: sensor.plex_recently_added
                        triggers_update:
                          ['sensor.plex_recently_added']
                        name: Récemment ajouté
                        state_display: >
                          [[[ const data = states[entity.entity_id].attributes.data;
                          const number = data[1].number == undefined ? '(' + data[1].aired.split('-')[0] + ')' : data[1].number;
                          return `${data[1].title} ${number}`; ]]]
                        custom_fields:
                          icon: >
                            <svg viewBox="0 0 50 50"><path d="M7.7.3h34.6c4.1 0 7.4 3.3 7.4 7.4v34.6c0 4.1-3.3 7.4-7.4 7.4H7.7c-4.1 0-7.4-3.3-7.4-7.4V7.7C.3 3.6 3.6.3 7.7.3z" fill="#282a2d"/><path d="M25,7.1H14.6L25,25L14.6,42.9H25L35.4,25L25,7.1z" fill="#e5a00d"/></svg>
                          blur: >
                            <svg viewBox="0 0 50 50" />
                        styles:
                          custom_fields:
                            media_image: &plex_poster
                              [background-position: center center, background-image: 
                              "[[[ return 'url(' + states[entity.entity_id].attributes.data[1].poster + ')'; ]]]"]
                            blur: *plex_poster
                            overlay: [background: 'rgba(0, 0, 0, 0.4)']
                          card:
                            [color: '#efefef', text-shadow: '1px 1px 5px rgba(18, 22, 23, 0.9)']
                        tap_action:
                          action: none
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: conditional_media




                  #################################################
                  #                                               #
                  #               GOOGLE MINI CUISINE             #
                  #                                               #
                  #################################################

                  - type: conditional
                    conditions:
                      - entity: input_select.conditional_media
                        state: Cuisine
                    elements:
                      - type: custom:button-card
                        entity: media_player.google_home_cuisine
                        name: Google Home Cuisine
                        custom_fields:
                          icon: &icon_nest_mini >
                            <svg viewBox="0 0 50 50"><path d="M49.7 25c0 13.6-11.1 24.7-24.8 24.7C11.3 49.7.3 38.6.3 25S11.4.3 25 .3 49.7 11.4 49.7 25zm-33.9 0a2.22 2.22 0 0 0-2.2-2.2c-1.2 0-2.3 1-2.3 2.2a2.22 2.22 0 0 0 2.2 2.2c1.3.1 2.3-.9 2.3-2.2h0zm10.8 0c0 1.2.9 2.2 2.2 2.3 1.3 0 2.3-1 2.3-2.2 0-1.3-1-2.3-2.2-2.3-1.3 0-2.3.9-2.3 2.2zm-3.2 0a2.22 2.22 0 0 0-2.2-2.2c-1.2 0-2.3 1-2.3 2.2a2.22 2.22 0 0 0 2.2 2.2c1.3 0 2.3-.9 2.3-2.2h0zm13 2.2a2.22 2.22 0 0 0 2.2-2.2c0-1.2-1-2.3-2.2-2.3a2.22 2.22 0 0 0-2.2 2.2c0 1.3 1 2.3 2.2 2.3z" /></svg>
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: conditional_media
                        hold_action: !include popup/media_player.yaml
                        double_tap_action: !include popup/media_player.yaml


                  #################################################
                  #                                               #
                  #               GOOGLE MINI CHAMBRE             #
                  #                                               #
                  #################################################

                  - type: conditional
                    conditions:
                      - entity: input_select.conditional_media
                        state: Chambre
                    elements:
                      - type: custom:button-card
                        entity: media_player.google_home_chambre
                        name: Google Home Chambre
                        custom_fields:
                          icon: *icon_nest_mini
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: conditional_media
                        hold_action: !include popup/media_player.yaml
                        double_tap_action: !include popup/media_player.yaml

                  #################################################
                  #                                               #
                  #                   Bouygues4k                  #
                  #                                               #
                  #################################################

                  - type: conditional
                    conditions:
                      - entity: input_select.conditional_media
                        state: Bouygues4K
                    elements:
                      - type: custom:button-card
                        entity: media_player.bouygues4k
                        name: BouyguesTV 4k
                        custom_fields:
                          icon: &bouygues >
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 270 270" xmlns:v="https://vecta.io/nano"><g transform="matrix(.309126 0 0 .309126 -89.909814 28.421582)"><path d="M794.196 673.205c60.48 41.745 180.156-26.46 267.277-152.573 87.13-126.107 108.726-262.03 48.246-303.77-60.495-41.745-177.152 22.978-264.284 149.093-87.12 126.104-111.714 265.507-51.24 307.25z" fill="#ea5b0f"/><path d="M643.32 673.205c-60.48 41.745-180.156-26.46-267.277-152.573-87.13-126.107-108.726-262.03-48.247-303.77 60.496-41.745 177.152 22.978 264.284 149.093 87.12 126.104 111.714 265.507 51.24 307.25z" fill="#0055a4"/><ellipse cx="718.708" cy="112.041" rx="277.922" ry="132.828" fill="#009dcc"/></g></svg>
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: conditional_media
                        hold_action: !include popup/media_player.yaml
                        double_tap_action: !include popup/media_player.yaml


                  #################################################
                  #                                               #
                  #                   SPOTIFY                     #
                  #                                               #
                  #################################################

                  - type: conditional
                    conditions:
                      - entity: input_select.conditional_media
                        state: Spotify
                    elements:
                      - type: custom:button-card
                        entity: media_player.spotify
                        name: Spotify
                        custom_fields:
                          icon: &icon_spotify_green >
                            <svg viewBox="0 0 450 450"><path d="M213.826 0C95.733 0 0 95.733 0 213.826s95.733 213.826 213.826 213.826 213.826-95.733 213.826-213.826S331.92 0 213.826 0zm93.06 310.32c-2.72 4.652-7.612 7.246-12.638 7.247a14.56 14.56 0 0 1-7.364-2C248.46 293.11 204.07 289.502 173.59 290.43c-33.763 1.027-58.523 7.692-58.77 7.76-7.783 2.126-15.826-2.454-17.96-10.236s2.43-15.82 10.21-17.962c1.116-.307 27.76-7.544 64.81-8.766 21.824-.72 42.834.8 62.438 4.52 24.83 4.7 47.48 12.978 67.322 24.574 6.973 4.074 9.32 13.03 5.247 20zm27.184-56.46c-3.22 5.51-9.016 8.583-14.97 8.584-2.968 0-5.975-.763-8.723-2.37-45.514-26.6-98.097-30.873-134.2-29.776-39.994 1.217-69.323 9.112-69.614 9.192-9.217 2.515-18.746-2.906-21.275-12.124s2.88-18.738 12.093-21.277c1.322-.364 32.882-8.937 76.77-10.384 25.853-.852 50.74.95 73.96 5.354 29.412 5.58 56.24 15.373 79.744 29.108a17.32 17.32 0 0 1 6.215 23.692zm16.71-51.335c-3.64 0-7.33-.936-10.7-2.906-108.207-63.238-248.572-25.643-249.977-25.255-11.313 3.117-23.008-3.527-26.124-14.84s3.527-23.008 14.84-26.124c1.62-.447 40.333-10.962 94.166-12.737 31.713-1.044 62.237 1.164 90.72 6.567 36.077 6.844 68.987 18.856 97.815 35.704 10.13 5.92 13.543 18.93 7.623 29.06-3.95 6.76-11.06 10.53-18.362 10.53z" fill="#00d95f"/></svg>
                        style:
                          top: 50%
                          left: 50%
                          width: 100%
                        template: conditional_media
                        hold_action: !include popup/spotify.yaml
                        double_tap_action: !include popup/spotify.yaml


                  #################################################
                  #                                               #
                  #           * SMALL MEDIA CONTROLS *            #
                  #                                               #
                  #################################################

              - type: picture-elements
                image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' /%3E"
                elements:

                  # SMALL GOOGLE NEST MINI
                  - type: custom:button-card
                    entity: media_player.google_home_cuisine
                    custom_fields:
                      icon: *icon_nest_mini
                    style:
                      top: 23.9%
                      left: 23.8%
                      width: 47.7%
                    template: media
                    double_tap_action: !include popup/media_player.yaml
                    hold_action: !include popup/media_player.yaml


                  # SMALL GOOGLE NEST MINI
                  - type: custom:button-card
                    entity: media_player.google_home_chambre
                    custom_fields:
                      icon: *icon_nest_mini
                    style:
                      top: 23.9%
                      left: 76.2%
                      width: 47.7%
                    template: media
                    double_tap_action: !include popup/media_player.yaml
                    hold_action: !include popup/media_player.yaml
    
                  # SMALL SPOTIFY
                  - type: custom:button-card
                    entity: media_player.spotify
                    custom_fields:
                      icon: &icon_spotify >
                          <svg viewBox="0 0 450 450"><path d="M213.826 0C95.733 0 0 95.733 0 213.826s95.733 213.826 213.826 213.826 213.826-95.733 213.826-213.826S331.92 0 213.826 0zm93.06 310.32c-2.72 4.652-7.612 7.246-12.638 7.247a14.56 14.56 0 0 1-7.364-2C248.46 293.11 204.07 289.502 173.59 290.43c-33.763 1.027-58.523 7.692-58.77 7.76-7.783 2.126-15.826-2.454-17.96-10.236s2.43-15.82 10.21-17.962c1.116-.307 27.76-7.544 64.81-8.766 21.824-.72 42.834.8 62.438 4.52 24.83 4.7 47.48 12.978 67.322 24.574 6.973 4.074 9.32 13.03 5.247 20zm27.184-56.46c-3.22 5.51-9.016 8.583-14.97 8.584-2.968 0-5.975-.763-8.723-2.37-45.514-26.6-98.097-30.873-134.2-29.776-39.994 1.217-69.323 9.112-69.614 9.192-9.217 2.515-18.746-2.906-21.275-12.124s2.88-18.738 12.093-21.277c1.322-.364 32.882-8.937 76.77-10.384 25.853-.852 50.74.95 73.96 5.354 29.412 5.58 56.24 15.373 79.744 29.108a17.32 17.32 0 0 1 6.215 23.692zm16.71-51.335c-3.64 0-7.33-.936-10.7-2.906-108.207-63.238-248.572-25.643-249.977-25.255-11.313 3.117-23.008-3.527-26.124-14.84s3.527-23.008 14.84-26.124c1.62-.447 40.333-10.962 94.166-12.737 31.713-1.044 62.237 1.164 90.72 6.567 36.077 6.844 68.987 18.856 97.815 35.704 10.13 5.92 13.543 18.93 7.623 29.06-3.95 6.76-11.06 10.53-18.362 10.53z" fill="#9da0a2"/></svg>
                    style:
                      top: 76.2%
                      left: 23.8%
                      width: 47.7%
                    template: media
                    hold_action: !include popup/spotify.yaml
                    double_tap_action: !include popup/spotify.yaml

                  - type: custom:button-card
                    entity: media_player.bouygues4k
                    custom_fields:
                      icon: &bouygues_white >
                        <svg viewBox="0 0 470 470"><path d="M207.6 12.7c-.2.3-3 .6-6.2.8l-9.4 1c-1.9.4-4.8.8-6.5.9-6.8.7-12.5 1.9-12.5 2.7 0 .5-.6.6-1.4.3-.7-.3-4.9.4-9.2 1.6l-9.4 2.5c-.8.2-1.5.4-1.5.5s-.7.3-1.5.5-2.8.9-4.5 1.6c-1.6.7-3.6 1.1-4.2 1-.7-.1-1.3.3-1.3.9s-.4.8-1 .5c-.5-.3-1-.1-1 .5s-.4.9-.9.6c-.9-.6-11.6 3.9-14.1 5.9-.8.7-2.6 1.5-4 1.8-1.4.4-3.5 1.5-4.6 2.5-1.1 1.1-3 2.3-4.2 2.6-1.2.4-2.2 1.2-2.2 1.7s-1.1 1.4-2.5 1.9-2.5 1.4-2.5 2c0 .5-.3.9-.7.8-1.1-.4-15.3 13.9-15.4 15.4-.1.7-.1 1.6 0 2 0 .5-.3.8-.8.8s-1.9 2.4-3.1 5.2c-2.9 6.7-3.3 20.5-.7 25.4.9 1.7 1.3 3.4 1 3.8-.4.3-.1.6.5.6.7 0 1.2.7 1.2 1.5s.9 2.4 1.9 3.4 2.2 2.8 2.5 3.8c.7 2.2 11 12.3 12.6 12.3.5 0 1 .4 1 .9 0 1.2 9 7.7 10.1 7.4.5-.2.9.2.9.8 0 .5.5.7 1 .4s1-.1 1 .4c0 .6.7 1.1 1.5 1.1s1.5.5 1.5 1.1c0 .5.4.8.9.4.5-.3 1.5.1 2.3.8 1.5 1.4 10 5.4 10.7 4.9.2-.2.7.1 1 .7.4.6 1.6 1.2 2.6 1.4 1.1.2 3.6 1.1 5.6 2s4.7 1.8 6 2 3.7.9 5.2 1.5c1.6.7 3.4 1.2 4.1 1.2.6 0 3.9.7 7.1 1.6 7.5 1.9 10.6 2.6 19 3.9 1.1.1 3.1.6 4.5.9 2.4.7 9 1.3 24 2.3 18.6 1.2 55.6.1 59.1-1.8.9-.4 5-1 9.1-1.2 4.1-.3 8.3-.9 9.4-1.4 1-.6 2.5-.8 3.1-.6.7.3 3-.1 5-.8 2.1-.7 4.1-1.2 4.6-1.1.4.1 3.4-.7 6.7-1.8s6.9-2.1 8-2.3c1-.2 2.3-.6 2.6-1 .4-.4 1.7-.7 2.9-.7 1.3 0 2.8-.7 3.5-1.5s1.6-1.3 2-1c1 .6 13.3-4.5 13.8-5.7.2-.5.8-.6 1.3-.2.5.3.9 0 .9-.6s.4-.9.9-.6c.4.3 1.9-.3 3.2-1.4s2.9-2.3 3.4-2.8c.6-.5 1.6-.7 2.2-.5s1.8-.6 2.7-1.9 1.9-2.2 2.1-2.1c1.2.7 2.6.2 2-.7-.3-.6.1-1 .9-1 1.7 0 19.1-16.8 18.3-17.6-.3-.3.3-1.4 1.4-2.5s1.7-2.4 1.4-2.9c-.4-.6-.1-1 .5-1 .7 0 1-.6.7-1.4s-.3-1.7.1-2.1a3.81 3.81 0 0 0 .8-1.3c0-.4.5-1.6 1-2.7 1.3-3 .9-16.8-.7-19.6-.7-1.3-1.4-2.9-1.5-3.6s-1.1-2.5-2.3-4.1c-1.1-1.6-1.8-3.2-1.4-3.5.3-.4-.2-.9-1.1-1.3-.9-.3-1.6-1.2-1.6-1.9 0-.6-2.7-3.7-6-6.8s-6-5.4-6-5c0 .3-.8-.4-1.9-1.5-1-1.2-2.1-1.9-2.4-1.5-.4.3-.9-.2-1.3-1.1-.3-.9-1.2-1.6-2-1.6s-1.4-.5-1.4-1c0-.6-.9-1-1.9-1s-2.2-.7-2.5-1.6c-.4-.9-1.3-1.4-2.1-1-.8.3-1.5.1-1.5-.4 0-.9-10.7-6.4-12.6-6.5-.6 0-1.9-.6-2.8-1.4-.9-.7-1.6-1.1-1.6-.7 0 .3-2.5-.5-5.6-1.9s-6-2.3-6.4-2a.78.78 0 0 1-1.2-.4c-.1-.5-1.6-1.1-3.3-1.3-1.6-.2-3.2-.6-3.6-1-.3-.4-1.8-.9-3.5-1.1-1.6-.2-3.4-.6-3.9-.9-1.3-.7-7.3-2.1-10.5-2.3-1.4-.1-3.2-.5-4-.8s-2.2-.5-3-.5-2.5-.3-3.8-.6c-2.1-.5-6.7-1-18.7-2.2-5.6-.6-55.4-1.1-55.9-.7zM34.5 136.1c-16.3 2.4-28.3 14.2-33 32.4-2.3 9.1-2 33.6.6 47.2 4.5 23.7 19.3 58.8 35.3 84.1 32.7 51.7 79 91.4 116.4 99.8 10.1 2.2 25.8 1.6 32.5-1.4 10.4-4.7 18.7-15.5 22.4-29.4 2.4-8.7 2.3-31-.2-43.8-9.4-49.9-40.6-104.8-82.7-145.5-32.8-31.7-65.4-47.2-91.3-43.4zm381.6 0c-16.6 2.2-37.1 12.1-57.6 27.8-9.3 7.1-29.9 27.5-39 38.6-31.2 38.2-52.8 81-60.6 120.5-2.9 14.6-3.2 36.2-.6 45.7 3.7 13.7 11.3 24 21.5 29 5.4 2.7 6.4 2.8 19.2 2.7 11.9 0 14.5-.3 21.5-2.7 32.8-10.9 70.2-42.4 99.5-83.7 20.4-28.8 36-61.5 43.1-90.5 14-57.4-5.1-93-47-87.4z"/></svg>
                    style:
                      top: 76.2%
                      left: 76.2%
                      width: 47.7%
                    template: media
                    double_tap_action: !include popup/media_player.yaml
                    hold_action: !include popup/media_player.yaml                    


          ##########################################################################
          #                                                                        #
          #                               * AUTRE *                               #
          #                                                                        #
          ##########################################################################

          - prefix: Autre
            <<: *title
            style:
              top: 53.4%
              left: 50.2%
              <<: *title-style

          #################################################
          #                                               #
          #               Computer William                #
          #                                               #
          #################################################


          - type: custom:button-card
            entity: switch.computer_kaoru
            triggers_update:
              ['switch.computer_kaoru', 'input_boolean.computer_kaoru', 
              'input_boolean.computer_kaoru_lock', 'script.home_leave']
            style:
              top: 64.5%
              left: 55.18%
              width: 10%
            tap_action:
              action: toggle
              animate_locked: |
                [[[ if (states['input_boolean.computer_kaoru_lock'].state === 'on' && states['input_boolean.computer_kaoru'].state === 'off') {
                this.shadowRoot.getElementById('lock').classList.add('locked');
                window.setTimeout(() => { this.shadowRoot.getElementById('lock').classList.remove('locked'); }, 1100) } ]]]
            hold_action: !include popup/computer_kaoru.yaml
            custom_fields:
              icon_imac: >
                [[[ const state = entity.state === 'on' ? 'animate' : null; 
                return `<svg viewBox="0 0 50 50"><style>@keyframes animate{from{opacity: 0.5; transform: scale(0.6);}100%{opacity: 1;}}.animate{animation: animate 0.8s cubic-bezier(0.25, 1, 0.5, 1); transform-origin: center;}</style>
                <path class="${state}" d="M31.9 44.5c-1-.3-1.9.4-1.9-3.7h-9.9c0 4.2-.9 3.4-1.9 3.7s-.2.7-.2.7h14.1s.8-.3-.2-.7zM47.6 4.8H2.5c-1.1 0-2 .9-2 2v30.1c0 1.1.9 2 2 2h45c1.1 0 2-.9 2-2v-30a1.95 1.95 0 0 0-1.9-2.1zm-.7 26.4H3.2V7.6H47v23.6z"/></svg>`; ]]]
              icon_lock: >
                [[[ const state = states['script.home_leave'].state === 'on' ? 'locked' : null;
                if (states['input_boolean.computer_kaoru_lock'].state === 'on' && states['input_boolean.computer_kaoru'].state === 'off') {
                return `<svg viewBox="0 0 50 50"><style>@keyframes locked{from, to{transform: translateX(0);}10%, 30%, 50%, 70%, 90%{transform: translateX(-8%);}20%, 40%, 60%, 80%{transform: translateX(8%);}}.locked{animation: locked 1.1s;}</style>
                <path id="lock" class="${state}" d="M8.2 22.6h2.4v-7.2C10.6 7.5 17.1 1 25 1s14.4 6.4 14.4 14.4v7.2h2.4V49H8.2m26.4-26.4v-7.2c0-5.3-4.3-9.6-9.6-9.6s-9.6 4.3-9.6 9.6v7.2"/></svg>`; } ]]]
            styles:
              custom_fields:
                icon_imac:
                  [fill: "[[[ return entity.state === 'on' ? '#72757c' : '#9da0a2'; ]]]", 
                  top: 8.5%, left: 11%, width: 3.3vw, position: absolute]
                icon_lock:
                  [top: 11%, left: 73%, width: 1.7vw, position: absolute, fill: '#b0b3b6']
            template: ['base', 'loader']


          ##########################################################################
          #                                                                        #
          #                               * MAISON *                               #
          #                                                                        #
          ##########################################################################

          - prefix: Maison
            <<: *title
            style:
              top: 53.4%
              left: 75.1%
              <<: *title-style

          #################################################
          #                                               #
          #                    WILLIAM                    #
          #                                               #
          #################################################

          - type: custom:button-card
            entity: person.kaoru
            triggers_update:
              ['person.kaoru', 'sensor.time']
            style:
              top: 64.5%
              left: 80.05%
              width: 10%
            name: William
            tap_action: !include popup/maison_william.yaml
            hold_action: !include popup/maison_william.yaml
            template: person

          #################################################
          #                                               #
          #                     PAPA                      #
          #                                               #
          #################################################

          - type: custom:button-card
            entity: person.papa
            triggers_update:
              ['person.papa', 'sensor.time']
            style:
              top: 64.5%
              left: 91.05%
              width: 10%
            name: Papa
            tap_action: !include popup/maison_papa.yaml
            hold_action: !include popup/maison_papa.yaml
            template: person

          #################################################
          #                                               #
          #                  PARTIR                       #
          #                                               #
          #################################################

          - type: custom:button-card
            entity: script.home_leave
            state_display: Auto
            style:
              top: 82.1%
              left: 80.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/maison_partir.yaml
            custom_fields:
              icon_away: >
                [[[ const state = entity.state === 'on' ? 'animate' : null;
                return `<svg viewBox="0 0 50 50"><style>@keyframes animate{10%, 20%, 100%{transform: rotateZ(0deg);}30%, 50%, 70%{transform: rotateZ(7deg);}90%{transform: rotateZ(3deg);}40%, 60%, 80%{transform: rotateZ(-7deg);}}.animate{animation: animate 1.35s cubic-bezier(0.5, 1, 0.89, 1); animation-fill-mode: both; transform-origin: 70% 80%; animation-delay: 0s;}</style>
                <path class="${state}" d="M32.1 18.4s.3-1.6.7-2.1c.3-.6.9-1.4 1.6-1.8.6-.4 1.1-.7 1.4-.7s.7-.1 1 .1.6.4.8 1.3l.3 2.7.1 2.4.2 4.1c0 .3.2 3.1.2 3.3s.2 2.7.2 3.2l-.1 2.5c.1 1.6.5 3.1-.2 4.6-.6 1.4-1.7 2.7-2.9 3.6-.5.4-1.9 1.3-2.9 1.7-1.1.5-2.2.8-3.3 1.1-.5.1-1.4.4-2.3.3s-1.8-.6-2.1-1l-1.6-2.3c-.6-.8-2.1-2.3-2.3-2.5l-2.7-2.8c-.2-.2-2.7-3.5-2.9-3.8l-3.1-4.7-1.8-3.2-1.5-2.8-.9-1.8c-.1-.2-.3-1.1-.2-1.4.3-1.2 1.4-1.4 2.3-.7.3.2.9 1 1.1 1.3s6.1 8.1 6.1 8.1c.2.3.7.3.9 0s-.1-.7-.2-.9c-.4-.6-8.3-11.5-8.3-11.5s-.6-.9-.7-1.1c-.3-1.1 0-2.3 1.1-2.7s1.9.3 2.6 1.1c.3.3 8.3 11.5 8.3 11.5.2.2.3.3.5.3.3 0 .5-.4.4-.7-.1-.2-.5-.9-.5-.9L11.8 9c-.6-1-.9-2-.1-3 .7-.8 2.2-1.3 3-.2.3.3 10.1 14.3 10.1 14.3.2.2.5.4.7.3.5-.1.3-.7.1-1-.1-.2-8.4-11.8-8.4-11.8-.4-.9-.6-2 .2-2.8 1-1.1 2.5-.5 3.3.5.2.3 1 1.4 1 1.4l2.7 3.7c.1.2 3.4 4.4 3.8 4.8.9 1.1 1.8 2.2 2.7 3.2l.5.5c.1.1.1.4.1.8 0 1.3.1 2.6.1 3.9 0 .2.1.4.2.6.3.3.6.1.7-.2.1-.2 0-2.4 0-2.7-.3-.3-.5-1.3-.4-2.9zM12.2 46.9s-2.8-.8-4.8-2.7-2.6-2.7-2.8-3-1.8-3-2-3.6c-.2-.5-.2-.7.2-1 .4-.4 1-.5 1.3.1.1.2.4 1 .5 1.2s1 1.9 1.7 2.8 1.6 2.2 4.4 3.8c.6.3 1.2.6 1.9.9.3.1.6.2.8.4.1.2.1.6-.1.8-.2.4-.7.4-1.1.3zM7.1 30.7l.9 3.1c.3.7 1.1 2.3 1.9 3.3s2.4 2.6 3.4 3.2 2 1.1 3 1.5c1 .3 1.1.4 1.2.5.3.4.2 1.2-.4 1.3-.2 0-1.2 0-1.8-.3L12 41.7c-.5-.4-3.9-3.1-5.1-6S5.3 31 5.2 30.4s-.2-1.1 0-1.4c.3-.4.9-.8 1.3-.3.2.3.3.6.3.9.1 0 .2.8.3 1.1zm26.8-25s.2-.1.5-.1.8.3 1.4.7 1.9 1 3.6 2.9 2.9 3.9 3.4 5.8c.5 1.8.8 3.1.9 5.5 0 .5.1 1.6 0 1.7-.2.5-.5.7-1 .7-.6 0-.7-.5-.7-1l-.1-2.9c-.1-.6-.3-1.9-.7-2.9-.3-1-.7-2.3-1.7-3.6-.9-1.3-2.1-2.8-3.2-3.5l-2.4-1.5c-.6-.6-.7-1.2 0-1.8zm4.9-2.5s.3-.2.5-.1c.2 0 .7.3.9.4s2.1 1.3 3.6 3c1.5 1.6 3.5 5.1 3.7 7.4.1.4.2.9 0 1-.2.2-.4.4-.7.4-.2 0-.5 0-.7-.1-.1-.2-.4-1.1-.4-1.3s-.6-2-1.1-3.1C44 9.7 43.5 8.5 42 7.1s-2.2-1.9-2.8-2.2-1.1-.6-1.1-1c.1-.3.3-.6.7-.7z"/></svg>`; ]]]
            styles:
              card: [transition: all 0.3s ease-out]
              custom_fields:
                icon_away:
                  [top: 10%, left: 10.1%, width: 3.1vw, position: absolute,
                  fill: "[[[ return entity.state === 'on' ? '#516d82' : '#9da0a2'; ]]]"]
            template: base

          #################################################
          #                                               #
          #                     MAISON                    #
          #                                               #
          #################################################

          - type: custom:button-card
            entity: script.home_arrive
            state_display: Auto
            style:
              top: 82.1%
              left: 91.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/maison_data_kwh.yaml
            custom_fields:
              icon_home: >
                [[[ const state = entity.state === 'on' ? 'animate' : null;
                return `<svg viewBox="0 0 50 50"> <style>@keyframes animate{from, 20%, 40%, 60%, 80%, to{animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);}0%{transform: scale(0.3);}20%{transform: scale(1.1);}40%{transform: scale(0.9);}60%{transform: scale(1.03);}80%{transform: scale(0.97);}to{transform: scale(1);}}.animate{animation: animate 1s; transform-origin: center;}</style>
                <path class="${state}" d="M42.2 28.3c0-.8-.2-1-.2-1L26 12.1s-.5-.4-1-.4-1 .3-1 .3L8.2 27.1c-.4.5-.4.9-.4.9v18.3c0 1.1.9 2 1.9 2h8.2a1.47 1.47 0 0 0 1.5-1.5v-14a1.47 1.47 0 0 1 1.5-1.5h8.4a1.47 1.47 0 0 1 1.5 1.5v14a1.47 1.47 0 0 0 1.5 1.5h8.2c1.1 0 2-.9 2-1.9 0-.2-.3-18.1-.3-18.1zM7.3 25l-1.6 1.5s-.3.3-.5.3-.5 0-.8-.2c-.2-.2-2-2.8-2-2.8s-.1-.4-.1-.7c.1-.3.2-.7.3-.8.4-.1 21.5-20.1 21.5-20.1s.4-.3.9-.3c.4 0 .8.1.9.2s.5.4.5.4l8.9 8.5V6s.1-.4.2-.7c.1-.2.3-.3.4-.3s.3-.1.3-.1h3s.3.1.4.3a1.08 1.08 0 0 1 .3.7v9.8l7.2 6.9s.2.3.3.4c.1.2.1.7.1.7 0 .1-.1.4-.2.5s-1.6 2.5-1.6 2.5-.1.3-.3.3c-.2.1-.4.1-.7 0-.2-.1-.5-.4-.5-.4L26.4 9.4s-.3-.3-.5-.4-.4-.2-.8-.2-.5.1-.8.1c-.1.1-.4.3-.7.5C23.3 9.8 7.3 25 7.3 25z"/></svg>`; ]]]
            styles:
              card: [transition: all 0.3s ease-out]
              custom_fields:
                icon_home:
                  [top: 10.5%, left: 10.1%, width: 2.9vw, position: absolute,
                  fill: "[[[ return entity.state === 'on' ? '#c7983e' : '#9da0a2'; ]]]"]
            template: base





